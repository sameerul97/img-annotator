(this["webpackJsonpimage-annotator"]=this["webpackJsonpimage-annotator"]||[]).push([[0],{201:function(e,t,a){e.exports=a.p+"static/media/page_not_found.8781fc85.svg"},207:function(e,t,a){e.exports=a(458)},458:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),i=a.n(o),c=a(1),l=a(17);var d=function(e){return r.a.createElement(l.a,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-info"},r.a.createElement(l.c,{to:"/",className:"navbar-brand"},r.a.createElement("span",{role:"img","aria-label":"img"},"\ud83d\ude80"),"Img-annotator"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:"/",className:"nav-link",activeClassName:"nav-link active"},"Home")),e.userLoggedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:"/images",className:"nav-link",activeClassName:"nav-link active"},"View All")),e.userLoggedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:"/create",className:"nav-link",activeClassName:"nav-link active"},"Create")),e.userLoggedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:"/dashboard",className:"nav-link",activeClassName:"nav-link active"},"Dashboard"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},!e.userLoggedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:"/login",className:"nav-link",activeClassName:"nav-link active"},"Login")),e.userLoggedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:"/login",className:"nav-link",activeClassName:"nav-link active",onClick:function(){e.logout()}},"Logout"))))))},s=a(14);var p=function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",bottom:0,right:0}},r.a.createElement("i",{className:"text-primary fas fa-plus-circle fa-3x m-2"})))},u=a(192),m={labels:["Kiss","Absolute","Magic","Hits"],datasets:[{data:[300,100,100,200],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#0e25ff"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#0e25ff"]}]};var g=function(){return r.a.createElement("div",null,r.a.createElement(u.Pie,{onElementsClick:function(e){console.log("Doughnut clicked",e)},data:m,width:100,height:500,options:{maintainAspectRatio:!1,tooltips:{callbacks:{title:function(e,t){return t.labels[e[0].index]},label:function(e,t){return t.datasets[0].data[e.index]}},backgroundColor:"#FFF",titleFontSize:16,titleFontColor:"#0066ff",bodyFontColor:"#000",bodyFontSize:14,displayColors:!1}}}))};var f=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center mt-2"},r.a.createElement("p",{className:"mb-0"},"Click labels below to interact")),r.a.createElement(g,null),r.a.createElement(p,null))},b=a(9),h=a.n(b),E=a(18),v=function(e){return r.a.createElement("div",{className:"col-10s d-flex align-items-center  mx-auto",style:e.style},e.children)},x=function(){return r.a.createElement(v,{style:{background:"#44444485",borderRadius:"4px",padding:"16px"}},r.a.createElement("div",null,"Add Header"))},w=function(){return r.a.createElement(v,{style:{background:"#44444463",borderRadius:"4px",padding:"12px"}},r.a.createElement("div",null,"Add Text (Copy)"))},O=function(){return r.a.createElement(v,{style:{background:"#ffffff57",borderRadius:"4px",padding:"40px 16px",backgroundSize:"cover",backgroundPositionY:"-30px",backgroundImage:"url('https://images.unsplash.com/photo-1439792675105-701e6a4ab6f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1352&q=80')"}},r.a.createElement("div",null,"Add image"))},j=function(){return r.a.createElement(v,{style:{background:"#ffffff57",borderRadius:"4px",padding:"40px 16px",backgroundSize:"cover",backgroundImage:"url('https://media3.giphy.com/media/1kkxWqT5nvLXupUTwK/giphy.gif?cid=ecf05e47xuqieva7e9fn36dk27ucx7ccdgdo3l4g94si72xr&rid=giphy.gif')"}},r.a.createElement("div",null,"Add Video"))},k=function(){return r.a.createElement(v,{style:{background:"#ffffff57",borderRadius:"4px",padding:"16px"}},r.a.createElement("div",null,"Add Button"))},y=function(){return r.a.createElement(v,{style:{background:"#ffffff57",borderRadius:"4px",padding:"16px"}},r.a.createElement("div",null,"CarouselWidget"))},S="widget_id_1",N="widget_id_2",_="widget_id_3",I="widget_id_4",C="widget_id_5",M="widget_id_6",W="widget_id_7",B=[{id:S,widget:r.a.createElement(x,null)},{id:C,widget:r.a.createElement(w,null)},{id:N,widget:r.a.createElement(O,null)},{id:_,widget:r.a.createElement(j,null)},{id:I,widget:r.a.createElement(k,null)},{id:W,widget:r.a.createElement(y,null)}],A=a(113),D=a.n(A);var R=function(){var e=window.location.href.split("/")[2];return"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e?"https://creative.bauermedia.co.uk/scrollmagic/img-annotator-v4/api":"demomatthobbsnet.eu-west-2.elasticbeanstalk.com"===e?"http://demomatthobbsnet.eu-west-2.elasticbeanstalk.com/img-annotator-master/server/api":"http://localhost:8888/Project_2021/image-annotator/server/api"}(),P=localStorage.getItem("token"),T=D.a.create({baseURL:R});T.interceptors.request.use((function(e){return P&&(e.headers.Authorization=localStorage.getItem("token")),e}));var F=T;function L(e){var t=e.img,a=(e.index,Object(n.useState)(!1)),o=Object(c.a)(a,2),i=o[0],l=o[1];return r.a.createElement("div",{style:{position:"relative"}},i?null:r.a.createElement("div",{className:"text-center w-100 d-flex shine",style:{minHeight:"250px"}}),r.a.createElement("img",{style:i?{}:{display:"none"},src:t.url,onLoad:function(){return l(!0)},alt:"empty",className:"card-img img-fluid shadow "}),r.a.createElement("div",{className:"text-left ",style:{bottom:"0",width:"100%",borderTopRightRadius:" 2px",color:"black",marginTop:"5px"}},r.a.createElement("p",{className:" ".concat(i?null:"shine"," w-100 "),style:i?{}:{minHeight:"30px"}},i?t.name:" ")))}var z=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([{id:2,url:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"},{id:3,url:"https://images.unsplash.com/photo-1441984536979-3513fd89f0d0?ixlib=rb-1.2.1&auto=format&fit=crop&w=2100&q=80"}]),d=Object(c.a)(i,2),s=d[0],p=d[1],u=function(e){localStorage.setItem("scrollPosition",window.pageYOffset)};Object(n.useEffect)((function(){(function(){var e=Object(E.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get("/allimages/",{params:{},headers:{Authorization:localStorage.getItem("token")}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){e.data.length>0&&(p(e.data),function(){var e=localStorage.getItem("scrollPosition");e&&(window.scrollTo(0,parseInt(e)),localStorage.removeItem("scrollPosition"))}())})).catch((function(e){o(!0)}))}),[]);var m=Object(n.useState)([{id:"widget_id_1",widgetId:0,widget:r.a.createElement(x,null)},{id:"widget_id_2",widgetId:1,widget:r.a.createElement(O,null)},{id:"widget_id_3",widgetId:2,widget:r.a.createElement(j,null)},{id:"widget_id_4",widgetId:3,widget:r.a.createElement(k,null)}]),g=Object(c.a)(m,2);return g[0],g[1],r.a.createElement("div",{className:"container my-5 "},r.a.createElement("div",{className:"card-columns text-center text-white"},!a&&r.a.createElement(r.a.Fragment,null,s.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"card border-0 py-2"},r.a.createElement(l.a,null,r.a.createElement(l.b,{to:"/image/".concat(e.id),onClick:u},r.a.createElement(L,{img:e}))))})))),a&&r.a.createElement("div",{className:"w-50 alert alert-danger",role:"alert"},"Error, unable to load images"))};var H=function(){return r.a.createElement("div",null,r.a.createElement(z,null))},J=a(16),U=a(6),V=a(7),$=a.n(V),q=(a(51),{getImageMetric:function(e,t){var a=new Image;a.src=$()(".imageMarker").find(".target").attr("src"),a.onload=function(){var e=a.naturalWidth,n=a.naturalHeight,r=$()(".imageMarker img").width(),o=r/e*100,i={width:e,height:n,getWidthLess:$()(".imageMarker img").width(),setPersenWidth:r/e*100,setHeight:n*o/100};t(i)}},positionMarkers:function(e){q.getImageMetric($()(".imageMarker"),(function(t){for(var a=0;a<e.current.length;a++)try{if(null!==e.current[a]){var n=parseFloat(e.current[a].attributes["data-top"].value)*t.setPersenWidth/100,r=parseFloat(e.current[a].attributes["data-left"].value)*t.setPersenWidth/100;e.current[a].setAttribute("data-x",0),e.current[a].setAttribute("data-y",0),$()(".imageMarker .circle").css("transform","translate(0px , 0px)"),$()(e.current[a]).css({top:n,left:r})}}catch(o){console.log(o)}}))},positionPopup:function(){var e=Object(E.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.getImageMetric($()(".imageMarker"),(function(e){var n=parseInt(t.top)*e.setPersenWidth/100,r=parseInt(t.left)*e.setPersenWidth/100;a({top:parseInt(n),left:parseInt(r)})}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),adjustPopupBoxContainer:function(e,t,a){q.getImageMetric($()(".imageMarker"),(function(n){var r=parseFloat(t.top)*n.setPersenWidth/100,o=parseFloat(t.left)*n.setPersenWidth/100,i=$()("#popup"+e),c=$()(i).find(".pointBoxArrow");$()(c).find(".pointBoxArrowRight").hide(),$()(c).find(".pointBoxArrowLeft").hide(),$()(c).css({right:""}),$()(c).css({left:""}),$()(i).css({top:"",right:"",left:""}),window.innerWidth>768&&(o>=n.getWidthLess/100*58?($()(i).css({top:r/2,right:$()(".imageMarker").width()-o+25}),$()(c).find(".pointBoxArrowRight").show(),$()(c).css({right:-20})):($()(i).css({top:r/2,left:o}),$()(c).find(".pointBoxArrowLeft").show(),$()(c).css({left:-17}))),$()(c).css({top:parseFloat(t.top)*n.setPersenWidth/100/2+25}),a()}))},registerOnClick:function(e){$()(e).each((function(e,t){$()(t,this).on("click",(function(e){e.preventDefault();var t=$()(this).closest(".item-point").data("popupid"),a=$()(t);a.addClass("d-block"),a.addClass("showflip");var n=$()(this).closest(".item-point").data("popupid"),r=$()(n);r.find(".exit").on("click",(function(e){e.preventDefault(),$()('[data-popupid="'+n+'"]').removeClass("active"),r.removeClass(""),r.addClass(""),a.removeClass("d-block"),a.removeClass("showflip"),$()(r).fadeOut()}))}))}))},imageMarker:function(){$()($()(".imageMarker")).each((function(e,t){var a=$()(t).find(".item-point");q.positionMarkerAndPopup(a,t,(function(){$()(t).find(".toggle")}))}))}}),K=q,Q=a(59),Y=a.n(Q),X=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),p=s[0],u=s[1];Object(n.useEffect)((function(){e.selectedMarker||l(!1),p!==parseInt(e.selectedMarker.markerId)&&l(!1),u(e.markers.m_id)}),[p,l,e.markers.m_id,e.selectedMarker.markerId,e.selectedMarker]);var m={background:e.markers.color};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:t,"data-key":e.markers.m_id,key:e.markers.m_id,id:e.markers.m_id,className:"item-point circle ".concat(e.popupViewEnabled?"pulse2":""," ").concat(!e.popupViewEnabled&&i?"showBorder":""),style:m,"data-top":e.markers.top,"data-left":e.markers.left,"data-popupid":"#popup"+e.markers.popup_id,onClick:e.popupViewEnabled?function(t){e.popupModeMarkerSelected&&e.popupModeMarkerSelected.popupId!==e.markers.popup_id?(e.setShowToast(!0),setTimeout((function(){return e.setShowToast(!1)}),4500)):e.setPopupModeMarkerSelected({markerId:p,popupId:e.markers.popup_id})}:function(t){e.setSelectedMarker({markerId:p,popupId:e.markers.popup_id}),l(!0)}},e.popupViewEnabled&&r.a.createElement("div",null,r.a.createElement("a",{href:"#!",onClick:function(e){e.preventDefault()},className:"toggle"}," "))))}));function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ee=r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),te=r.a.createElement("path",{d:"M14 6h2v2h5a1 1 0 0 1 1 1v7.5L16 13l.036 8.062 2.223-2.15L20.041 22H9a1 1 0 0 1-1-1v-5H6v-2h2V9a1 1 0 0 1 1-1h5V6zm8 11.338V21a1 1 0 0 1-.048.307l-1.96-3.394L22 17.338zM4 14v2H2v-2h2zm0-4v2H2v-2h2zm0-4v2H2V6h2zm0-4v2H2V2h2zm4 0v2H6V2h2zm4 0v2h-2V2h2zm4 0v2h-2V2h2z",fill:"rgba(255,255,255,1)"}),ae=function(e){var t=e.svgRef,a=e.title,n=Z(e,["svgRef","title"]);return r.a.createElement("svg",G({viewBox:"0 0 24 24",width:20,height:20,ref:t},n),a?r.a.createElement("title",null,a):null,ee,te)},ne=r.a.forwardRef((function(e,t){return r.a.createElement(ae,G({svgRef:t},e))})),re=(a.p,a(30)),oe=a(19);var ie=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},ce=function(e){var t="https://images.unsplash.com/photo-1509983165097-0c31a863e3f3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),p=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],h=Object(n.useState)(""),E=Object(c.a)(h,2),v=E[0],x=E[1],w=Object(n.useState)(!1),O=Object(c.a)(w,2),j=O[0],k=O[1],y=Object(n.useState)(!1),S=Object(c.a)(y,2),N=S[0],_=S[1],I=Object(n.useState)(!1),C=Object(c.a)(I,2),M=C[0],W=C[1],B=Object(n.useState)(""),A=Object(c.a)(B,2),D=(A[0],A[1]),R=Object(n.useState)(!1),P=Object(c.a)(R,2),T=P[0],F=P[1],L=function(e,t){if(e.target.files&&e.target.files[0]){var a=e.target.files[0];k(e.target.files[0]),F(!1),_(URL.createObjectURL(a))}t&&(k(e.target.value),_(e.target.value),F(!0))};return Object(n.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(n.useLayoutEffect)((function(){return null!==e.data.src?(k(e.data.src),_(e.data.src),D(e.data.id),x(e.data.src)):(k(t),x(t)),function(){}}),[e.data.src,e.data.id,t,D]),Object(n.useLayoutEffect)((function(){var e=!0,t=new Image;return t.src=j,t.onload=function(){e&&(t.naturalWidth>t.naturalHeight?W(!1):t.naturalWidth<t.naturalHeight?W(!0):W(!1))},function(){e=!1}}),[j,k,e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(i?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(f?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(u(!0),b(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(u(!1),b(!1))}},i&&p?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),l(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!i&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),l(!0),k(v),_(v),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,j,e.data.widget_type_id,T),l(!0),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!i&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"image Url","aria-label":"image Url","aria-describedby":"addon-wrapping",value:j,onChange:function(e){return L(e,!0)}})),r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-upload"}))),r.a.createElement("label",{className:"btn btn-default btn-sm"},r.a.createElement("input",{type:"file",className:"form-control. w-100",placeholder:"upload image","aria-label":"upload image","aria-describedby":"addon-wrapping",onChange:function(e){return L(e)}})))),r.a.createElement(ie,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),j&&r.a.createElement("img",{src:N,alt:"empty",className:"img-fluid",style:M?{maxWidth:"220px"}:{}}))};var le=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},de=function(e){var t="https://www.youtube.com/embed/lvfB_p0IiHM",a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),p=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],h=Object(n.useState)(""),E=Object(c.a)(h,2),v=E[0],x=E[1],w=Object(n.useState)(!1),O=Object(c.a)(w,2),j=O[0],k=O[1];return Object(n.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(n.useLayoutEffect)((function(){return null!==e.data.src?(k(e.data.src),x(e.data.src)):(k(t),x(t)),function(){}}),[e.data.src,e.data.id,t]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(i?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(f?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(u(!0),b(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(u(!1),b(!1))}},i&&p?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),l(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!i&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:1}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),l(!0),k(v),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,j),l(!0),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!i&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"video Url","aria-label":"video Url","aria-describedby":"addon-wrapping",value:j,onChange:function(e){return function(e){var t=e.target.value,a=t.split("/")[2];k("vimeo.com"===a?"https://player.vimeo.com/video/"+t.split("/")[3]:"www.youtube.com"===a?"https://www.youtube.com/embed/"+t.split("?v=")[1]:e.target.value)}(e)}}))),r.a.createElement(le,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),k&&r.a.createElement("div",{className:"video_wrapper_on_drag",style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},r.a.createElement("div",{className:"embed-container"},r.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:j.toString(),style:e.popupEditModeSelected?{zIndex:-1}:{},allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"}))))},se=a(34),pe=a(5);var ue=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},me=function(e){var t=Object(n.useState)({value:pe.EditorState.createEmpty()}),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(!1),h=Object(c.a)(b,2),E=h[0],v=h[1],x=Object(n.useState)(""),w=Object(c.a)(x,2),O=w[0],j=w[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Lorem empsum",type:"header-three",depth:0,inlineStyleRanges:[{offset:0,length:12,style:"color-rgb(52,58,64)"},{offset:0,length:12,style:""},{offset:0,length:12,style:"fontsize-1.5rem"},{offset:0,length:12,style:'fontfamily--apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'}],entityRanges:[],data:{"text-align":"left"}}],entityMap:{}};return null!==e.data.src?(i({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(JSON.parse(e.data.src)))}),j(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(JSON.parse(e.data.src))))):(i({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t))}),j(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t)))),function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(E?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),p(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){console.log(e.data.id),t.preventDefault(),window.$("div[role=tooltip]").remove(),p(!0),i({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(pe.convertToRaw)(o.value.getCurrentContent())),e.data.widget_type_id),p(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(se.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper headerWrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){i({value:e}),localStorage.setItem("editorState_Header",JSON.stringify(Object(pe.convertToRaw)(e.getCurrentContent())))},toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,className:"bg-info rounded-0",component:void 0,dropdownClassName:"undefined",options:["bold","italic","underline"]},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right"]}}}),!s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(ue,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var ge=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},fe=function(e){var t=Object(n.useState)({value:pe.EditorState.createEmpty()}),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(!1),h=Object(c.a)(b,2),E=h[0],v=h[1],x=Object(n.useState)(""),w=Object(c.a)(x,2),O=w[0],j=w[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque, assumenda illo, vitae maiores itaque aliquid ad voluptates sit hic beatae, non tempora rerum ipsa? Maxime?",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"left"}}],entityMap:{}};return null!==e.data.src?(i({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(JSON.parse(e.data.src)))}),j(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(JSON.parse(e.data.src))))):(i({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t))}),j(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t)))),function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(E?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),p(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),p(!0),i({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){console.log(e.data.id),t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(pe.convertToRaw)(o.value.getCurrentContent())),e.data.widget_type_id),p(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(se.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){i({value:e}),localStorage.setItem("editorState_Paragraph",JSON.stringify(Object(pe.convertToRaw)(e.getCurrentContent())))},toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,className:"bg-info rounded-0",component:void 0,dropdownClassName:"undefined",options:["bold","italic","underline"]},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right"]}}}),!s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(ge,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var be=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},he=function(e){var t=Object(n.useState)(!0),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(""),m=Object(c.a)(u,2),g=(m[0],m[1]),f=Object(n.useState)(!1),b=Object(c.a)(f,2),h=b[0],E=b[1],v=(r.a.createRef(),Object(n.useState)("https:google.com")),x=Object(c.a)(v,2),w=x[0],O=x[1],j=Object(n.useState)(""),k=Object(c.a)(j,2),y=k[0],S=k[1],N=Object(n.useState)(""),_=Object(c.a)(N,2),I=_[0],C=_[1],M=Object(n.useState)({value:pe.EditorState.createEmpty()}),W=Object(c.a)(M,2),B=W[0],A=W[1],D=Object(n.useState)(""),R=Object(c.a)(D,2),P=R[0],T=R[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Some test button",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"center"}}],entityMap:{}};if(null!==e.data.src){var a=JSON.parse(e.data.src);g(a.buttonTextSrc),O(a.buttonUrlSrc),S(a.buttonUrlSrc),C(a.buttonTextSrc),A({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(a.buttonTextSrc))}),T(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(a.buttonTextSrc)))}else g("Some btn text"),S("https://google.com"),C("Click Here"),A({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t))}),T(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t)));return function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(o?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(p(!0),E(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(p(!1),E(!1))}},o&&s?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),i(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!o&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),i(!0),g(I),A({value:P}),O(y),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify({buttonTextSrc:Object(pe.convertToRaw)(B.value.getCurrentContent()),buttonUrlSrc:w}),e.data.widget_type_id),i(!0),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!o&&r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Button Url","aria-label":"Button Url","aria-describedby":"addon-wrapping",value:w,onChange:function(e){return function(e){O(e.target.value)}(e)}})),r.a.createElement("div",{className:"video_wrapper_on_drag",style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},r.a.createElement("a",Object.assign({},o?{href:w,target:"_blank"}:{},{className:"btn buttonWidgetWrapper w-100 rounded-0\n          ".concat(o?" btn-info":" text-dark bg-white"),style:e.popupEditModeSelected?{position:"relative",zIndex:-1}:{}}),r.a.createElement(se.Editor,{readOnly:o,toolbarHidden:o,handlePastedText:function(){return!1},editorState:B.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor   ".concat(o?" ":"changeCursor ","  "),onEditorStateChange:function(e){A({value:e})},toolbar:{options:[]}}))),r.a.createElement(be,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var Ee=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},ve=function(e){var t=Object(n.useState)({value:pe.EditorState.createEmpty()}),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(!1),h=Object(c.a)(b,2),E=h[0],v=h[1],x=Object(n.useState)(""),w=Object(c.a)(x,2),O=w[0],j=w[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Free mode",type:"header-three",depth:0,inlineStyleRanges:[{offset:0,length:10,style:""},{offset:0,length:10,style:"fontsize-.75rem"},{offset:0,length:10,style:"fontsize-24"},{offset:0,length:10,style:"fontfamily-Arial"},{offset:0,length:10,style:"color-rgb(97,189,109)"},{offset:0,length:10,style:"bgcolor-rgb(247,218,100)"}],entityRanges:[{offset:0,length:10,key:0}],data:{"text-align":"left"}}],entityMap:{0:{type:"LINK",mutability:"MUTABLE",data:{url:"http://google.com",targetOption:"_blank"}}}};return null!==e.data.src?(i({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(JSON.parse(e.data.src)))}),j(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(JSON.parse(e.data.src))))):(i({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t))}),j(pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t)))),function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(E?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),p(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),p(!0),i({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(pe.convertToRaw)(o.value.getCurrentContent()))),p(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(se.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){i({value:e})},toolbar:{options:["inline","blockType","fontSize","fontFamily","textAlign","colorPicker","link","emoji","history"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline","strikethrough"]}}}),!s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(Ee,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var xe=function(e){var t=Object(n.useState)(!0),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(!1),h=Object(c.a)(b,2),E=h[0],v=h[1],x=Object(n.useState)(""),w=Object(c.a)(x,2),O=(w[0],w[1]),j=Object(n.useState)(),k=Object(c.a)(j,2),y=k[0],S=k[1],N=Object(n.useState)([]),_=Object(c.a)(N,2),I=_[0],C=_[1],M=Object(n.useState)(!1),W=Object(c.a)(M,2),B=W[0],A=W[1],D=Object(n.useState)(!1),R=Object(c.a)(D,2),P=R[0],T=R[1],F=Object(n.useState)(!1),L=Object(c.a)(F,2),z=L[0],H=L[1],U=Object(n.useState)(!1),V=Object(c.a)(U,2),$=V[0],q=V[1],K=Object(n.useState)([{}]),Q=Object(c.a)(K,2),Y=Q[0],X=Q[1];Object(n.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(n.useLayoutEffect)((function(){return v(JSON.parse(e.data.src)),X(JSON.parse(e.data.src)),O(e.data.id),function(){}}),[e.data.src,e.data.id,"https://images.unsplash.com/photo-1509983165097-0c31a863e3f3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",O]),Object(n.useEffect)((function(){C((function(e){return Array(y).fill().map((function(t,a){return e[a]||Object(n.createRef)()}))}))}),[y]),Object(n.useEffect)((function(){E&&S(E.length)}),[E,I]),Object(n.useEffect)((function(){if(B&&(I[I.length-1].current.scrollIntoView({behavior:"smooth",block:"end",inline:"center"}),setTimeout((function(){A(!1)}),250)),z){var e;for(var t in I)I[t]===$.reactRef&&(e=I[t]);setTimeout((function(){console.log("slide being edited",e.current),console.log(),e.current.scrollIntoView({behavior:"smooth",inline:"center"})}),250)}}),[B,I,z,$.reactRef]);var G=function(t,a,n,r,o,i,c,l,d){T(!0),e.updateASlideInCarousel(e.data.id,t,a,n,r,o,i,c,l,(function(e,t,a,n){e||(T(!1),d(a,n))}))},Z=function(t,a){if(T(!0),E.length<=2)return T(!1),void a(!1);e.deleteASlideInCarousel(e.data.id,t,(function(e){e||T(!1)}))};return r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative pt-0 ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(o?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(g?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(p(!0),f(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(p(!1),f(!1))},style:o?{}:{paddingBottom:"40px"}},o&&s?r.a.createElement(oe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),i(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(J.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!o&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("button",{className:" border-0 rounded popupWidget_ExitButton btn-sm btn badge badge-secondary text-white","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",disabled:z,onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),i(!0),p(!1),v(Y),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("button",{className:"text-white  border-0 rounded popupWidget_ExitButton btn-sm btn badge badge-success text-white","data-toggle":"tooltip","data-placement":"right",title:"Save changes",disabled:z,onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove();var a=[],n=E;for(var r in n)E[r].order_no=r,a.push(E[r]);i(!0),p(!1),e.updateCarouselSlidesOrder(e.data.id,JSON.stringify(a),e.data.widget_type_id)}},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(je,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),E&&r.a.createElement(r.a.Fragment,null,P&&r.a.createElement("div",{className:"position-absolute h-100 w-100 smoothTransition",style:{background:"#ffffffad",zIndex:"9"}}),P&&r.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},r.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement(ke,{readMode:o,addNewImage:function(t){T(!0),e.addASlideInCarousel(e.data.id,t,(function(e){e||(T(!1),A(!0))}))},isSlideBeingEdited:z}),r.a.createElement(re.a,{onDragEnd:function(e){if(e.destination){var t=ye(E,e.source.index,e.destination.index);v(t)}}},r.a.createElement(re.c,{droppableId:"droppable",direction:"horizontal"},(function(e,t){return r.a.createElement("div",Object.assign({ref:e.innerRef,style:Ne(t.isDraggingOver,z)},e.droppableProps),E.length>0&&r.a.createElement(r.a.Fragment,null,E.map((function(e,t){return r.a.createElement(re.b,{key:e.id,draggableId:e.id,index:t,isDragDisabled:o||z},(function(a,n){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:Se(n.isDragging,a.draggableProps.style,o,z),id:e.id}),r.a.createElement("div",{ref:I[t],className:"position-relative h-100"},"image"===e.slide_type?r.a.createElement(Oe,{slideData:e,readMode:o,deleteASlide:Z,updateASlide:G,setIsSlideBeingEdited:H,reactRef:I[t],setSlideBeingEdited:q}):r.a.createElement(we,{slideData:e,readMode:o,deleteASlide:Z,updateASlide:G,setIsSlideBeingEdited:H,reactRef:I[t],setSlideBeingEdited:q})))}))}))),e.placeholder)})))))};function we(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(""),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(""),h=Object(c.a)(b,2),E=h[0],v=h[1],x=Object(n.useState)(!1),w=Object(c.a)(x,2),O=(w[0],w[1]),j=Object(n.useState)(!1),k=Object(c.a)(j,2),y=k[0],S=k[1],N=Object(n.useState)(!1),_=Object(c.a)(N,2),I=_[0],C=_[1],M=Object(n.useState)(!1),W=Object(c.a)(M,2),B=(W[0],W[1]),A=Object(n.useState)(!1),D=Object(c.a)(A,2),R=D[0];D[1];Object(n.useEffect)((function(){return i(e.slideData),S(e.slideData.src),f(e.slideData.src),v(e.slideData.caption),C(e.slideData.caption),B(!0),function(){B(!1)}}),[]);return r.a.createElement(r.a.Fragment,null,!e.readMode&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pb-1 text-md-left text-center"},r.a.createElement("div",{className:"row"},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){e.deleteASlide(o.id,(function(e){}))},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Delete")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},r.a.createElement("button",{id:o.id,className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-light text-dark",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){p(!0),e.setIsSlideBeingEdited(!0),e.setSlideBeingEdited({id:o.id,reactRef:e.reactRef})}},"Edit"))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){S(g),C(E),p(!1),e.setIsSlideBeingEdited(!1)},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Cancel")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},R&&r.a.createElement("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("button",{id:o.id,className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-success text-white",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){e.updateASlide(o.id,I,o.slide_type,!1,!1,!1,y,y!==g,(function(t,a){p(!1),e.setIsSlideBeingEdited(!1),f(t),O(t),v(a),C(a)}))}},"Save"))))),s&&r.a.createElement("div",{className:"mb-2 mt-1"},r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Image url","aria-label":"Image url","aria-describedby":"addon-wrapping",value:y,onChange:function(e){return function(e){var t=e.target.value,a=t.split("/")[2];S("vimeo.com"===a?"https://player.vimeo.com/video/"+t.split("/")[3]:"www.youtube.com"===a?"https://www.youtube.com/embed/"+t.split("?v=")[1]:e.target.value)}(e)}})))),r.a.createElement("div",{className:"smoothTransition ",style:e.readMode||s?{height:"auto",minWidth:"300px",minHeight:"300px"}:{minWidth:"250px",minHeight:"auto",marginTop:"0em"}},!1!==y&&r.a.createElement("div",{className:"video_wrapper_on_drag",style:e.readMode||s?{}:{position:"relative",zIndex:1}},r.a.createElement("div",{className:"embed-container"},r.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:y,style:e.readMode||s?{}:{zIndex:-1},allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"})))))}function Oe(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(""),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(""),h=Object(c.a)(b,2),E=h[0],v=h[1],x=Object(n.useState)(!1),w=Object(c.a)(x,2),O=w[0],j=w[1],k=Object(n.useState)(!1),y=Object(c.a)(k,2),S=y[0],N=y[1],_=Object(n.useState)(!1),I=Object(c.a)(_,2),C=I[0],M=I[1],W=Object(n.useState)(!1),B=Object(c.a)(W,2),A=B[0],D=B[1],R=Object(n.useState)(!1),P=Object(c.a)(R,2),T=P[0],F=P[1],L=Object(n.useState)(!1),z=Object(c.a)(L,2),H=z[0],J=z[1],U=Object(n.useState)(!1),V=Object(c.a)(U,2),$=V[0],q=V[1],K=Object(n.useState)({value:pe.EditorState.createEmpty()}),Q=Object(c.a)(K,2),Y=Q[0],X=Q[1];Object(n.useEffect)((function(){return i(e.slideData),j(e.slideData.src),N(e.slideData.src),f(e.slideData.src),v(e.slideData.caption),F(e.slideData.caption),J(!0),function(){J(!1)}}),[]),Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:e.slideData.caption,type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"center"}}],entityMap:{}};X({value:pe.EditorState.createWithContent(Object(pe.convertFromRaw)(t))})}),[]),Object(n.useLayoutEffect)((function(){if(A){var e=new Image;e.src=O,q(!0),e.onload=function(){q(!1),M(!0)},e.onerror=function(){q(!1),M(!1)}}else M(!0);return function(){q(!1)}}),[O,A]);var G=function(e,t){if(e.target.files&&e.target.files[0]){var a=e.target.files[0];j(e.target.files[0]),D(!1),N(String(URL.createObjectURL(a)))}if(t){var n=o;n.src=e.target.value,i(n),j(e.target.value),D(!0),N(e.target.value)}};return r.a.createElement(r.a.Fragment,null,!e.readMode&&r.a.createElement(r.a.Fragment,null,H&&r.a.createElement("div",{className:"position-absolute h-100 w-100 smoothTransition",style:{background:"#ffffffad",zIndex:"9"}}),r.a.createElement("div",{className:"pb-1 text-md-left text-center"},H&&r.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},r.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"row"},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){e.deleteASlide(o.id,(function(e){}))},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Delete")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},r.a.createElement("button",{id:o.id,className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-light text-dark",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){p(!0),e.setIsSlideBeingEdited(!0),e.setSlideBeingEdited({id:o.id,reactRef:e.reactRef})}},"Edit"))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){N(g),j(g),F(E),p(!1),e.setIsSlideBeingEdited(!1)},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Cancel")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},$&&r.a.createElement("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("button",{id:o.id,className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-success text-white",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){e.updateASlide(o.id,T,o.slide_type,O,A,O!==g,!1,!1,(function(t,a){p(!1),e.setIsSlideBeingEdited(!1),f(t),N(t),j(t),v(a),F(a)}))},disabled:O===g&&T===E||!1===C||$},"Save"))))),s&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Image url","aria-label":"Image url","aria-describedby":"addon-wrapping",value:O,onChange:function(e){return G(e,!0)},onKeyDown:function(e){9===e.keyCode&&e.preventDefault()}})),r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm my-2 border rounded"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-upload"}))),r.a.createElement("label",{className:"btn btn-default btn-sm"},r.a.createElement("input",{type:"file",className:"form-control. w-100",placeholder:"upload image","aria-label":"upload image",accept:"image/*","aria-describedby":"addon-wrapping",onChange:function(e){return G(e)}}))))),g&&r.a.createElement("div",{className:"smoothTransition",style:e.readMode||s?{height:"auto",minHeight:"300px"}:{minHeight:"auto"}},r.a.createElement("img",{alt:"test",src:S,onLoad:function(){return J(!1)},className:" smoothTransition  ".concat(H?"opacity-0":"opacity-1 "),style:e.readMode||s?{height:"auto",width:"300px",minWidth:"300px"}:{height:"auto",width:"180px",minWidth:"180px"}}),H?r.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},r.a.createElement("div",{className:"spinner-grow text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):null),r.a.createElement("div",{className:"video_wrapper_on_drag smoothTransition text-center mt-2  ".concat(s?" bg-white text-black py-2 ":" text-white ","  "),style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},r.a.createElement(se.Editor,{readOnly:!s,toolbarHidden:!s,handlePastedText:function(){return!1},editorState:Y.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor   ".concat(s?"changeCursor ":" ","  "),toolbar:{options:[],inline:{options:[]}},onEditorStateChange:function(e){X({value:e});var t=Object(pe.convertToRaw)(e.getCurrentContent());console.log(t.blocks[0].text),F(t.blocks[0].text)},onTab:function(e){9===e.keyCode&&e.preventDefault()}})))}var je=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},ke=function(e){return r.a.createElement(r.a.Fragment,null,!e.readMode&&r.a.createElement("div",{className:"py-2 text-left"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-6 text-xl-left text-center"},r.a.createElement("button",{className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-secondary text-white bg-info",onClick:function(t){return e.addNewImage(!0)},style:{padding:"5px 10px",borderRadius:"30px"},disabled:e.isSlideBeingEdited},"Add Image Slide")),r.a.createElement("div",{className:"col-xl-6 text-xl-right text-center"},r.a.createElement("button",{className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-secondary text-white bg-info",onClick:function(t){return e.addNewImage(!1)},style:{padding:"5px 10px",borderRadius:"30px"},disabled:e.isSlideBeingEdited},"Add Video Slide")))))},ye=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(c.a)(r,1)[0];return n.splice(a,0,o),n},Se=function(e,t,a,n){return Object(U.a)({userSelect:"none",margin:"0 ".concat(8,"px 0 0"),transition:"all 0.65s ease-in-out",padding:"".concat(8,"px"),background:e?"lightgreen":"#19a2b8"},t)},Ne=function(e,t){return{background:e?"lightblue":"white",display:"flex",padding:8,overflow:t?"hidden":"auto"}};var _e=function(e,t){var a=Object(n.useState)({items:{}}),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),p=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],v=Object(n.useState)([]),x=Object(c.a)(v,2),w=x[0],O=x[1];!function(e){var t=Object(n.useRef)(e);Object(n.useEffect)((function(){var a=Object.entries(e).reduce((function(e,a){var n=Object(c.a)(a,2),r=n[0],o=n[1];return t.current[r]!==o&&(e[r]=[t.current[r],o]),e}),{});Object.keys(a).length,t.current=e}))}(e),Object(n.useLayoutEffect)((function(){function t(){return(t=Object(E.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.positionPopup(e.positions,(function(e){u({top:e.top+"px",left:e.left+"px"})}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}l({items:e.data.popup_content}),function(){t.apply(this,arguments)}()}),[e]),Object(n.useLayoutEffect)((function(){b(!0)}),[e.data.id,e.positions,f]),Object(n.useLayoutEffect)((function(){function t(){K.adjustPopupBoxContainer(e.data.id,e.positions,(function(){b(!0)}))}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[e]);var j=Object(n.useState)(!1),k=Object(c.a)(j,2),y=k[0],B=k[1],A=Object(n.useState)(!1),D=Object(c.a)(A,2),R=D[0],P=D[1],T={position:"absolute",top:"-25px",left:0,padding:"5px 10px",margin:"-10px 0px 0px",borderRadius:"30px",display:"flex",alignItems:"center"},L=function(t){var a=t.currentTarget.id;F.delete("/popup_widget/",{data:{marker_id:e.data.id,popup_widget_id:a},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){l((function(e){return{items:e.items.filter((function(e){return parseInt(e.id)!==a}))}})),e.setPopups((function(t){return t.map((function(t,n){return parseInt(t.id)===parseInt(e.data.id)?Object(U.a)(Object(U.a)({},t),{},{popup_content:t.popup_content.filter((function(e){return e.id!==a}))}):t}))}))})).catch((function(t){"Expired token"===t.response.data.message&&e.history.push("/login/")}))},z=function(){return r.a.createElement("button",{className:"btn-sm btn badge badge-secondary text-white bg-info",style:T,onClick:function(t){return function(){if(y){e.setPopupEditMode(!1),P(!0),setTimeout((function(){P(!1)}),400),console.log(e.data);var t=e.data.popup_content;for(var a in t)t[a].order_no=a;F.post("/popup_widget/save_order.php/",{marker_id:parseInt(e.data.id),popup_content:t},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),B(!1)}else e.setPopupEditMode(!0),B(!0),P(!0),setTimeout((function(){P(!1)}),400)}()},disabled:w.length>0},y?"Save Layout":"Edit Layout",r.a.createElement(ne,{className:"mx-1"}))};return r.a.createElement(r.a.Fragment,null,f?r.a.createElement("div",{styles:!1!==p?p:"",className:"pointBox showflip",id:"popup"+e.data.id},r.a.createElement(z,null),r.a.createElement(Ce,null),y?void 0:r.a.createElement(Ie,{closeThisPopup:function(){e.setPopupModeMarkerSelected(!1),O((function(){return[{}]}))}}),r.a.createElement(re.c,{droppableId:"droppable2"},(function(t,a){return r.a.createElement("div",{ref:t.innerRef,style:y?{background:n?"red":"lightgrey",padding:6}:void 0,className:" smoothTransition ".concat(y?"":"pb-0")},i.items.map((function(t,a){return r.a.createElement(re.b,{key:t.id,draggableId:t.id,index:a,isDragDisabled:!y||e.newWidgetBeingAdded},(function(a,n){return r.a.createElement("div",null,r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:y?(o=n.isDragging,c=a.draggableProps.style,o.isDropAnimating?c:Object(U.a)({userSelect:"none",padding:6,margin:"0 0 ".concat(6,"px 0"),background:o?"#117a8b":"#19a2b8"},c)):void 0,className:"".concat(R?"smoothTransition":void 0)}),function(t){var a=t.item;switch(a.widget_type_id){case N:return r.a.createElement(ce,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,popupItems:i,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O});case S:return r.a.createElement(me,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O});case C:return r.a.createElement(fe,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O});case I:return r.a.createElement(he,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O});case _:return r.a.createElement(de,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,popupItems:i,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O});case M:return r.a.createElement(ve,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O});case W:return r.a.createElement(xe,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:y,deleteAWidget:L,popupWidgetBeingEdited:w,setPopupWidgetBeingEdited:O,addASlideInCarousel:e.addASlideInCarousel,deleteASlideInCarousel:e.deleteASlideInCarousel,updateASlideInCarousel:e.updateASlideInCarousel,updateCarouselSlidesOrder:e.updateCarouselSlidesOrder});default:return r.a.createElement("h1",{className:"text-dark"},"Widget not implemented")}}({item:t})));var o,c}))})),t.placeholder);var n}))):void 0)},Ie=function(e){var t=e.closeThisPopup;return r.a.createElement("div",{className:"pointBoxClose exit",onClick:function(){return t()}},r.a.createElement("div",{className:"pointBoxCloseIcon"},r.a.createElement("svg",{height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{fill:"none",stroke:"black",strokeWidth:"1"},r.a.createElement("path",{d:"M2 14L14 2M2 2l12 12"})))))},Ce=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"pointBoxArrow"},r.a.createElement("svg",{width:"20",className:"pointBoxArrowRight",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},r.a.createElement("path",{fill:"#ffffff",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})),r.a.createElement("svg",{width:"20",className:"pointBoxArrowLeft",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},r.a.createElement("path",{fill:"#ffffff",d:"M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"}))))},Me=function(e){var t=Object(n.useState)("Marker"),a=Object(c.a)(t,2),o=a[0],i=a[1];return r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"smoothTransition btn btn-info ".concat("Marker"===o?"active":""," ").concat(e.popupEditMode?"disabled":"")},r.a.createElement("input",{type:"radio",name:"options",id:"option1",onClick:function(){e.enableDraggableMode(),i("Marker")},defaultChecked:!0})," ","Marker"),r.a.createElement("label",{className:"smoothTransition btn btn-info ".concat("Popup"===o?"active":""," ").concat(e.popupEditMode?"disabled":"")},r.a.createElement("input",{type:"radio",name:"options",onClick:function(){e.enablePopupView(),i("Popup")}}),"Popup"))};var We=function(e){var t={background:"#2a85a5",padding:"10px",borderRadius:"20px"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row text-left  mx-0 "},r.a.createElement("div",{className:"col-5  order-12 order-md-1  px-0 text-white"},r.a.createElement("div",{className:"p-1 "},r.a.createElement("a",{className:"smoothTransition btn btn-sm ".concat(e.popupViewEnabled?"disabled":""),href:"#!","data-toggle":"tooltip","data-placement":"top",title:"Add Marker",onClick:function(t){t.preventDefault(),e.addNewMarker()}},r.a.createElement("i",{className:"text-white fas fa-plus-circle fa-1x",style:t})),r.a.createElement("a",{href:"#!",className:"smoothTransition btn btn-sm ".concat(e.selectedMarker&&!e.popupViewEnabled?"":"disabled"),ref:e.deleteRef,"data-toggle":"tooltip","data-placement":"top",title:"Delete Marker",onClick:function(t){t.preventDefault(),e.deleteMarker()},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:" text-white far fa-trash-alt fa-1x",style:t})))),r.a.createElement("div",{className:"smoothTransition col-7 order-1 order-md-1  px-0 py-2 py-md-0 my-auto text-md-right text-left"},r.a.createElement(Me,{enablePopupView:e.enablePopupView,enableDraggableMode:e.enableDraggableMode,popupEditMode:e.popupEditMode}))))},Be=a(202);var Ae=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),d=Object(c.a)(l,2),s=d[0],p=d[1];return Object(n.useEffect)((function(){e.selectedMarker?setTimeout((function(){return i(!0)}),400):i(!1)}),[o,e.selectedMarker]),r.a.createElement(r.a.Fragment,null,o&&!e.popupViewEnabled?r.a.createElement("div",{className:"smoothTransition py-2 "},r.a.createElement(Be.a,{color:s,disableAlpha:!0,colors:["#f44336","#ffffff","#e91e63","#9c27b0","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#673ab7"],circleSpacing:6,width:"90%",onChange:function(t){p(t),e.onColorSelected(t)}})):void 0)};var De=function(){return window.$(".toast").toast(),r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative"}},r.a.createElement("div",{className:"toast",style:{position:"absolute",top:0,right:0,opacity:1,zIndex:1e3}},r.a.createElement("div",{className:"toast-header bg-info text-white"},r.a.createElement("span",{role:"img","aria-label":"Alert",height:"100"},"\ud83d\ude2e \ud83d\ude2e \ud83d\ude2e"),r.a.createElement("strong",{className:"mr-auto"})),r.a.createElement("div",{className:"toast-body text-dark",style:{backgroundColor:"#88888859"}},"Close already opened popup"," ",r.a.createElement("span",{role:"img","aria-label":"Alert",height:"100"},"\ud83d\ude0e"))))},Re=function(e,t){return e.isDropAnimating?t:Object(U.a)({userSelect:"none",margin:"0 0 ".concat(8,"px 0")},t)};var Pe=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),d=Object(c.a)(l,2),s=d[0],p=d[1];return Object(n.useEffect)((function(){p(B),setTimeout((function(){return i(!0)}),100)}),[]),r.a.createElement(r.a.Fragment,null,o&&r.a.createElement("div",{className:"row py-2 mx-auto"},r.a.createElement(re.c,{droppableId:"droppable",isDropDisabled:!0},(function(t,a){return r.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,style:{width:n?"400px":"200px",margin:"8px 0px"},className:"col-12"}),s.map((function(t,a){return r.a.createElement(re.b,{key:t.id,draggableId:t.id,index:a,isDragDisabled:e.newWidgetBeingAdded},(function(e,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:Re(a.isDragging,e.draggableProps.style)}),r.a.createElement(oe.a.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1}},t.widget)),a.isDragging&&r.a.createElement("div",{style:Re(e.draggableProps.style),className:"popupWidget"},t.widget))}))})),t.placeholder);var n}))))};var Te=function(e){var t=Object(n.useRef)([]),a=Object(n.useRef)(!1),o=Object(n.useRef)(!1),i=Object(n.useRef)(!1),l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],p=d[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],f=m[1],b=Object(n.useState)(!1),v=Object(c.a)(b,2),x=v[0],w=v[1],O=Object(n.useState)(!1),j=Object(c.a)(O,2),k=j[0],y=j[1],S=Object(n.useState)(!1),N=Object(c.a)(S,2),_=N[0],I=N[1],C=Object(n.useState)({}),M=Object(c.a)(C,2),A=M[0],D=M[1],R=Object(n.useState)(!1),P=Object(c.a)(R,2),T=P[0],L=P[1],z=Object(n.useState)(!1),H=Object(c.a)(z,2),V=H[0],q=H[1],Q=Object(n.useState)(!1),G=Object(c.a)(Q,2),Z=G[0],ee=G[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],oe=ae[1],ie=Object(n.useState)(!1),ce=Object(c.a)(ie,2),le=ce[0],de=ce[1],se=Object(n.useState)(!1),pe=Object(c.a)(se,2),ue=pe[0],me=pe[1],ge=Object(n.useState)(!1),fe=Object(c.a)(ge,2),be=fe[0],he=fe[1],Ee=Object(n.useState)(!1),ve=Object(c.a)(Ee,2),xe=ve[0],we=ve[1],Oe=Object(n.useState)(!1),je=Object(c.a)(Oe,2),ke=je[0],ye=je[1];function Se(e){var t=$()(e.target).css("transform").split(","),a=t.length,n=parseInt(t[a-2]),r=parseInt(t[a-1]);K.getImageMetric($()(".imageMarker"),(function(t){var a,o;a=parseInt($()(e.target).css("left"))+n,o=parseInt($()(e.target).css("top"))+r;var i,c,l,d=a/t.getWidthLess*t.width,s=o/t.setHeight*t.height;i=e.target.getAttribute("data-key"),c=d,l=s,D((function(e){return Object(U.a)(Object(U.a)({},e),{},{marker_positions:e.marker_positions.map((function(e,t){return parseInt(e.m_id)===parseInt(i)?Object(U.a)(Object(U.a)({},e),{},{top:l,left:c}):e}))})}))}))}function Ne(e){var t=e.target,a=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,n=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+a+"px, "+n+"px)",t.setAttribute("data-x",a),t.setAttribute("data-y",n)}var Ie=e.match.params.id,Ce=Object(n.useCallback)(Object(E.a)(h.a.mark((function t(){var a,n,r,o,i,c,l,d,s,u,m,g,b,E,v,x;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.get("/image/",{params:{image_id:parseInt(Ie)},headers:{Authorization:localStorage.getItem("token")}});case 3:a=(a=t.sent).data,r=[],(n={}).url=a[0].url,n.name=a[0].name,n.id=a[0].Image_Id,n.marker_positions=[],o=[],t.t0=h.a.keys(a);case 12:if((t.t1=t.t0()).done){t.next=27;break}i=t.t1.value,c=parseInt(a[i].Marker_id),l=!1,t.t2=h.a.keys(o);case 17:if((t.t3=t.t2()).done){t.next=24;break}if(d=t.t3.value,parseInt(o[d])!==c){t.next=22;break}return l=!0,t.abrupt("break",24);case 22:t.next=17;break;case 24:l||o.push(c),t.next=12;break;case 27:t.t4=h.a.keys(o);case 28:if((t.t5=t.t4()).done){t.next=45;break}s=t.t5.value,u=parseInt(o[s]),t.t6=h.a.keys(a);case 32:if((t.t7=t.t6()).done){t.next=40;break}if(d=t.t7.value,parseInt(a[d].Marker_id)!==u){t.next=38;break}return n.marker_positions[s]={m_id:u,top:parseFloat(a[d].markerTop),left:parseFloat(a[d].markerLeft),color:a[d].color,animation_type:a[d].animation_type,marker_type:a[d].marker_type,marker_image:a[d].marker_image,background_color:a[d].background_color,border_radius:a[d].border_radius,popup_id:u},r.push({id:u,popup_content:[]}),t.abrupt("break",40);case 38:t.next=32;break;case 40:for(g in m=[],a)parseInt(a[g].Markers_id)===u&&(a[g].widget_type_id===W&&(console.log(JSON.parse(a[g].content)),b=JSON.parse(a[g].content),a[g].content=JSON.stringify(b.sort((function(e,t){return e.order_no-t.order_no})))),m.push({id:a[g].Popup_Contents_id,widget_type_id:a[g].widget_type_id,order_no:a[g].order_no,src:a[g].content,marker_id:u}));r[s].popup_content=m,t.next=28;break;case 45:for(E in r)v=r[E].popup_content,r[E].popup_content=v.sort((function(e,t){return parseInt(e.order_no)-parseInt(t.order_no)}));L(r),D(n),I(!0),Me(),t.next=57;break;case 52:t.prev=52,t.t8=t.catch(0),"Expired token"===(x=t.t8.response).data.message&&e.history.push("/login/"),404===x.status&&(p(!0),f(x.data.message));case 57:return t.abrupt("return");case 58:case"end":return t.stop()}}),t,null,[[0,52]])}))),[]),Me=function(){Y()(".item-point").draggable({inertia:!0,autoScroll:!0,modifiers:[Y.a.modifiers.restrictRect({restriction:"parent"})],onmove:Ne}).on("dragend",Se),window.$((function(){window.$('[data-toggle="tooltip"]').tooltip({delay:{show:0,hide:100},trigger:"hover"})}))},Be=function(){K.positionMarkers(t)},Re=function(e){t.current.includes(e.target)||ee(!1)};function Te(t,a,n,r){var o=new FormData;o.append("image",a),o.append("marker_id",parseInt(ue.markerId)),o.append("popup_widget_id",t),o.append("widget_type_id",n),o.append("image_url",r),"widget_id_2"===n?F.post("/popup_widget/update_image.php",o,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){L((function(a){return a.map((function(n,r){return parseInt(n.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},n),{},{popup_content:a[r].popup_content.map((function(a,n){return a.id===t?Object(U.a)(Object(U.a)({},a),{},{src:e.data}):a}))}):n}))})),w(!1),y(null)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(w(n.error),y(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(w(n.error),y(n.message[Object.keys(n.message)[0]][0]))})):F.put("/popup_widget/",{marker_id:parseInt(ue.markerId),popup_widget_id:t,content:a,widget_type_id:n},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){w(!1),y(null),console.log(e)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(w(n.error),y(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(w(n.error),y(n.message[Object.keys(n.message)[0]][0]))})),L((function(e){return e.map((function(n,r){return parseInt(n.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},n),{},{popup_content:e[r].popup_content.map((function(e,n){return e.id===t?Object(U.a)(Object(U.a)({},e),{},{src:a}):e}))}):n}))}))}Object(n.useEffect)((function(){if(_)return document.getElementById("imageMarkerWrapper").addEventListener("mousedown",Re),function(){document.getElementById("imageMarkerWrapper").removeEventListener("mousedown",Re)}}),[_]),Object(n.useEffect)((function(){return function(){var e=Object(E.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:return e.next=4,K.positionMarkers(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),window.addEventListener("resize",Be),function(){window.removeEventListener("resize",Be),Y()(".item-point").unset()}}),[Ce]),Object(n.useEffect)((function(){var e=!0;if(_){t.current=t.current.slice(0,A.marker_positions.length);var a=new Image;a.src=A.url,a.onload=function(){e&&(a.naturalWidth>a.naturalHeight?ye(!1):a.naturalWidth<a.naturalHeight?ye(!0):ye(!1))}}return function(){e=!1}}),[_,A,L]),Object(n.useEffect)((function(){setTimeout((function(){return K.positionMarkers(t)}),100),A.id&&F.put("/marker/",{image_id:parseInt(A.id),markers:A},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){w(!1),y(null)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(w(n.error),y(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(w(n.error),y(n.message[Object.keys(n.message)[0]][0]))}))}),[A,e]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("mockDatabase")),t=[];for(var a in e)e[a].id===A.id?t.push(A):t.push(e[a])}),[A]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("mockPopUpDatabase")),t=[];if(!1!==T){for(var a in e){var n=!1;for(var r in T)if(e[a].id===T[r].id){n=!0;break}n?t.push(T[r]):t.push(e[a])}for(var o in T){var i=!0;for(var c in e)e[c].id===T[o].id&&(i=!1);i&&t.push(T[o])}ne&&(t=t.filter((function(e){return parseInt(e.id)!==parseInt(ne.popupId)})),oe(!1))}}),[T,L]);var Fe=function(){var e=Object(E.a)(h.a.mark((function e(t,a,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("/popup_widget/carousel_widget.php",{params:{popup_widget_id:parseInt(t),marker_id:parseInt(parseInt(ue.markerId)),imageSlide:a}});case 3:r=e.sent,L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(U.a)(Object(U.a)({},e),{},{src:JSON.stringify(r.data)}):e}))}):a}))})),n(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n(!0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Le=function(){var e=Object(E.a)(h.a.mark((function e(t,a,n,r,o,i,c,l,d,s){var p,u,m,g,f,b,E;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(p=new FormData).append("image",o),p.append("marker_id",parseInt(ue.markerId)),p.append("popup_widget_id",t),p.append("slide_id",a),p.append("image_url",i),p.append("image_src_changed",c),p.append("slide_caption",n),p.append("slide_type",r),p.append("video_src",l),p.append("video_src_changed",d),e.next=14,F.post("/popup_widget/carousel_widget.php",p,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 14:for(E in u=e.sent,m=u.data.sort((function(e,t){return e.order_no-t.order_no})),L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(U.a)(Object(U.a)({},e),{},{src:JSON.stringify(m)}):e}))}):a}))})),g=u.data)g[E].id===a&&(f=g[E].src,b=g[E].caption);s(!1,null,f,b),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),s(!0,e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,a,n,r,o,i,c,l,d,s){return e.apply(this,arguments)}}(),ze=function(){var e=Object(E.a)(h.a.mark((function e(t,a,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.delete("/popup_widget/carousel_widget.php",{data:{popup_widget_id:parseInt(t),marker_id:parseInt(parseInt(ue.markerId)),slide_id:a}});case 3:r=e.sent,L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(U.a)(Object(U.a)({},e),{},{src:JSON.stringify(r.data)}):e}))}):a}))})),n(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n(!0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(E.a)(h.a.mark((function e(t,a,n){var r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.put("/popup_widget/carousel_widget.php",{marker_id:parseInt(ue.markerId),popup_widget_id:t,content:a,widget_type_id:n},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 2:r=e.sent,o=r.data.sort((function(e,t){return e.order_no-t.order_no})),L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(U.a)(Object(U.a)({},e),{},{src:JSON.stringify(o)}):e}))}):a}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Je=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(c.a)(r,1)[0];return n.splice(a,0,o),n},Ue=function(t,a,n,r,o){var i=Array.from(t),c=Array.from(a),l=i.find((function(e){return e.id===n}));l={id:l.id+"_"+(Date.now().toString(36)+Math.random().toString(36).substr(2)),widget_type_id:l.id,src:null,marker_id:ue.markerid},c.splice(o.index,0,l),console.log(l);var d={};return d[r.droppableId]=i,d[o.droppableId]=c,we(!0),F.post("/popup_widget/",{image_id:parseInt(A.id),marker_id:parseInt(ue.markerId),widget_type_id:l.widget_type_id,react_widget_id:l.id},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){var t=e.data.new_widget_id,a=e.data.react_widget_id;L((function(n){return n.map((function(n,r){return parseInt(n.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},n),{},{popup_content:n.popup_content.map((function(n,r){return n.id===a?{id:t,widget_type_id:e.data.widget_type_id,src:e.data.src,marker_id:ue.markerId}:n}))}):n}))})),we(!1)})).catch((function(t){t.response;"Expired token"===t.response.data.message&&e.history.push("/login/")})),d},Ve=Object(n.useState)(B),$e=Object(c.a)(Ve,2),qe=$e[0],Ke=($e[1],function(){var e=Object(E.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in T)for(a in T[t].popup_content)T[t].popup_content[t].order_no=a,console.log(T[t].popup_content[t].popup_content);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement(r.a.Fragment,null,_?r.a.createElement("div",{className:"container-fluid mt-4 ml-0",style:{width:"95%"}},r.a.createElement("div",{className:"row text-center text-white mr-auto"},r.a.createElement(re.a,{onDragEnd:function(e){var t=e.source,a=e.destination,n=e.draggableId;a&&(t.droppableId===a.droppableId&&a.index===t.index||(t.droppableId===a.droppableId?L((function(e){return e.map((function(e,n){return parseInt(e.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},e),{},{popup_content:Je(e.popup_content,t.index,a.index)}):e}))})):(console.log(ue),L((function(e){return e.map((function(e,r){return parseInt(e.id)===parseInt(ue.popupId)?Object(U.a)(Object(U.a)({},e),{},{popup_content:Ue(qe,e.popup_content,n,t,a).droppable2}):e}))})))))}},r.a.createElement("div",{className:"text-left rounded-right col-3 smoothTransition pl-0  pr-0 ",id:"widgetPanel",ref:i},r.a.createElement("div",{className:"text-left bg-info rounded-right px-0 smoothTransition h-100 ".concat(Z||le?"col-md-12":"col-md-4")},r.a.createElement(Ae,{onColorSelected:function(e){D((function(t){return Object(U.a)(Object(U.a)({},t),{},{marker_positions:t.marker_positions.map((function(t,a){return parseInt(t.m_id)===parseInt(Z.markerId)?Object(U.a)(Object(U.a)({},t),{},{color:e.hex}):t}))})}))},selectedMarker:Z,popupViewEnabled:V}),le&&r.a.createElement(Pe,{newWidgetBeingAdded:xe}))),r.a.createElement("div",{className:"mb-4 col-9 "},x&&r.a.createElement("div",{className:"col-md-12 mx-auto ",role:"alert"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},k)),r.a.createElement(We,{selectedMarker:Z,addNewMarker:function(){F.post("/marker/",{image_id:parseInt(A.id)},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){var t,a=e.data.new_marker[0],n=e.data.new_popup;n.id=parseInt(e.data.new_popup.id),t={m_id:parseInt(a.id),top:parseFloat(a.markerTop),left:parseFloat(a.markerLeft),color:a.color,animation_type:a.animation_type,marker_type:a.marker_type,marker_image:a.marker_image,background_color:a.background_color,border_radius:a.border_radius,popup_id:parseInt(a.id)},D((function(e){return Object(U.a)(Object(U.a)({},e),{},{marker_positions:[].concat(Object(J.a)(e.marker_positions),[t])})}));var r=[];for(var o in n.popup_content)r.push({id:n.popup_content[o].id,widget_type_id:n.popup_content[o].widget_type_id,src:n.popup_content[o].content,marker_id:a.id});n.popup_content=r,n.id=parseInt(a.id),L((function(e){return[].concat(Object(J.a)(e),[n])}))})).catch((function(t){t.response;"Expired token"===t.response.data.message&&e.history.push("/login/")}))},editRef:a,deleteRef:o,deleteMarker:function(t){F.delete("/marker/",{data:{marker_id:parseInt(Z.markerId),popup_id:parseInt(Z.popupId)},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){A.marker_positions.length>1&&(oe({popupId:parseInt(Z.popupId)}),D((function(e){return Object(U.a)(Object(U.a)({},e),{},{marker_positions:e.marker_positions.filter((function(e){return e.m_id!==parseInt(Z.markerId)}))})})),L((function(e){return e.filter((function(e){return e.id!==parseInt(Z.popupId)}))})),ee(!1))})).catch((function(t){var a=t.response.data,n=t.response;"Expired token"===a.message&&e.history.push("/login/"),401===n.status&&(w(a.error),y(a.message)),400===n.status&&a.validationError&&"marker_id"===Object.keys(a.message)[0]&&(w(a.error),y(a.message[Object.keys(a.message)[0]][0]))}))},popupViewEnabled:V,enablePopupView:function(e){q(!0),Y()(".item-point").unset(),ee(!1)},enableDraggableMode:function(e){Me(),q(!1),de(!1)},popupEditMode:le,saveData:Ke}),r.a.createElement("div",{className:"imageMarker shadow-lg",id:"imageMarkerWrapper",style:ke?{maxWidth:"850px",margin:"auto"}:{maxWidth:"1080px",margin:"auto"}},be&&r.a.createElement(De,null),_?null:r.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},r.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("img",{className:"target rounded shadow ".concat(_?"":"d-none"),alt:"empty",src:A.url,onLoad:function(){return I(!0)}}),r.a.createElement("div",{className:"points_wrap"},r.a.createElement("div",{className:"image-overlay-onpopup rounded",style:ue?{opacity:1}:void 0}),A.marker_positions.map((function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(X,{ref:function(e){return t.current[a]=e},key:a,markers:e,popupViewEnabled:V,setSelectedMarker:ee,selectedMarker:Z,popupModeMarkerSelected:ue,setPopupModeMarkerSelected:me,setShowToast:he}))}))),r.a.createElement(r.a.Fragment,null,T.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e.id===parseInt(ue.popupId)?r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{key:t,data:e,popupContentChanged:Te,setPopupEditMode:de,setPopups:L,setPopupModeMarkerSelected:me,positions:{top:A.marker_positions[t].top,left:A.marker_positions[t].left},newWidgetBeingAdded:xe,addASlideInCarousel:Fe,deleteASlideInCarousel:ze,updateASlideInCarousel:Le,updateCarouselSlidesOrder:He})):void 0)})))))))):r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},r.a.createElement("div",{className:"spinner-grow text-primary p-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))),s&&r.a.createElement("div",{className:"col-md-6 mx-auto mt-5 pt-3",role:"alert"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},g)))};var Fe=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(""),d=Object(c.a)(l,2),p=d[0],u=d[1],m=Object(n.useState)(null),g=Object(c.a)(m,2),f=g[0],b=g[1],h=Object(n.useState)(""),E=Object(c.a)(h,2),v=E[0],x=E[1],w=Object(s.g)();return r.a.createElement("div",{style:{maxWidth:"450px"},className:"m-auto pt-5"},f&&r.a.createElement("div",{className:"alert alert-danger mt-4",role:"alert"},v),r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"}," Log in"),r.a.createElement("form",{className:"needs-validation  form-signin mt-3 form-row }"},r.a.createElement("div",{className:"col-12   px-0"},r.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),r.a.createElement("input",{type:"email",id:"inputEmail",className:"form-control rounded-top  ",placeholder:"Email address",required:!0,autoFocus:"",style:{borderRadius:0,borderBottom:0},value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("input",{type:"password",id:"inputPassword",className:"form-control rounded-bottom",placeholder:"Password",required:"",style:{borderRadius:0},value:p,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",{className:"btn btn-lg btn-info btn-block my-3",type:"submit",disabled:!(o.length>3&&p.length>3),onClick:function(t){return function(t){b(!1),x(!1),t.preventDefault(),e.setUserLoggedIn(!0),F.post("/login/",{email:o,password:p}).then((function(e){var t=e.data;localStorage.setItem("token",t.jwt),w.push("/dashboard")})).catch((function(e){var t=e.response.data;t.validationError&&(console.log(Object.keys(t.message)[0],t.message[Object.keys(t.message)[0]][0]),"email"===Object.keys(t.message)[0]&&(b(t.error),x(t.message[Object.keys(t.message)[0]][0])),"password"===Object.keys(t.message)[0]&&(b(t.error),x(t.message[Object.keys(t.message)[0]][0]))),t.validationError||(b(t.error),x("".concat(t.message)))}))}(t)}},"Sign in")))};var Le=function(){return r.a.createElement("div",{className:"text-dark container text-center"},r.a.createElement("h1",null,"Dashboard"))},ze=a(205),He=function(e){return new Promise((function(e,t){F.post("/token/","",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((function(t){t.data.okay&&e(t.data.okay)})).catch((function(e){t(!1)}))}))},Je=function(e){var t=e.component,a=e.setUserLoggedIn,o=Object(ze.a)(e,["component","setUserLoggedIn"]),i=Object(n.useState)(!1),l=Object(c.a)(i,2),d=l[0],p=l[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],f=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e?He().then((function(e){p(!0),a(!0)})).catch((function(e){p(!1),a(!1)})).then((function(e){f(!0)})):(f(!0),null===e&&a(!1))}),[]),g?r.a.createElement(s.b,Object.assign({},o,{render:function(e){return d?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}})):r.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},r.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},Ue=a(198),Ve=a(199),$e=a(47),qe=a(206),Ke=a(204),Qe=a(200),Ye=a.n(Qe),Xe=a(203),Ge=function(e){Object(qe.a)(a,e);var t=Object(Ke.a)(a);function a(e){var n;return Object(Ue.a)(this,a),(n=t.call(this,e)).getAllBauerStation=function(){var e=Object(E.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){F.get("/stations/",{params:{},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){t.statusText&&e(t.data)})).catch((function(e){console.log(e),t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onStationSelected=function(e){n.setState({selectedBauerStation:e})},n.state={selectedImage:[],bauerStations:[],selectedBauerStation:"",imageName:"",loading:!1,error:!1},n.onDrop=n.onDrop.bind(Object($e.a)(n)),n.onStationSelected=n.onStationSelected.bind(Object($e.a)(n)),n.onImageNameChange=n.onImageNameChange.bind(Object($e.a)(n)),n.createImage=n.createImage.bind(Object($e.a)(n)),n}return Object(Ve.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getAllBauerStation().then((function(t){e.setState({bauerStations:t})})).catch((function(e){console.log(e)}))}},{key:"onImageNameChange",value:function(e){this.setState({imageName:e.target.value})}},{key:"onDrop",value:function(e,t){this.setState({selectedImage:e})}},{key:"createImage",value:function(){var e=this;(function(){var t=Object(E.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({loading:!0}),e.setState({error:!1}),(n=new FormData).append("Stations_id",e.state.selectedBauerStation.id),n.append("Users_id",1),n.append("name",e.state.imageName),n.append("image",e.state.selectedImage[0]),t.next=10,F.post("/image/",n,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 10:201===(r=t.sent).status&&(e.setState({loading:!1}),e.props.history.push("/image/".concat(r.data.image_id))),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),e.setState({loading:!1}),e.setState({error:!0});case 18:return t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}})()()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto mt-2"},r.a.createElement(Ye.a,{withIcon:!0,buttonText:"Choose image",onChange:this.onDrop,imgExtension:[".jpeg",".jpg",".gif",".png",".gif",".webp"],maxFileSize:5242880,singleImage:!0,withPreview:!0,buttonClassName:"btn-lg"}))),r.a.createElement("div",{className:"row rounded pt-3"},r.a.createElement("div",{className:"col-md-8 shadow-sm rounded mx-auto pb-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"py-1"},"Select Station"),r.a.createElement(Xe.a,{defaultValue:this.state.selectedBauerStation,onChange:this.onStationSelected,options:this.state.bauerStations})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"py-1"},"Name"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Name",value:this.state.imageName,onChange:this.onImageNameChange}))))),this.state.error&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"my-2 w-50 mx-auto alert alert-danger",role:"alert"},"Error, unable to create image. Try again!")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto py-3 text-right"},r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:this.createImage,disabled:!(""!==this.state.imageName&&""!==this.state.selectedBauerStation&&this.state.selectedImage.length>0&&!1===this.state.loading)},"Create Image"),this.state.loading&&r.a.createElement("div",{className:"col-md-4 mx-auto py-5 text-right"},r.a.createElement("div",{className:"spinner-border text-info",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),a}(r.a.Component),Ze=a(201),et=a.n(Ze);function tt(){return r.a.createElement("div",{className:"text-center mx-auto col-10"},r.a.createElement("img",{alt:"not found",src:et.a,className:"text-center img-fluid"}))}var at=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){localStorage.getItem("token")&&He().then((function(e){o(!0)})).catch((function(e){console.log(e),o(!1)}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(d,{userLoggedIn:a,logout:function(){o(!1),localStorage.removeItem("token")}}),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:f}),r.a.createElement(Je,{path:"/images",exact:!0,component:H,setUserLoggedIn:o}),r.a.createElement(Je,{path:"/image/:id",exact:!0,component:Te,setUserLoggedIn:o}),r.a.createElement(s.b,{path:"/login",render:function(e){return r.a.createElement(Fe,{setUserLoggedIn:o})}}),r.a.createElement(Je,{path:"/dashboard",component:Le,setUserLoggedIn:o}),r.a.createElement(Je,{path:"/create",component:Ge,setUserLoggedIn:o}),r.a.createElement(s.b,{path:"/*",component:tt}))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(at,null)),document.getElementById("root"))},51:function(e,t,a){}},[[207,1,2]]]);