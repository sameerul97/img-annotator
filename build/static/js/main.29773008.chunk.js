(this["webpackJsonpimage-annotator"]=this["webpackJsonpimage-annotator"]||[]).push([[0],{210:function(e,t,a){e.exports=a.p+"static/media/page_not_found.8781fc85.svg"},216:function(e,t,a){e.exports=a(473)},473:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(27),c=a.n(o),l=a(1),d=a(25),s=a(14),u=a(11),p=a.n(u),m=a(17);!function(e){e.FETCH_ALL_IMAGES="FETCH_ALL",e.FETCH_START_LOADING="START_LOADING",e.FETCH_END_LOADING="END_LOADING"}(n||(n={}));var g=a(64),f=a.n(g);var b=function(){var e=window.location.href.split("/")[2];return"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e?"https://creative.bauermedia.co.uk/scrollmagic/img-annotator-v5/api":"demomatthobbsnet.eu-west-2.elasticbeanstalk.com"===e?"http://demomatthobbsnet.eu-west-2.elasticbeanstalk.com/img-annotator-master/server/api":"http://localhost/api"}(),E=function(){var e=window.location.href.split("/")[2];return"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e?"https://creative.bauermedia.co.uk/scrollmagic/img-annotator-v5/#":"demomatthobbsnet.eu-west-2.elasticbeanstalk.com"===e?"http://demomatthobbsnet.eu-west-2.elasticbeanstalk.com/img-annotator-master/#":"http://".concat(e,"/#")}(),h=function(){var e=window.location.href.split("/")[2];return"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e?"https://creative.bauermedia.co.uk/scrollmagic/img-annotator-v5/api":"http://localhost/api"}(),v=f.a.create({baseURL:b});v.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.Authorization="".concat(localStorage.getItem("token"))),e}));var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return v.get("/images/index.php?page_no=".concat(e,"&image_name=").concat(t))},x=function(e,t){return function(){var a=Object(m.a)(p.a.mark((function a(r){var i,o;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:n.FETCH_START_LOADING}),a.next=4,w(e,t);case 4:i=a.sent,o=i.data,r({type:n.FETCH_ALL_IMAGES,payload:{images:o.images,total_pages:o.total_pages}}),r({type:n.FETCH_END_LOADING}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},O=function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"RESET_IMAGES_STATE"})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var j=function(e){var t=e.name,a=e.to,n=e.onclickcallback,r=void 0!==n&&n;return i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.c,{exact:!0,to:a,className:"nav-link",activeClassName:"nav-link active",onClick:r||null},t))},y=function(e){var t=Object(d.c)();return i.a.createElement(s.a,null,i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-info"},i.a.createElement(s.c,{to:"/",className:"navbar-brand"},i.a.createElement("span",{role:"img","aria-label":"img"},"\ud83d\ude80"),"Img-annotator"),i.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},i.a.createElement("ul",{className:"navbar-nav mr-auto"},i.a.createElement(j,{name:"Home",to:"/"}),e.userLoggedIn?i.a.createElement(i.a.Fragment,null,i.a.createElement(j,{name:"View All",onclickcallback:function(){t(O())},to:"/image"}),i.a.createElement(j,{name:"Create",to:"/create"}),i.a.createElement(j,{name:"Dashboard",to:"/dashboard"}),i.a.createElement(j,{name:"Editor",to:"/editor"})):null,e.isDemo?i.a.createElement(i.a.Fragment,null,i.a.createElement(j,{name:"View All",to:"/images"})):null),i.a.createElement("ul",{className:"navbar-nav ml-auto"},e.userLoggedIn||e.isDemo?null:i.a.createElement(j,{name:"Login",to:"/login"}),e.userLoggedIn&&i.a.createElement(j,{name:"Logout",to:"/login",onclickcallback:function(){e.logout()}})))))},N=a(20);var k=function(){return i.a.createElement("div",null,i.a.createElement("div",{style:{position:"absolute",bottom:0,right:0}},i.a.createElement("i",{className:"text-primary fas fa-plus-circle fa-3x m-2"})))},S=a(200),_={labels:["Kiss","Absolute","Magic","Hits"],datasets:[{data:[300,100,100,200],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#0e25ff"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#0e25ff"]}]};var C=function(){return i.a.createElement("div",null,i.a.createElement(S.Pie,{onElementsClick:function(e){console.log("Doughnut clicked",e)},data:_,width:100,height:500,options:{maintainAspectRatio:!1,tooltips:{callbacks:{title:function(e,t){return t.labels[e[0].index]},label:function(e,t){return t.datasets[0].data[e.index]}},backgroundColor:"#FFF",titleFontSize:16,titleFontColor:"#0066ff",bodyFontColor:"#000",bodyFontSize:14,displayColors:!1}}}))};var I=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"text-center mt-2"},i.a.createElement("p",{className:"mb-0"},"Click labels below to interact")),i.a.createElement(C,null),i.a.createElement(k,null))},M=localStorage.getItem("token"),W=f.a.create({baseURL:b});W.interceptors.request.use((function(e){return M&&(e.headers.Authorization=localStorage.getItem("token")),e}));var B=W;var A=a(22),T=a(5),D=a(9),P=a.n(D),L=(a(49),{getImageMetric:function(e,t){var a=new Image;a.src=P()(".imageMarker").find(".target").attr("src"),a.onload=function(){var e=a.naturalWidth,n=a.naturalHeight,r=P()(".imageMarker img").width(),i=r/e*100,o={width:e,height:n,getWidthLess:P()(".imageMarker img").width(),setPersenWidth:r/e*100,setHeight:n*i/100};t(o)}},positionMarkers:function(e){console.log(e),L.getImageMetric(P()(".imageMarker"),(function(t){for(var a=0;a<e.current.length;a++)try{if(null!==e.current[a]){var n=parseFloat(e.current[a].attributes["data-top"].value)*t.setPersenWidth/100,r=parseFloat(e.current[a].attributes["data-left"].value)*t.setPersenWidth/100;e.current[a].setAttribute("data-x",0),e.current[a].setAttribute("data-y",0),P()(".imageMarker .circle").css("transform","translate(0px , 0px)"),P()(e.current[a]).css({top:n,left:r})}}catch(i){console.log(i)}}))},positionPopup:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L.getImageMetric(P()(".imageMarker"),(function(e){var n=parseInt(t.top)*e.setPersenWidth/100,r=parseInt(t.left)*e.setPersenWidth/100;a({top:parseInt(n),left:parseInt(r)})}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),adjustPopupBoxContainer:function(e,t,a){L.getImageMetric(P()(".imageMarker"),(function(n){var r=parseFloat(t.top)*n.setPersenWidth/100,i=parseFloat(t.left)*n.setPersenWidth/100,o=P()("#popup"+e),c=P()(o).find(".pointBoxArrow");P()(c).find(".pointBoxArrowRight").hide(),P()(c).find(".pointBoxArrowLeft").hide(),P()(c).css({right:""}),P()(c).css({left:""}),P()(o).css({top:"",right:"",left:""}),window.innerWidth>768&&(i>=n.getWidthLess/100*58?(P()(o).css({top:r/2,right:P()(".imageMarker").width()-i+25}),P()(c).find(".pointBoxArrowRight").show(),P()(c).css({right:-20})):(P()(o).css({top:r/2,left:i}),P()(c).find(".pointBoxArrowLeft").show(),P()(c).css({left:-17}))),P()(c).css({top:parseFloat(t.top)*n.setPersenWidth/100/2+25}),a()}))},registerOnClick:function(e){P()(e).each((function(e,t){P()(t,this).on("click",(function(e){e.preventDefault();var t=P()(this).closest(".item-point").data("popupid"),a=P()(t);a.addClass("d-block"),a.addClass("showflip");var n=P()(this).closest(".item-point").data("popupid"),r=P()(n);r.find(".exit").on("click",(function(e){e.preventDefault(),P()('[data-popupid="'+n+'"]').removeClass("active"),r.removeClass(""),r.addClass(""),a.removeClass("d-block"),a.removeClass("showflip"),P()(r).fadeOut()}))}))}))},imageMarker:function(){P()(P()(".imageMarker")).each((function(e,t){var a=P()(t).find(".item-point");L.positionMarkerAndPopup(a,t,(function(){P()(t).find(".toggle")}))}))}}),F=L,R=a(68),z=a.n(R),H=function(e){return i.a.createElement("div",{className:"col-10s d-flex align-items-center  mx-auto",style:e.style},e.children)},U=function(){return i.a.createElement(H,{style:{background:"#44444485",borderRadius:"4px",padding:"16px"}},i.a.createElement("div",null,"Add Header"))},V=function(){return i.a.createElement(H,{style:{background:"#44444463",borderRadius:"4px",padding:"12px"}},i.a.createElement("div",null,"Add Text (Copy)"))},J=function(){return i.a.createElement(H,{style:{background:"#ffffff57",borderRadius:"4px",padding:"40px 16px",backgroundSize:"cover",backgroundPositionY:"-30px",backgroundImage:"url('https://images.unsplash.com/photo-1439792675105-701e6a4ab6f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1352&q=80')"}},i.a.createElement("div",null,"Add image"))},$=function(){return i.a.createElement(H,{style:{background:"#ffffff57",borderRadius:"4px",padding:"40px 16px",backgroundSize:"cover",backgroundImage:"url('https://media3.giphy.com/media/1kkxWqT5nvLXupUTwK/giphy.gif?cid=ecf05e47xuqieva7e9fn36dk27ucx7ccdgdo3l4g94si72xr&rid=giphy.gif')"}},i.a.createElement("div",null,"Add Video"))},G=function(){return i.a.createElement(H,{style:{background:"#ffffff57",borderRadius:"4px",padding:"16px"}},i.a.createElement("div",null,"Add Button"))},q=function(){return i.a.createElement(H,{style:{background:"#ffffff57",borderRadius:"4px",padding:"16px"}},i.a.createElement("div",null,"CarouselWidget"))},K="widget_id_1",Y="widget_id_2",X="widget_id_3",Q="widget_id_4",Z="widget_id_5",ee="widget_id_6",te="widget_id_7",ae=[{id:K,widget:i.a.createElement(U,null)},{id:Z,widget:i.a.createElement(V,null)},{id:Y,widget:i.a.createElement(J,null)},{id:X,widget:i.a.createElement($,null)},{id:Q,widget:i.a.createElement(G,null)},{id:te,widget:i.a.createElement(q,null)}];function ne(e){var t={},a=[];t.url=e[0].url,t.name=e[0].name,t.id=e[0].Image_Id,t.marker_positions=[],t.header=e[0].page_header,t.copy=e[0].page_header,t.script=e[0].page_script;var n=[];for(var r in e){var i=parseInt(e[r].Marker_id),o=!1;for(var c in n)if(parseInt(n[c])===i){o=!0;break}o||n.push(i)}for(var l in n){var d=parseInt(n[l]);for(var s in e)if(parseInt(e[s].Marker_id)===d){t.marker_positions[l]={m_id:d,top:parseFloat(e[s].markerTop),left:parseFloat(e[s].markerLeft),color:e[s].color,animation_type:e[s].animation_type,marker_type:e[s].marker_type,marker_image:e[s].marker_image,background_color:e[s].background_color,border_radius:e[s].border_radius,popup_id:d},a.push({id:d,popup_content:[]});break}var u=[];for(var p in e)if(parseInt(e[p].Markers_id)===d){if(e[p].widget_type_id===te){var m=JSON.parse(e[p].content);e[p].content=JSON.stringify(m.sort((function(e,t){return e.order_no-t.order_no})))}u.push({id:e[p].Popup_Contents_id,widget_type_id:e[p].widget_type_id,order_no:e[p].order_no,src:e[p].content,marker_id:d})}a[l].popup_content=u}for(var g in a){var f=a[g].popup_content;a[g].popup_content=f.sort((function(e,t){return parseInt(e.order_no)-parseInt(t.order_no)}))}return[t,a]}var re=i.a.forwardRef((function(e,t){var a=Object(r.useState)(!1),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)(!1),s=Object(l.a)(d,2),u=s[0],p=s[1];Object(r.useEffect)((function(){e.selectedMarker||c(!1),u!==parseInt(e.selectedMarker.markerId)&&c(!1),p(e.markers.m_id)}),[u,c,e.markers.m_id,e.selectedMarker.markerId,e.selectedMarker]);var m={background:e.markers.color};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:t,"data-key":e.markers.m_id,key:e.markers.m_id,id:e.markers.m_id,className:"item-point circle ".concat(e.popupViewEnabled?"pulse2":""," ").concat(!e.popupViewEnabled&&o?"showBorder":""),style:m,"data-top":e.markers.top,"data-left":e.markers.left,"data-popupid":"#popup"+e.markers.popup_id,onClick:e.popupViewEnabled?function(t){e.popupModeMarkerSelected&&e.popupModeMarkerSelected.popupId!==e.markers.popup_id?(e.setShowToast(!0),setTimeout((function(){return e.setShowToast(!1)}),4500)):e.setPopupModeMarkerSelected({markerId:u,popupId:e.markers.popup_id})}:function(t){e.setSelectedMarker({markerId:u,popupId:e.markers.popup_id}),c(!0)}},e.popupViewEnabled&&i.a.createElement("div",null,i.a.createElement("a",{href:"#!",onClick:function(e){e.preventDefault()},className:"toggle"}," "))))}));function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function oe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ce=i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),le=i.a.createElement("path",{d:"M14 6h2v2h5a1 1 0 0 1 1 1v7.5L16 13l.036 8.062 2.223-2.15L20.041 22H9a1 1 0 0 1-1-1v-5H6v-2h2V9a1 1 0 0 1 1-1h5V6zm8 11.338V21a1 1 0 0 1-.048.307l-1.96-3.394L22 17.338zM4 14v2H2v-2h2zm0-4v2H2v-2h2zm0-4v2H2V6h2zm0-4v2H2V2h2zm4 0v2H6V2h2zm4 0v2h-2V2h2zm4 0v2h-2V2h2z",fill:"rgba(255,255,255,1)"}),de=function(e){var t=e.svgRef,a=e.title,n=oe(e,["svgRef","title"]);return i.a.createElement("svg",ie({viewBox:"0 0 24 24",width:20,height:20,ref:t},n),a?i.a.createElement("title",null,a):null,ce,le)},se=i.a.forwardRef((function(e,t){return i.a.createElement(de,ie({svgRef:t},e))})),ue=(a.p,a(37)),pe=a(24);var me=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},ge=function(e){var t="https://images.unsplash.com/photo-1509983165097-0c31a863e3f3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",a=Object(r.useState)(!0),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)(!1),s=Object(l.a)(d,2),u=s[0],p=s[1],m=Object(r.useState)(!1),g=Object(l.a)(m,2),f=g[0],b=g[1],E=Object(r.useState)(""),h=Object(l.a)(E,2),v=h[0],w=h[1],x=Object(r.useState)(!1),O=Object(l.a)(x,2),j=O[0],y=O[1],N=Object(r.useState)(!1),k=Object(l.a)(N,2),S=k[0],_=k[1],C=Object(r.useState)(!1),I=Object(l.a)(C,2),M=I[0],W=I[1],B=Object(r.useState)(""),T=Object(l.a)(B,2),D=(T[0],T[1]),P=Object(r.useState)(!1),L=Object(l.a)(P,2),F=L[0],R=L[1],z=function(e,t){if(e.target.files&&e.target.files[0]){var a=e.target.files[0];y(e.target.files[0]),R(!1),_(URL.createObjectURL(a))}t&&(y(e.target.value),_(e.target.value),R(!0))};return Object(r.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(r.useLayoutEffect)((function(){return null!==e.data.src?(y(e.data.src),_(e.data.src),D(e.data.id),w(e.data.src)):(y(t),w(t)),function(){}}),[e.data.src,e.data.id,t,D]),Object(r.useLayoutEffect)((function(){var e=!0,t=new Image;return t.src=j,t.onload=function(){e&&(t.naturalWidth>t.naturalHeight?W(!1):t.naturalWidth<t.naturalHeight?W(!0):W(!1))},function(){e=!1}}),[j,y,e]),i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(o?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(f?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(p(!0),b(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(p(!1),b(!1))}},o&&u?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),c(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!o&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),c(!0),y(v),_(v),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,j,e.data.widget_type_id,F),c(!0),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!o&&i.a.createElement("div",null,i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-link"}))),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"image Url","aria-label":"image Url","aria-describedby":"addon-wrapping",value:j,onChange:function(e){return z(e,!0)}})),i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-upload"}))),i.a.createElement("label",{className:"btn btn-default btn-sm"},i.a.createElement("input",{type:"file",className:"form-control. w-100",placeholder:"upload image","aria-label":"upload image","aria-describedby":"addon-wrapping",onChange:function(e){return z(e)}})))),i.a.createElement(me,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),j&&i.a.createElement("img",{src:S,alt:"empty",className:"img-fluid",style:M?{maxWidth:"220px"}:{}}))};var fe=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},be=function(e){var t="https://www.youtube.com/embed/lvfB_p0IiHM",a=Object(r.useState)(!0),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)(!1),s=Object(l.a)(d,2),u=s[0],p=s[1],m=Object(r.useState)(!1),g=Object(l.a)(m,2),f=g[0],b=g[1],E=Object(r.useState)(""),h=Object(l.a)(E,2),v=h[0],w=h[1],x=Object(r.useState)(!1),O=Object(l.a)(x,2),j=O[0],y=O[1];return Object(r.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(r.useLayoutEffect)((function(){return null!==e.data.src?(y(e.data.src),w(e.data.src)):(y(t),w(t)),function(){}}),[e.data.src,e.data.id,t]),i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(o?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(f?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(p(!0),b(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(p(!1),b(!1))}},o&&u?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),c(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!o&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:1}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),c(!0),y(v),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,j),c(!0),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!o&&i.a.createElement("div",null,i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-link"}))),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"video Url","aria-label":"video Url","aria-describedby":"addon-wrapping",value:j,onChange:function(e){return function(e){var t=e.target.value,a=t.split("/")[2];y("vimeo.com"===a?"https://player.vimeo.com/video/"+t.split("/")[3]:"www.youtube.com"===a?"https://www.youtube.com/embed/"+t.split("?v=")[1]:e.target.value)}(e)}}))),i.a.createElement(fe,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),y&&i.a.createElement("div",{className:"video_wrapper_on_drag",style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},i.a.createElement("div",{className:"embed-container"},i.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:j.toString(),style:e.popupEditModeSelected?{zIndex:-1}:{},allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"}))))},Ee=a(32),he=a(6);var ve=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},we=function(e){var t=Object(r.useState)({value:he.EditorState.createEmpty()}),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!0),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(!1),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(""),x=Object(l.a)(w,2),O=x[0],j=x[1];return Object(r.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Lorem empsum",type:"header-three",depth:0,inlineStyleRanges:[{offset:0,length:12,style:"color-rgb(52,58,64)"},{offset:0,length:12,style:""},{offset:0,length:12,style:"fontsize-1.5rem"},{offset:0,length:12,style:'fontfamily--apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'}],entityRanges:[],data:{"text-align":"left"}}],entityMap:{}};return null!==e.data.src?(o({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(e.data.src)))}),j(he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(e.data.src))))):(o({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(t))}),j(he.EditorState.createWithContent(Object(he.convertFromRaw)(t)))),function(){}}),[e]),i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),u(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),u(!0),o({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(he.convertToRaw)(n.value.getCurrentContent())),e.data.widget_type_id),u(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),i.a.createElement(Ee.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:n.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper headerWrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){o({value:e}),localStorage.setItem("editorState_Header",JSON.stringify(Object(he.convertToRaw)(e.getCurrentContent())))},toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,className:"bg-info rounded-0",component:void 0,dropdownClassName:"undefined",options:["bold","italic","underline"]},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right"]}}}),!s&&i.a.createElement("div",{className:"py-2"}),i.a.createElement(ve,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var xe=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},Oe=function(e){var t=Object(r.useState)({value:he.EditorState.createEmpty()}),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!0),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(!1),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(""),x=Object(l.a)(w,2),O=x[0],j=x[1];return Object(r.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque, assumenda illo, vitae maiores itaque aliquid ad voluptates sit hic beatae, non tempora rerum ipsa? Maxime?",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"left"}}],entityMap:{}};return null!==e.data.src?(o({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(e.data.src)))}),j(he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(e.data.src))))):(o({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(t))}),j(he.EditorState.createWithContent(Object(he.convertFromRaw)(t)))),function(){}}),[e]),i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),u(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),u(!0),o({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){console.log(e.data.id),t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(he.convertToRaw)(n.value.getCurrentContent())),e.data.widget_type_id),u(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),i.a.createElement(Ee.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:n.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor-custom",toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,className:"bg-info rounded-0",component:void 0,dropdownClassName:"undefined",options:["bold","italic","underline"]},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right"]}},onEditorStateChange:function(e){o({value:e}),localStorage.setItem("editorState_Paragraph",JSON.stringify(Object(he.convertToRaw)(e.getCurrentContent())))}}),!s&&i.a.createElement("div",{className:"py-2"}),i.a.createElement(xe,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var je=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},ye=function(e){var t=Object(r.useState)(!0),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)("https:google.com"),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(""),x=Object(l.a)(w,2),O=x[0],j=x[1],y=Object(r.useState)({value:he.EditorState.createEmpty()}),N=Object(l.a)(y,2),k=N[0],S=N[1],_=Object(r.useState)(""),C=Object(l.a)(_,2),I=C[0],M=C[1];return Object(r.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Some test button",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"center"}}],entityMap:{}};if(null!==e.data.src){var a=JSON.parse(e.data.src);v(a.buttonUrlSrc),j(a.buttonUrlSrc),S({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(a.buttonTextSrc))}),M(he.EditorState.createWithContent(Object(he.convertFromRaw)(a.buttonTextSrc)))}else j("https://google.com"),S({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(t))}),M(he.EditorState.createWithContent(Object(he.convertFromRaw)(t)));return function(){}}),[e]),i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(n?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(g?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(u(!0),f(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(u(!1),f(!1))}},n&&s?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),o(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!n&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),o(!0),S({value:I}),v(O),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify({buttonTextSrc:Object(he.convertToRaw)(k.value.getCurrentContent()),buttonUrlSrc:h}),e.data.widget_type_id),o(!0),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!n&&i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-link"}))),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Button Url","aria-label":"Button Url","aria-describedby":"addon-wrapping",value:h,onChange:function(e){return function(e){v(e.target.value)}(e)}})),i.a.createElement("div",{className:"video_wrapper_on_drag",style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},i.a.createElement("a",Object.assign({},n?{href:h,target:"_blank"}:{},{className:"btn buttonWidgetWrapper w-100 rounded-0\n          ".concat(n?" btn-info":" text-dark bg-white"),style:e.popupEditModeSelected?{position:"relative",zIndex:-1}:{}}),i.a.createElement(Ee.Editor,{readOnly:n,toolbarHidden:n,handlePastedText:function(){return!1},editorState:k.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor   ".concat(n?" ":"changeCursor ","  "),onEditorStateChange:function(e){S({value:e})},toolbar:{options:[]}}))),i.a.createElement(je,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var Ne=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},ke=function(e){var t=Object(r.useState)({value:he.EditorState.createEmpty()}),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!0),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(!1),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(""),x=Object(l.a)(w,2),O=x[0],j=x[1];return Object(r.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Free mode",type:"header-three",depth:0,inlineStyleRanges:[{offset:0,length:10,style:""},{offset:0,length:10,style:"fontsize-.75rem"},{offset:0,length:10,style:"fontsize-24"},{offset:0,length:10,style:"fontfamily-Arial"},{offset:0,length:10,style:"color-rgb(97,189,109)"},{offset:0,length:10,style:"bgcolor-rgb(247,218,100)"}],entityRanges:[{offset:0,length:10,key:0}],data:{"text-align":"left"}}],entityMap:{0:{type:"LINK",mutability:"MUTABLE",data:{url:"http://google.com",targetOption:"_blank"}}}};return null!==e.data.src?(o({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(e.data.src)))}),j(he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(e.data.src))))):(o({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(t))}),j(he.EditorState.createWithContent(Object(he.convertFromRaw)(t)))),function(){}}),[e]),i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),u(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),u(!0),o({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(he.convertToRaw)(n.value.getCurrentContent()))),u(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),i.a.createElement(Ee.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:n.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){o({value:e})},toolbar:{options:["inline","blockType","fontSize","fontFamily","textAlign","colorPicker","link","emoji","history"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline","strikethrough"]}}}),!s&&i.a.createElement("div",{className:"py-2"}),i.a.createElement(Ne,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var Se=function(e){var t=Object(r.useState)(!0),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(!1),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(),x=Object(l.a)(w,2),O=x[0],j=x[1],y=Object(r.useState)([]),N=Object(l.a)(y,2),k=N[0],S=N[1],_=Object(r.useState)(!1),C=Object(l.a)(_,2),I=C[0],M=C[1],W=Object(r.useState)(!1),B=Object(l.a)(W,2),T=B[0],D=B[1],P=Object(r.useState)(!1),L=Object(l.a)(P,2),F=L[0],R=L[1],z=Object(r.useState)(!1),H=Object(l.a)(z,2),U=H[0],V=H[1],J=Object(r.useState)([{}]),$=Object(l.a)(J,2),G=$[0],q=$[1];Object(r.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(r.useLayoutEffect)((function(){return v(JSON.parse(e.data.src)),q(JSON.parse(e.data.src)),function(){}}),[e.data.src,e.data.id]),Object(r.useEffect)((function(){S((function(e){return Array(O).fill().map((function(t,a){return e[a]||Object(r.createRef)()}))}))}),[O]),Object(r.useEffect)((function(){h&&j(h.length)}),[h,k]),Object(r.useEffect)((function(){if(I&&(k[k.length-1].current.scrollIntoView({behavior:"smooth",block:"end",inline:"center"}),setTimeout((function(){M(!1)}),250)),F){var e;for(var t in k)k[t]===U.reactRef&&(e=k[t]);setTimeout((function(){e.current.scrollIntoView({behavior:"smooth",inline:"center"})}),250)}}),[I,k,F,U.reactRef]);var K=function(t,a,n,r,i,o,c,l,d){D(!0),e.updateASlideInCarousel(e.data.id,t,a,n,r,i,o,c,l,(function(e,t,a,n){e||(D(!1),d(a,n))}))},Y=function(t,a){if(D(!0),h.length<=2)return D(!1),void a(!1);e.deleteASlideInCarousel(e.data.id,t,(function(e){e||D(!1)}))};return i.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative pt-0 ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(n?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(g?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(u(!0),f(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(u(!1),f(!1))},style:n?{}:{paddingBottom:"40px"}},n&&s?i.a.createElement(pe.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},i.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),o(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(A.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!n&&i.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0}},i.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},i.a.createElement("button",{className:" border-0 rounded popupWidget_ExitButton btn-sm btn badge badge-secondary text-white","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",disabled:F,onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),o(!0),u(!1),v(G),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},"aria-disabled":"true"},i.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),i.a.createElement("div",{className:"col pl-0  no-gutters"},i.a.createElement("button",{className:"text-white  border-0 rounded popupWidget_ExitButton btn-sm btn badge badge-success text-white","data-toggle":"tooltip","data-placement":"right",title:"Save changes",disabled:F,onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove();var a=[],n=h;for(var r in n)h[r].order_no=r,a.push(h[r]);o(!0),u(!1),e.updateCarouselSlidesOrder(e.data.id,JSON.stringify(a),e.data.widget_type_id),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))}},i.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),i.a.createElement(Ie,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),h&&i.a.createElement(i.a.Fragment,null,T&&i.a.createElement("div",{className:"position-absolute h-100 w-100 smoothTransition",style:{background:"#ffffffad",zIndex:"9"}}),T&&i.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},i.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))),i.a.createElement(Me,{readMode:n,addNewImage:function(t){D(!0),e.addASlideInCarousel(e.data.id,t,(function(e){e||(D(!1),M(!0))}))},isSlideBeingEdited:F}),i.a.createElement(ue.a,{onDragEnd:function(e){if(e.destination){var t=We(h,e.source.index,e.destination.index);v(t)}}},i.a.createElement(ue.c,{droppableId:"droppable",direction:"horizontal"},(function(e,t){return i.a.createElement("div",Object.assign({ref:e.innerRef,style:Ae(t.isDraggingOver,F)},e.droppableProps),h.length>0&&i.a.createElement(i.a.Fragment,null,h.map((function(e,t){return i.a.createElement(ue.b,{key:e.id,draggableId:e.id,index:t,isDragDisabled:n||F},(function(a,r){return i.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:Be(r.isDragging,a.draggableProps.style,n,F),id:e.id}),i.a.createElement("div",{ref:k[t],className:"position-relative h-100"},"image"===e.slide_type?i.a.createElement(Ce,{slideData:e,readMode:n,deleteASlide:Y,updateASlide:K,setIsSlideBeingEdited:R,reactRef:k[t],setSlideBeingEdited:V}):i.a.createElement(_e,{slideData:e,readMode:n,deleteASlide:Y,updateASlide:K,setIsSlideBeingEdited:R,reactRef:k[t],setSlideBeingEdited:V})))}))}))),e.placeholder)})))))};function _e(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(""),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(""),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(!1),x=Object(l.a)(w,2),O=(x[0],x[1]),j=Object(r.useState)(!1),y=Object(l.a)(j,2),N=y[0],k=y[1],S=Object(r.useState)(!1),_=Object(l.a)(S,2),C=_[0],I=_[1],M=Object(r.useState)(!1),W=Object(l.a)(M,2),B=(W[0],W[1]),A=Object(r.useState)(!1),T=Object(l.a)(A,2),D=T[0];T[1];Object(r.useEffect)((function(){return o(e.slideData),k(e.slideData.src),f(e.slideData.src),v(e.slideData.caption),I(e.slideData.caption),B(!0),function(){B(!1)}}),[]);return i.a.createElement(i.a.Fragment,null,!e.readMode&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"pb-1 text-md-left text-center"},i.a.createElement("div",{className:"row"},!s&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-md-6"},i.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){e.deleteASlide(n.id,(function(e){}))},id:n.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Delete")),i.a.createElement("div",{className:"col-md-6 text-md-right text-center"},i.a.createElement("button",{id:n.id,className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-light text-dark",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){u(!0),e.setIsSlideBeingEdited(!0),e.setSlideBeingEdited({id:n.id,reactRef:e.reactRef})}},"Edit"))),s&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-md-6"},i.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){k(g),I(h),u(!1),e.setIsSlideBeingEdited(!1)},id:n.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Cancel")),i.a.createElement("div",{className:"col-md-6 text-md-right text-center"},D&&i.a.createElement("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")),i.a.createElement("button",{id:n.id,className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-success text-white",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){e.updateASlide(n.id,C,n.slide_type,!1,!1,!1,N,N!==g,(function(t,a){u(!1),e.setIsSlideBeingEdited(!1),f(t),O(t),v(a),I(a)}))}},"Save"))))),s&&i.a.createElement("div",{className:"mb-2 mt-1"},i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-link"}))),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Image url","aria-label":"Image url","aria-describedby":"addon-wrapping",value:N,onChange:function(e){return function(e){var t=e.target.value,a=t.split("/")[2];k("vimeo.com"===a?"https://player.vimeo.com/video/"+t.split("/")[3]:"www.youtube.com"===a?"https://www.youtube.com/embed/"+t.split("?v=")[1]:e.target.value)}(e)}})))),i.a.createElement("div",{className:"smoothTransition ",style:e.readMode||s?{height:"auto",minWidth:"300px",minHeight:"300px"}:{minWidth:"250px",minHeight:"auto",marginTop:"0em"}},!1!==N&&i.a.createElement("div",{className:"video_wrapper_on_drag",style:e.readMode||s?{}:{position:"relative",zIndex:1}},i.a.createElement("div",{className:"embed-container"},i.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:N,style:e.readMode||s?{}:{zIndex:-1},allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"})))))}function Ce(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(!1),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(""),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(""),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(r.useState)(!1),x=Object(l.a)(w,2),O=x[0],j=x[1],y=Object(r.useState)(!1),N=Object(l.a)(y,2),k=N[0],S=N[1],_=Object(r.useState)(!1),C=Object(l.a)(_,2),I=C[0],M=C[1],W=Object(r.useState)(!1),B=Object(l.a)(W,2),A=B[0],T=B[1],D=Object(r.useState)(!1),P=Object(l.a)(D,2),L=P[0],F=P[1],R=Object(r.useState)(!1),z=Object(l.a)(R,2),H=z[0],U=z[1],V=Object(r.useState)(!1),J=Object(l.a)(V,2),$=J[0],G=J[1],q=Object(r.useState)({value:he.EditorState.createEmpty()}),K=Object(l.a)(q,2),Y=K[0],X=K[1];Object(r.useEffect)((function(){return o(e.slideData),j(e.slideData.src),S(e.slideData.src),f(e.slideData.src),v(e.slideData.caption),F(e.slideData.caption),U(!0),function(){U(!1)}}),[]),Object(r.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:e.slideData.caption,type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"center"}}],entityMap:{}};X({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(t))})}),[]),Object(r.useLayoutEffect)((function(){if(A){var e=new Image;e.src=O,G(!0),e.onload=function(){G(!1),M(!0)},e.onerror=function(){G(!1),M(!1)}}else M(!0);return function(){G(!1)}}),[O,A]);var Q=function(e,t){if(e.target.files&&e.target.files[0]){var a=e.target.files[0];j(e.target.files[0]),T(!1),S(String(URL.createObjectURL(a)))}if(t){var r=n;r.src=e.target.value,o(r),j(e.target.value),T(!0),S(e.target.value)}};return i.a.createElement(i.a.Fragment,null,!e.readMode&&i.a.createElement(i.a.Fragment,null,H&&i.a.createElement("div",{className:"position-absolute h-100 w-100 smoothTransition",style:{background:"#ffffffad",zIndex:"9"}}),i.a.createElement("div",{className:"pb-1 text-md-left text-center"},H&&i.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},i.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))),i.a.createElement("div",{className:"row"},!s&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-md-6"},i.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){e.deleteASlide(n.id,(function(e){}))},id:n.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Delete")),i.a.createElement("div",{className:"col-md-6 text-md-right text-center"},i.a.createElement("button",{id:n.id,className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-light text-dark",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){u(!0),e.setIsSlideBeingEdited(!0),e.setSlideBeingEdited({id:n.id,reactRef:e.reactRef})}},"Edit"))),s&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-md-6"},i.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){S(g),j(g),F(h),u(!1),e.setIsSlideBeingEdited(!1)},id:n.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Cancel")),i.a.createElement("div",{className:"col-md-6 text-md-right text-center"},$&&i.a.createElement("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")),i.a.createElement("button",{id:n.id,className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-success text-white",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){e.updateASlide(n.id,L,n.slide_type,O,A,O!==g,!1,!1,(function(t,a){u(!1),e.setIsSlideBeingEdited(!1),f(t),S(t),j(t),v(a),F(a)}))},disabled:O===g&&L===h||!1===I||$},"Save"))))),s&&i.a.createElement("div",null,i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-link"}))),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Image url","aria-label":"Image url","aria-describedby":"addon-wrapping",value:O,onChange:function(e){return Q(e,!0)},onKeyDown:function(e){9===e.keyCode&&e.preventDefault()}})),i.a.createElement("div",{className:"input-group flex-nowrap input-group-sm my-2 border rounded"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},i.a.createElement("i",{className:"fas fa-upload"}))),i.a.createElement("label",{className:"btn btn-default btn-sm"},i.a.createElement("input",{type:"file",className:"form-control. w-100",placeholder:"upload image","aria-label":"upload image",accept:"image/*","aria-describedby":"addon-wrapping",onChange:function(e){return Q(e)}}))))),g&&i.a.createElement("div",{className:"smoothTransition",style:e.readMode||s?{height:"auto",minHeight:"300px"}:{minHeight:"auto"}},i.a.createElement("img",{alt:"test",src:k,onLoad:function(){return U(!1)},className:" smoothTransition  ".concat(H?"opacity-0":"opacity-1 "),style:e.readMode||s?{height:"auto",width:"300px",minWidth:"300px"}:{height:"auto",width:"180px",minWidth:"180px"}}),H?i.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},i.a.createElement("div",{className:"spinner-grow text-light",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))):null),i.a.createElement("div",{className:"video_wrapper_on_drag smoothTransition text-center mt-2  ".concat(s?" bg-white text-black py-2 ":" text-white ","  "),style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},i.a.createElement(Ee.Editor,{readOnly:!s,toolbarHidden:!s,handlePastedText:function(){return!1},editorState:Y.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor   ".concat(s?"changeCursor ":" ","  "),toolbar:{options:[],inline:{options:[]}},onEditorStateChange:function(e){X({value:e});var t=Object(he.convertToRaw)(e.getCurrentContent());console.log(t.blocks[0].text),F(t.blocks[0].text)},onTab:function(e){9===e.keyCode&&e.preventDefault()}})))}var Ie=function(e){return i.a.createElement(i.a.Fragment,null,e.popupEditModeSelected&&i.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},i.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},Me=function(e){return i.a.createElement(i.a.Fragment,null,!e.readMode&&i.a.createElement("div",{className:"py-2 text-left"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-xl-6 text-xl-left text-center"},i.a.createElement("button",{className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-secondary text-white bg-info",onClick:function(t){return e.addNewImage(!0)},style:{padding:"5px 10px",borderRadius:"30px"},disabled:e.isSlideBeingEdited},"Add Image Slide")),i.a.createElement("div",{className:"col-xl-6 text-xl-right text-center"},i.a.createElement("button",{className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-secondary text-white bg-info",onClick:function(t){return e.addNewImage(!1)},style:{padding:"5px 10px",borderRadius:"30px"},disabled:e.isSlideBeingEdited},"Add Video Slide")))))},We=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),i=Object(l.a)(r,1)[0];return n.splice(a,0,i),n},Be=function(e,t,a,n){return Object(T.a)({userSelect:"none",margin:"0 ".concat(8,"px 0 0"),transition:"all 0.65s ease-in-out",padding:"".concat(8,"px"),background:e?"lightgreen":"#19a2b8"},t)},Ae=function(e,t){return{background:e?"lightblue":"white",display:"flex",padding:8,overflow:t?"hidden":"auto"}};var Te=function(e,t){var a=Object(r.useState)({items:{}}),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)(!1),s=Object(l.a)(d,2),u=s[0],g=s[1],f=Object(r.useState)(!1),b=Object(l.a)(f,2),E=b[0],h=b[1],v=Object(r.useState)([]),w=Object(l.a)(v,2),x=w[0],O=w[1];!function(e){var t=Object(r.useRef)(e);Object(r.useEffect)((function(){var a=Object.entries(e).reduce((function(e,a){var n=Object(l.a)(a,2),r=n[0],i=n[1];return t.current[r]!==i&&(e[r]=[t.current[r],i]),e}),{});Object.keys(a).length,t.current=e}))}(e),Object(r.useLayoutEffect)((function(){function t(){return(t=Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.positionPopup(e.positions,(function(e){g({top:e.top+"px",left:e.left+"px"})}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}c({items:e.data.popup_content}),function(){t.apply(this,arguments)}()}),[e]),Object(r.useLayoutEffect)((function(){h(!0)}),[e.data.id,e.positions,E]),Object(r.useLayoutEffect)((function(){function t(){F.adjustPopupBoxContainer(e.data.id,e.positions,(function(){h(!0)}))}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[e]);var j=Object(r.useState)(!1),y=Object(l.a)(j,2),N=y[0],k=y[1],S=Object(r.useState)(!1),_=Object(l.a)(S,2),C=_[0],I=_[1],M={position:"absolute",top:"-25px",left:0,padding:"5px 10px",margin:"-10px 0px 0px",borderRadius:"30px",display:"flex",alignItems:"center"},W=function(t){var a=t.currentTarget.id;B.delete("/popup_widget/index.php",{data:{marker_id:e.data.id,popup_widget_id:a},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){c((function(e){return{items:e.items.filter((function(e){return parseInt(e.id)!==a}))}})),e.setPopups((function(t){return t.map((function(t,n){return parseInt(t.id)===parseInt(e.data.id)?Object(T.a)(Object(T.a)({},t),{},{popup_content:t.popup_content.filter((function(e){return e.id!==a}))}):t}))}))})).catch((function(t){"Expired token"===t.response.data.message&&e.history.push("/login/")}))},A=function(){return i.a.createElement("button",{className:"btn-sm btn badge badge-secondary text-white bg-info",style:M,onClick:function(t){return function(){if(N){e.setPopupEditMode(!1),I(!0),setTimeout((function(){I(!1)}),400);var t=e.data.popup_content;for(var a in t)t[a].order_no=a;B.post("/popup_widget/save_order.php/",{marker_id:parseInt(e.data.id),popup_content:t},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){})).catch((function(e){console.log(e)})),k(!1)}else e.setPopupEditMode(!0),k(!0),I(!0),setTimeout((function(){I(!1)}),400)}()},disabled:x.length>0},N?"Save Layout":"Edit Layout",i.a.createElement(se,{className:"mx-1"}))};return i.a.createElement(i.a.Fragment,null,E?i.a.createElement("div",{styles:!1!==u?u:"",className:"pointBox showflip",id:"popup"+e.data.id},i.a.createElement(A,null),i.a.createElement(Pe,null),N?void 0:i.a.createElement(De,{closeThisPopup:function(){e.setPopupModeMarkerSelected(!1),O((function(){return[{}]}))}}),i.a.createElement(ue.c,{droppableId:"droppable2"},(function(t,a){return i.a.createElement("div",{ref:t.innerRef,style:N?{background:n?"red":"lightgrey",padding:6}:void 0,className:" smoothTransition ".concat(N?"":"pb-0")},o.items.map((function(t,a){return i.a.createElement(ue.b,{key:t.id,draggableId:t.id,index:a,isDragDisabled:!N||e.newWidgetBeingAdded},(function(a,n){return i.a.createElement("div",null,i.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:N?(r=n.isDragging,c=a.draggableProps.style,r.isDropAnimating?c:Object(T.a)({userSelect:"none",padding:6,margin:"0 0 ".concat(6,"px 0"),background:r?"#117a8b":"#19a2b8"},c)):void 0,className:"".concat(C?"smoothTransition":void 0)}),function(t){var a=t.item;switch(a.widget_type_id){case Y:return i.a.createElement(ge,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,popupItems:o,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case K:return i.a.createElement(we,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case Z:return i.a.createElement(Oe,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case Q:return i.a.createElement(ye,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case X:return i.a.createElement(be,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,popupItems:o,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case ee:return i.a.createElement(ke,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case te:return i.a.createElement(Se,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:N,deleteAWidget:W,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O,addASlideInCarousel:e.addASlideInCarousel,deleteASlideInCarousel:e.deleteASlideInCarousel,updateASlideInCarousel:e.updateASlideInCarousel,updateCarouselSlidesOrder:e.updateCarouselSlidesOrder});default:return i.a.createElement("h1",{className:"text-dark"},"Widget not implemented")}}({item:t})));var r,c}))})),t.placeholder);var n}))):void 0)},De=function(e){var t=e.closeThisPopup;return i.a.createElement("div",{className:"pointBoxClose exit",onClick:function(){return t()}},i.a.createElement("div",{className:"pointBoxCloseIcon"},i.a.createElement("svg",{height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{fill:"none",stroke:"black",strokeWidth:"1"},i.a.createElement("path",{d:"M2 14L14 2M2 2l12 12"})))))},Pe=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"pointBoxArrow"},i.a.createElement("svg",{width:"20",className:"pointBoxArrowRight",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},i.a.createElement("path",{fill:"#ffffff",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})),i.a.createElement("svg",{width:"20",className:"pointBoxArrowLeft",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},i.a.createElement("path",{fill:"#ffffff",d:"M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"}))))};function Le(e){var t=e.imageId,a=Object(r.useState)(""),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)(""),s=Object(l.a)(d,2),u=s[0],p=s[1],m=Object(r.useState)(""),g=Object(l.a)(m,2),f=g[0],b=g[1],E=Object(r.useState)(!1),h=Object(l.a)(E,2),v=h[0],w=h[1],x=Object(r.useState)(""),O=Object(l.a)(x,2),j=O[0],y=O[1],N=Object(r.useState)(!1),k=Object(l.a)(N,2),S=k[0],_=k[1],C=Object(r.useState)(""),I=Object(l.a)(C,2),M=I[0],W=I[1];Object(r.useEffect)((function(){c(e.header||""),p(e.copy||""),b(e.script||"")}),[e.copy,e.header,e.script]);var A=i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text bg-secondary",id:"inputGroup-sizing-default"},"Header")),i.a.createElement("input",{type:"text",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",value:o,onChange:function(e){c(e.target.value)}})),T=i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text bg-secondary"},"Body Text")),i.a.createElement("textarea",{style:{minHeight:"200px"},className:"form-control","aria-label":"With textarea",value:u,onChange:function(e){p(e.target.value)}})),D=i.a.createElement("div",{className:"input-group"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text bg-secondary"},"Wayin embed code")),i.a.createElement("textarea",{className:"form-control","aria-label":"With textarea",value:f,onChange:function(e){b(e.target.value)}})),P=i.a.createElement(i.a.Fragment,null,S&&i.a.createElement("div",{className:"col-md-6 mx-auto mt-4 text-center"},i.a.createElement("div",{className:"alert alert-success",role:"alert"},M)),v&&i.a.createElement("div",{className:"col-md-6 mx-auto mt-4 text-center"},i.a.createElement("div",{className:"alert alert-danger",role:"alert"},j)));return i.a.createElement("div",{className:"modal fade text-dark text-black",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},"Update Page Details"),i.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),i.a.createElement("div",{className:"modal-body"},A,T,D,P),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){B.put("/details/index.php",{header:o,copy:u,script:f,image_id:t},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){w(!1),y(""),_(!0),W("Updated"),setTimeout((function(){_(!1),W("")}),2500)})).catch((function(t){_(!1),W("");var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(w(n.error),y(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(w(n.error),y(n.message[Object.keys(n.message)[0]][0]))}))}},"Save changes")))))}var Fe={background:"#2a85a5",padding:"10px",borderRadius:"20px"};var Re=function(e){var t=e.imageId,a=Object(r.useRef)(null),n=Object(r.useState)("Copy Iframe code"),o=Object(l.a)(n,2),c=o[0];o[1];return i.a.createElement("button",{className:"smoothTransition btn btn-sm shadow-none","data-toggle":"tooltip","data-placement":"top",title:c,onClick:function(e){e.preventDefault(),window.$("#CopyIframeSrcButton").attr("data-original-title","Copied to clipboard!").tooltip("show"),setTimeout((function(){window.$("#CopyIframeSrcButton").attr("data-original-title","Copy Iframe url").tooltip("show")}),2500),navigator.clipboard.writeText("".concat(E,"/embed/").concat(t))},"aria-disabled":"true","data-tooltipdata":c,ref:a,id:"CopyIframeSrcButton"},i.a.createElement("i",{className:"text-white far fa-file-code fa-1x",style:Fe}))},ze=function(e){var t=e.imageId,a=Object(r.useRef)(null),n=Object(r.useState)("Copy embed code"),o=Object(l.a)(n,2),c=o[0];o[1];return i.a.createElement("button",{className:"smoothTransition btn btn-sm shadow-none","data-toggle":"tooltip","data-placement":"top",title:c,onClick:function(e){e.preventDefault(),window.$("#embedCodeButton").attr("data-original-title","Copied to clipboard!").tooltip("show"),setTimeout((function(){window.$("#embedCodeButton").attr("data-original-title","Copy embed code").tooltip("show")}),2500),navigator.clipboard.writeText("<script src='".concat(h,"/embed/index.php?id=").concat(t,"'><\/script>"))},"aria-disabled":"true","data-tooltipdata":c,ref:a,id:"embedCodeButton"},i.a.createElement("i",{className:"text-white far fa-copy fa-1x",style:Fe}))},He=function(e){var t=e.imageId;return i.a.createElement(s.a,null,i.a.createElement(s.b,{to:"/embed/".concat(t),target:"_blank",rel:"noopener noreferrer"},i.a.createElement("button",{className:"btn btn-info mx-2"},"Preview")))},Ue=function(e){var t=Object(r.useState)("Marker"),a=Object(l.a)(t,2),n=a[0],o=a[1];return i.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},i.a.createElement("label",{className:"smoothTransition btn btn-info ".concat("Marker"===n?"active":""," ").concat(e.popupEditMode?"disabled":"")},i.a.createElement("input",{type:"radio",name:"options",id:"option1",onClick:function(){e.enableDraggableMode(),o("Marker")},defaultChecked:!0})," ","Marker"),i.a.createElement("label",{className:"smoothTransition btn btn-info ".concat("Popup"===n?"active":""," ").concat(e.popupEditMode?"disabled":"")},i.a.createElement("input",{type:"radio",name:"options",onClick:function(){e.enablePopupView(),o("Popup")}}),"Popup"))},Ve=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row text-left  mx-0 "},i.a.createElement("div",{className:"col-5  order-12 order-md-1  px-0 text-white"},i.a.createElement("div",{className:"p-1 "},i.a.createElement("a",{className:"smoothTransition btn btn-sm ".concat(e.popupViewEnabled?"disabled":""),href:"#!","data-toggle":"tooltip","data-placement":"top",title:"Add Marker",onClick:function(t){t.preventDefault(),e.addNewMarker()}},i.a.createElement("i",{className:"text-white fas fa-plus-circle fa-1x",style:Fe})),i.a.createElement("a",{href:"#!",className:"smoothTransition btn btn-sm ".concat(e.selectedMarker&&!e.popupViewEnabled?"":"disabled"),ref:e.deleteRef,"data-toggle":"tooltip","data-placement":"top",title:"Delete Marker",onClick:function(t){t.preventDefault(),e.deleteMarker()},role:"button","aria-disabled":"true"},i.a.createElement("i",{className:" text-white far fa-trash-alt fa-1x",style:Fe})),i.a.createElement(ze,{imageId:e.imageId}),i.a.createElement(Re,{imageId:e.imageId}))),i.a.createElement("div",{className:"smoothTransition col-7 order-1 order-md-1  px-0 py-2 py-md-0 my-auto text-md-right text-left"},i.a.createElement("button",{type:"button",className:"btn btn-info ","data-toggle":"modal","data-target":"#exampleModalCenter"},"Edit Page info"),i.a.createElement(Le,{imageId:e.imageId,header:e.header,copy:e.copy,script:e.script}),i.a.createElement(He,{imageId:e.imageId}),i.a.createElement(Ue,{enablePopupView:e.enablePopupView,enableDraggableMode:e.enableDraggableMode,popupEditMode:e.popupEditMode}))))},Je=a(211);var $e=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(),d=Object(l.a)(c,2),s=d[0],u=d[1];return Object(r.useEffect)((function(){e.selectedMarker?setTimeout((function(){return o(!0)}),400):o(!1)}),[n,e.selectedMarker]),i.a.createElement(i.a.Fragment,null,n&&!e.popupViewEnabled?i.a.createElement("div",{className:"smoothTransition py-2 "},i.a.createElement(Je.a,{color:s,disableAlpha:!0,colors:["#f44336","#ffffff","#e91e63","#9c27b0","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#673ab7"],circleSpacing:6,width:"90%",onChange:function(t){u(t),e.onColorSelected(t)}})):void 0)};var Ge=function(){return window.$(".toast").toast(),i.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative"}},i.a.createElement("div",{className:"toast",style:{position:"absolute",top:0,right:0,opacity:1,zIndex:1e3}},i.a.createElement("div",{className:"toast-header bg-info text-white"},i.a.createElement("span",{role:"img","aria-label":"Alert",height:"100"},"\ud83d\ude2e \ud83d\ude2e \ud83d\ude2e"),i.a.createElement("strong",{className:"mr-auto"})),i.a.createElement("div",{className:"toast-body text-dark",style:{backgroundColor:"#88888859"}},"Close already opened popup"," ",i.a.createElement("span",{role:"img","aria-label":"Alert",height:"100"},"\ud83d\ude0e"))))},qe=function(e,t){return e.isDropAnimating?t:Object(T.a)({userSelect:"none",margin:"0 0 ".concat(8,"px 0")},t)};var Ke=function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(),d=Object(l.a)(c,2),s=d[0],u=d[1];return Object(r.useEffect)((function(){u(ae),setTimeout((function(){return o(!0)}),100)}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement("div",{className:"row py-2 mx-auto"},i.a.createElement(ue.c,{droppableId:"droppable",isDropDisabled:!0},(function(t,a){return i.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,style:{width:n?"400px":"200px",margin:"8px 0px"},className:"col-12"}),s.map((function(t,a){return i.a.createElement(ue.b,{key:t.id,draggableId:t.id,index:a,isDragDisabled:e.newWidgetBeingAdded},(function(e,a){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:qe(a.isDragging,e.draggableProps.style)}),i.a.createElement(pe.a.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1}},t.widget)),a.isDragging&&i.a.createElement("div",{style:qe(e.draggableProps.style),className:"popupWidget"},t.widget))}))})),t.placeholder);var n}))))},Ye=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),o=Object(l.a)(i,2),c=o[0],d=o[1],s=Object(r.useState)(!1),u=Object(l.a)(s,2),p=u[0],m=u[1],g=Object(r.useState)(!1),f=Object(l.a)(g,2),b=f[0],E=f[1],h=Object(r.useState)(!1),v=Object(l.a)(h,2),w=v[0],x=v[1],O=Object(r.useRef)(null),j=function(){m(O.current.width),d(O.current.height)},y=Object(r.useCallback)((function(){n(!0)}),[a]);return Object(r.useEffect)((function(){return O.current&&O.current.complete&&(y(),x(O.current.naturalWidth),E(O.current.naturalHeight),m(O.current.width),d(O.current.height),window.addEventListener("resize",j)),function(){window.removeEventListener("resize",j)}}),[y,x,E,m,d]),[O,a,y,b,w,p,c]};var Xe=function(e){var t=Object(r.useRef)([]),a=Object(r.useState)(!1),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)(!1),s=Object(l.a)(d,2),u=s[0],g=s[1],f=Object(r.useState)(!1),b=Object(l.a)(f,2),E=b[0],h=b[1],v=Object(r.useState)(!1),w=Object(l.a)(v,2),x=w[0],O=w[1],j=Object(r.useState)(!1),y=Object(l.a)(j,2),N=y[0],k=y[1],S=Object(r.useState)({}),_=Object(l.a)(S,2),C=_[0],I=_[1],M=Object(r.useState)(!1),W=Object(l.a)(M,2),D=W[0],L=W[1],R=Object(r.useState)(!1),H=Object(l.a)(R,2),U=H[0],V=H[1],J=Object(r.useState)(!1),$=Object(l.a)(J,2),G=$[0],q=$[1],K=Object(r.useState)(!1),Y=Object(l.a)(K,2),X=(Y[0],Y[1]),Q=Object(r.useState)(!1),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ie=Object(r.useState)(!1),oe=Object(l.a)(ie,2),ce=oe[0],le=oe[1],de=Object(r.useState)(!1),se=Object(l.a)(de,2),pe=se[0],me=se[1],ge=Object(r.useState)(!1),fe=Object(l.a)(ge,2),be=fe[0],Ee=fe[1],he=Object(r.useState)(!1),ve=Object(l.a)(he,2),we=ve[0],xe=ve[1],Oe=Ye(),je=Object(l.a)(Oe,7);function ye(e){var t=P()(e.target).css("transform").split(","),a=t.length,n=parseInt(t[a-2]),r=parseInt(t[a-1]);F.getImageMetric(P()(".imageMarker"),(function(t){var a,i;a=parseInt(P()(e.target).css("left"))+n,i=parseInt(P()(e.target).css("top"))+r;var o,c,l,d=a/t.getWidthLess*t.width,s=i/t.setHeight*t.height;o=e.target.getAttribute("data-key"),c=d,l=s,I((function(e){return Object(T.a)(Object(T.a)({},e),{},{marker_positions:e.marker_positions.map((function(e,t){return parseInt(e.m_id)===parseInt(o)?Object(T.a)(Object(T.a)({},e),{},{top:l,left:c}):e}))})}))}))}function Ne(e){var t=e.target,a=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,n=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+a+"px, "+n+"px)",t.setAttribute("data-x",a),t.setAttribute("data-y",n)}je[0],je[1],je[2],je[3],je[4],je[5],je[6];var ke=e.id.id,Se=Object(r.useCallback)(Object(m.a)(p.a.mark((function t(){var a,n,r,i,o,d;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.get("/image/index.php",{params:{image_id:parseInt(ke)},headers:{Authorization:localStorage.getItem("token")}});case 3:a=t.sent,n=ne(a.data),r=Object(l.a)(n,2),i=r[0],o=r[1],L(o),I(i),k(!0),_e(),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Expired token"===(d=t.t0.response).data.message&&e.history.push("/login/"),404===d.status&&(c(!0),g(d.data.message));case 16:return t.abrupt("return");case 17:case"end":return t.stop()}}),t,null,[[0,11]])}))),[]),_e=function(){z()(".item-point").draggable({inertia:!0,autoScroll:!0,modifiers:[z.a.modifiers.restrictRect({restriction:"parent"})],onmove:Ne}).on("dragend",ye),window.$((function(){window.$('[data-toggle="tooltip"]').tooltip({delay:{show:0,hide:100},trigger:"hover"})}))},Ce=function(){F.positionMarkers(t)},Ie=function(e){t.current.includes(e.target)||q(!1)};function Me(t,a,n,r){var i=new FormData;i.append("image",a),i.append("marker_id",parseInt(ce.markerId)),i.append("popup_widget_id",t),i.append("widget_type_id",n),i.append("image_url",r),"widget_id_2"===n?B.post("/popup_widget/update_image.php",i,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){L((function(a){return a.map((function(n,r){return parseInt(n.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},n),{},{popup_content:a[r].popup_content.map((function(a,n){return a.id===t?Object(T.a)(Object(T.a)({},a),{},{src:e.data}):a}))}):n}))})),h(!1),O(null)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(h(n.error),O(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(h(n.error),O(n.message[Object.keys(n.message)[0]][0]))})):B.put("/popup_widget/index.php",{marker_id:parseInt(ce.markerId),popup_widget_id:t,content:a,widget_type_id:n},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){h(!1),O(null),console.log(e)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(h(n.error),O(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(h(n.error),O(n.message[Object.keys(n.message)[0]][0]))})),L((function(e){return e.map((function(n,r){return parseInt(n.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},n),{},{popup_content:e[r].popup_content.map((function(e,n){return e.id===t?Object(T.a)(Object(T.a)({},e),{},{src:a}):e}))}):n}))}))}Object(r.useEffect)((function(){if(N)return document.getElementById("imageMarkerWrapper").addEventListener("mousedown",Ie),function(){document.getElementById("imageMarkerWrapper").removeEventListener("mousedown",Ie)}}),[N]),Object(r.useEffect)((function(){return function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:return e.next=4,F.positionMarkers(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),window.addEventListener("resize",Ce),function(){window.removeEventListener("resize",Ce),z()(".item-point").unset()}}),[Se]),Object(r.useEffect)((function(){var e=!0;if(N){var t=new Image;t.src=C.url,t.onload=function(){e&&(t.naturalWidth>t.naturalHeight?xe(!1):t.naturalWidth<t.naturalHeight?xe(!0):xe(!1))}}return function(){e=!1}}),[N,C,L]),Object(r.useEffect)((function(){C.id&&B.put("/marker/index.php",{image_id:parseInt(C.id),markers:C},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){h(!1),O(null),F.positionMarkers(t)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(h(n.error),O(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(h(n.error),O(n.message[Object.keys(n.message)[0]][0]))}))}),[C,e]);var We=function(){var e=Object(m.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("/popup_widget/carousel_widget.php",{params:{popup_widget_id:parseInt(t),marker_id:parseInt(parseInt(ce.markerId)),imageSlide:a}});case 3:r=e.sent,L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(T.a)(Object(T.a)({},e),{},{src:JSON.stringify(r.data)}):e}))}):a}))})),n(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n(!0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(m.a)(p.a.mark((function e(t,a,n,r,i,o,c,l,d,s){var u,m,g,f,b,E,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(u=new FormData).append("image",i),u.append("marker_id",parseInt(ce.markerId)),u.append("popup_widget_id",t),u.append("slide_id",a),u.append("image_url",o),u.append("image_src_changed",c),u.append("slide_caption",n),u.append("slide_type",r),u.append("video_src",l),u.append("video_src_changed",d),e.next=14,B.post("/popup_widget/carousel_widget.php",u,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 14:for(h in m=e.sent,g=m.data.sort((function(e,t){return e.order_no-t.order_no})),L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(T.a)(Object(T.a)({},e),{},{src:JSON.stringify(g)}):e}))}):a}))})),f=m.data)f[h].id===a&&(b=f[h].src,E=f[h].caption);s(!1,null,b,E),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),s(!0,e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,a,n,r,i,o,c,l,d,s){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(m.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.delete("/popup_widget/carousel_widget.php",{data:{popup_widget_id:parseInt(t),marker_id:parseInt(parseInt(ce.markerId)),slide_id:a}});case 3:r=e.sent,L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(T.a)(Object(T.a)({},e),{},{src:JSON.stringify(r.data)}):e}))}):a}))})),n(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n(!0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(m.a)(p.a.mark((function e(t,a,n){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.put("/popup_widget/carousel_widget.php",{marker_id:parseInt(ce.markerId),popup_widget_id:t,content:a,widget_type_id:n},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 2:r=e.sent,i=r.data.sort((function(e,t){return e.order_no-t.order_no})),L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(T.a)(Object(T.a)({},e),{},{src:JSON.stringify(i)}):e}))}):a}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Pe=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),i=Object(l.a)(r,1)[0];return n.splice(a,0,i),n},Le=function(t,a,n,r,i){var o=Array.from(t),c=Array.from(a),l={},d=o.find((function(e){return e.id===n}));return d={id:d.id+"_"+(Date.now().toString(36)+Math.random().toString(36).substr(2)),widget_type_id:d.id,src:null,marker_id:ce.markerid},c.splice(i.index,0,d),l[r.droppableId]=o,l[i.droppableId]=c,Ee(!0),B.post("/popup_widget/index.php",{image_id:parseInt(C.id),marker_id:parseInt(ce.markerId),widget_type_id:d.widget_type_id,react_widget_id:d.id},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){var t=e.data.new_widget_id,a=e.data.react_widget_id;L((function(n){return n.map((function(n,r){return parseInt(n.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},n),{},{popup_content:n.popup_content.map((function(n,r){return n.id===a?{id:t,widget_type_id:e.data.widget_type_id,src:e.data.src,marker_id:ce.markerId}:n}))}):n}))})),Ee(!1)})).catch((function(t){t.response;"Expired token"===t.response.data.message&&e.history.push("/login/")})),l},Fe=Object(r.useState)(ae),Re=Object(l.a)(Fe,2),ze=Re[0],He=(Re[1],function(){var e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in D)for(a in D[t].popup_content)D[t].popup_content[t].order_no=a;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return i.a.createElement(i.a.Fragment,null,N?i.a.createElement(Qe,null,i.a.createElement("div",{className:"row text-center text-white mr-auto"},i.a.createElement(ue.a,{onDragEnd:function(e){var t=e.source,a=e.destination,n=e.draggableId;a&&(t.droppableId===a.droppableId&&a.index===t.index||(t.droppableId===a.droppableId?L((function(e){return e.map((function(e,n){return parseInt(e.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},e),{},{popup_content:Pe(e.popup_content,t.index,a.index)}):e}))})):L((function(e){return e.map((function(e,r){return parseInt(e.id)===parseInt(ce.popupId)?Object(T.a)(Object(T.a)({},e),{},{popup_content:Le(ze,e.popup_content,n,t,a).droppable2}):e}))}))))}},i.a.createElement("div",{className:"text-left rounded-right col-3 smoothTransition pl-0  pr-0 ",id:"widgetPanel"},i.a.createElement("div",{className:"text-left bg-info rounded-right px-0 smoothTransition h-100 ".concat(G||ee?"col-md-12":"col-md-4")},i.a.createElement($e,{onColorSelected:function(e){I((function(t){return Object(T.a)(Object(T.a)({},t),{},{marker_positions:t.marker_positions.map((function(t,a){return parseInt(t.m_id)===parseInt(G.markerId)?Object(T.a)(Object(T.a)({},t),{},{color:e.hex}):t}))})}))},selectedMarker:G,popupViewEnabled:U}),ee&&i.a.createElement(Ke,{newWidgetBeingAdded:be}))),i.a.createElement("div",{className:"mb-4 col-9 "},E&&i.a.createElement("div",{className:"col-md-12 mx-auto ",role:"alert"},i.a.createElement("div",{className:"alert alert-danger",role:"alert"},x)),i.a.createElement(Ve,{selectedMarker:G,addNewMarker:function(){B.post("/marker/index.php",{image_id:parseInt(C.id)},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){var t,a=e.data.new_marker[0],n=e.data.new_popup;n.id=parseInt(e.data.new_popup.id),t={m_id:parseInt(a.id),top:parseFloat(a.markerTop),left:parseFloat(a.markerLeft),color:a.color,animation_type:a.animation_type,marker_type:a.marker_type,marker_image:a.marker_image,background_color:a.background_color,border_radius:a.border_radius,popup_id:parseInt(a.id)},I((function(e){return Object(T.a)(Object(T.a)({},e),{},{marker_positions:[].concat(Object(A.a)(e.marker_positions),[t])})}));var r=[];for(var i in n.popup_content)r.push({id:n.popup_content[i].id,widget_type_id:n.popup_content[i].widget_type_id,src:n.popup_content[i].content,marker_id:a.id});n.popup_content=r,n.id=parseInt(a.id),L((function(e){return[].concat(Object(A.a)(e),[n])}))})).catch((function(t){t.response;"Expired token"===t.response.data.message&&e.history.push("/login/")}))},deleteMarker:function(t){C.marker_positions.length>1&&B.delete("/marker/index.php",{data:{marker_id:parseInt(G.markerId),popup_id:parseInt(G.popupId)},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){X({popupId:parseInt(G.popupId)}),I((function(e){return Object(T.a)(Object(T.a)({},e),{},{marker_positions:e.marker_positions.filter((function(e){return e.m_id!==parseInt(G.markerId)}))})})),L((function(e){return e.filter((function(e){return e.id!==parseInt(G.popupId)}))})),q(!1)})).catch((function(t){var a=t.response.data,n=t.response;"Expired token"===a.message&&e.history.push("/login/"),401===n.status&&(h(a.error),O(a.message)),400===n.status&&a.validationError&&"marker_id"===Object.keys(a.message)[0]&&(h(a.error),O(a.message[Object.keys(a.message)[0]][0]))}))},popupViewEnabled:U,enablePopupView:function(e){V(!0),z()(".item-point").unset(),q(!1)},enableDraggableMode:function(e){_e(),V(!1),te(!1)},popupEditMode:ee,saveData:He,imageId:C.id,header:C.header,copy:C.copy,script:C.script}),i.a.createElement("div",{className:"imageMarker shadow-lg",id:"imageMarkerWrapper",style:we?{maxWidth:"850px",margin:"auto"}:{maxWidth:"1080px",margin:"auto"}},pe&&i.a.createElement(Ge,null),N?null:i.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},i.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))),i.a.createElement("img",{className:"target rounded shadow ".concat(N?"":"d-none"),alt:"empty",src:C.url,onLoad:function(){return k(!0)}}),i.a.createElement(Ze,null,i.a.createElement("div",{className:"image-overlay-onpopup rounded",style:ce?{opacity:1}:void 0}),C.marker_positions.map((function(e,a){return i.a.createElement(i.a.Fragment,{key:a},i.a.createElement(re,{ref:function(e){return t.current[a]=e},key:a,markers:e,popupViewEnabled:U,setSelectedMarker:q,selectedMarker:G,popupModeMarkerSelected:ce,setPopupModeMarkerSelected:le,setShowToast:me}))}))),i.a.createElement(i.a.Fragment,null,D.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:t},e.id===parseInt(ce.popupId)?i.a.createElement(i.a.Fragment,null,i.a.createElement(Te,{key:t,data:e,popupContentChanged:Me,setPopupEditMode:te,setPopups:L,setPopupModeMarkerSelected:le,positions:{top:C.marker_positions[t].top,left:C.marker_positions[t].left},newWidgetBeingAdded:be,addASlideInCarousel:We,deleteASlideInCarousel:Ae,updateASlideInCarousel:Be,updateCarouselSlidesOrder:De})):void 0)})))))))):i.a.createElement(i.a.Fragment,null,!o&&i.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},i.a.createElement("div",{className:"spinner-grow text-primary p-3",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")))),o&&i.a.createElement("div",{className:"col-md-6 mx-auto mt-5 pt-3",role:"alert"},i.a.createElement("div",{className:"alert alert-danger",role:"alert"},u)))},Qe=function(e){var t=e.children;return i.a.createElement("div",{className:"container-fluid mt-4 ml-0",style:{width:"95%"}},t)},Ze=function(e){var t=e.children;return i.a.createElement("div",{className:"points_wrap"},t)};var et=function(e){var t=Object(r.useState)(""),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(""),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Object(r.useState)(null),m=Object(l.a)(p,2),g=m[0],f=m[1],b=Object(r.useState)(""),E=Object(l.a)(b,2),h=E[0],v=E[1],w=Object(N.g)();return i.a.createElement("div",{style:{maxWidth:"450px"},className:"m-auto pt-5"},g&&i.a.createElement("div",{className:"alert alert-danger mt-4",role:"alert"},h),i.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"}," Log in"),i.a.createElement("form",{className:"needs-validation  form-signin mt-3 form-row }"},i.a.createElement("div",{className:"col-12   px-0"},i.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),i.a.createElement("input",{type:"email",id:"inputEmail",className:"form-control rounded-top  ",placeholder:"Email address",required:!0,autoFocus:"",style:{borderRadius:0,borderBottom:0},value:n,onChange:function(e){return o(e.target.value)}})),i.a.createElement("input",{type:"password",id:"inputPassword",className:"form-control rounded-bottom",placeholder:"Password",required:"",style:{borderRadius:0},value:s,onChange:function(e){return u(e.target.value)}}),i.a.createElement("button",{className:"btn btn-lg btn-info btn-block my-3",type:"submit",disabled:!(n.length>3&&s.length>3),onClick:function(t){return function(t){f(!1),v(!1),t.preventDefault(),B.post("/login/index.php",{email:n,password:s}).then((function(t){var a=t.data;localStorage.setItem("token",a.jwt),w.push("/image"),e.setUserLoggedIn(!0)})).catch((function(e){var t=e.response.data;t.validationError&&(console.log(Object.keys(t.message)[0],t.message[Object.keys(t.message)[0]][0]),"email"===Object.keys(t.message)[0]&&(f(t.error),v(t.message[Object.keys(t.message)[0]][0])),"password"===Object.keys(t.message)[0]&&(f(t.error),v(t.message[Object.keys(t.message)[0]][0]))),t.validationError||(f(t.error),v("".concat(t.message)))}))}(t)}},"Sign in")))};var tt=function(){return i.a.createElement("div",{className:"text-dark container text-center"},i.a.createElement("h1",null,"Dashboard"))},at=a(214),nt=function(e){return new Promise((function(e,t){B.post("/token/index.php","",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((function(t){t.data.okay&&e(t.data.okay)})).catch((function(e){t(!1)}))}))},rt=function(e){var t=e.component,a=e.setUserLoggedIn,n=Object(at.a)(e,["component","setUserLoggedIn"]),o=Object(r.useState)(!1),c=Object(l.a)(o,2),d=c[0],s=c[1],u=Object(r.useState)(!1),p=Object(l.a)(u,2),m=p[0],g=p[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("token");e?nt().then((function(e){s(!0),a(!0)})).catch((function(e){s(!1),a(!1)})).then((function(e){g(!0)})):(g(!0),null===e&&a(!1))}),[]),m?i.a.createElement(N.b,Object.assign({},n,{render:function(e){return d?i.a.createElement(t,e):i.a.createElement(N.a,{to:"/login"})}})):i.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},i.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")))},it=a(205),ot=a(206),ct=a(55),lt=a(215),dt=a(213),st=a(207),ut=a.n(st),pt=a(212),mt=function(e){Object(lt.a)(a,e);var t=Object(dt.a)(a);function a(e){var n;return Object(it.a)(this,a),(n=t.call(this,e)).getAllBauerStation=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){B.get("/stations/index.php",{params:{},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){e(t.data)})).catch((function(e){console.log(e),t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onStationSelected=function(e){n.setState({selectedBauerStation:e})},n.state={selectedImage:[],bauerStations:[],selectedBauerStation:"",imageName:"",loading:!1,error:!1},n.onDrop=n.onDrop.bind(Object(ct.a)(n)),n.onStationSelected=n.onStationSelected.bind(Object(ct.a)(n)),n.onImageNameChange=n.onImageNameChange.bind(Object(ct.a)(n)),n.createImage=n.createImage.bind(Object(ct.a)(n)),n}return Object(ot.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getAllBauerStation().then((function(t){e.setState({bauerStations:t})})).catch((function(e){console.log(e)}))}},{key:"onImageNameChange",value:function(e){this.setState({imageName:e.target.value})}},{key:"onDrop",value:function(e,t){this.setState({selectedImage:e})}},{key:"createImage",value:function(){var e=this;(function(){var t=Object(m.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({loading:!0}),e.setState({error:!1}),(n=new FormData).append("Stations_id",e.state.selectedBauerStation.id),n.append("Users_id",1),n.append("name",e.state.imageName),n.append("image",e.state.selectedImage[0]),t.next=10,B.post("/image/index.php",n,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 10:201===(r=t.sent).status&&(e.setState({loading:!1}),e.props.history.push("/image/".concat(r.data.image_id))),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),e.setState({loading:!1}),e.setState({error:!0});case 18:return t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}})()()}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-8 mx-auto mt-2"},i.a.createElement(ut.a,{withIcon:!0,buttonText:"Choose image",onChange:this.onDrop,imgExtension:[".jpeg",".jpg",".gif",".png",".gif",".webp"],maxFileSize:5242880,singleImage:!0,withPreview:!0,buttonClassName:"btn-lg"}))),i.a.createElement("div",{className:"row rounded pt-3"},i.a.createElement("div",{className:"col-md-8 shadow-sm rounded mx-auto pb-3"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("p",{className:"py-1"},"Select Station"),i.a.createElement(pt.a,{defaultValue:this.state.selectedBauerStation,onChange:this.onStationSelected,options:this.state.bauerStations})),i.a.createElement("div",{className:"col-md-6"},i.a.createElement("p",{className:"py-1"},"Name"),i.a.createElement("input",{className:"form-control",type:"text",placeholder:"Name",value:this.state.imageName,onChange:this.onImageNameChange}))))),this.state.error&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"my-2 w-50 mx-auto alert alert-danger",role:"alert"},"Error, unable to create image. Try again!")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-8 mx-auto py-3 text-right"},i.a.createElement("button",{type:"button",className:"btn btn-info",onClick:this.createImage,disabled:!(""!==this.state.imageName&&""!==this.state.selectedBauerStation&&this.state.selectedImage.length>0&&!1===this.state.loading)},"Create Image"),this.state.loading&&i.a.createElement("div",{className:"col-md-4 mx-auto py-5 text-right"},i.a.createElement("div",{className:"spinner-border text-info",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),a}(i.a.Component);var gt=function(e){return i.a.createElement(Xe,{id:e.match.params})},ft=a(38),bt=a(208),Et={isLoading:!0,images:[],total_pages:0,current_page:"",search:!1,search_query:{image_name:""}},ht={authData:null},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(T.a)({},null===t||void 0===t?void 0:t.data))),Object(T.a)(Object(T.a)({},e),{},{authData:t.data,loading:!1,errors:null});case"LOGOUT":return localStorage.clear(),Object(T.a)(Object(T.a)({},e),{},{authData:null,loading:!1,errors:null});default:return e}},wt=Object(ft.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(T.a)(Object(T.a)({},e),{},{isLoading:!0});case"END_LOADING":return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1});case"RESET_IMAGES_STATE":return Object(T.a)(Object(T.a)({},e),{},{search:!1,search_query:{image_name:""}});case"FETCH_IMAGES_BY_SEARCH":return Object(T.a)(Object(T.a)({},e),{},{search:!0,search_query:{image_name:t.payload.image_name}});case"FETCH_ALL":return Object(T.a)(Object(T.a)({},e),{},{images:t.payload.images,total_pages:t.payload.total_pages});default:return e}},auth:vt}),xt=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ft.d)(Object(ft.a)(bt.a)),Ot=Object(ft.e)(wt,xt);function jt(){return new URLSearchParams(Object(N.h)().search)}var yt=function(e){var t=e.totalPages,a=e.currentPage,n=Object(d.d)((function(e){return e.posts})),r=n.search,o=n.search_query,c=(n.current_page,n.images,Object(A.a)(Array(t)).map((function(e,t){return i.a.createElement("li",{key:t+1,className:"page-item ".concat(t+1===a?"active":"")},r&&i.a.createElement(s.b,{to:"/image?page=".concat(t+1,"&image_name=").concat(o.image_name),className:"page-link"},t+1),!r&&i.a.createElement(s.b,{to:"/image?page=".concat(t+1),className:"page-link"},t+1))}))),l=i.a.createElement(i.a.Fragment,null,1!==a&&i.a.createElement("li",{className:"page-item"},r&&i.a.createElement(s.b,{to:"/image?page=".concat(a-1,"&image_name=").concat(o.image_name),className:"page-link","aria-label":"Previous"},i.a.createElement("span",{"aria-hidden":"true"},"\xab"),i.a.createElement("span",{className:"sr-only"},"Previous")),!r&&i.a.createElement(s.b,{to:"/image?page=".concat(a-1),className:"page-link","aria-label":"Previous"},i.a.createElement("span",{"aria-hidden":"true"},"\xab"),i.a.createElement("span",{className:"sr-only"},"Previous")))),u=i.a.createElement(i.a.Fragment,null,a!==t&&i.a.createElement("li",{className:"page-item"},r&&i.a.createElement(s.b,{to:"/image?page=".concat(a+1,"&image_name=").concat(o.image_name),className:"page-link","aria-label":"Previous"},i.a.createElement("span",{"aria-hidden":"true"},"\xbb"),i.a.createElement("span",{className:"sr-only"},"Next")),!r&&i.a.createElement(s.b,{to:"/image?page=".concat(a+1),className:"page-link","aria-label":"Previous"},i.a.createElement("span",{"aria-hidden":"true"},"\xbb"),i.a.createElement("span",{className:"sr-only"},"Next"))));return i.a.createElement("div",{className:"container text-center"},i.a.createElement("nav",{"aria-label":"Page navigation example"},i.a.createElement("ul",{className:"pagination d-inline-flex"},l,c,u)))};function Nt(){return i.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},i.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")))}function kt(e){var t=e.img,a=Object(r.useState)(!1),n=Object(l.a)(a,2),o=n[0],c=n[1];return i.a.createElement("div",{style:{position:"relative"}},o?null:i.a.createElement("div",{className:"text-center w-100 d-flex shine",style:{minHeight:"250px"}}),i.a.createElement("img",{style:o?{}:{display:"none"},src:t.url,onLoad:function(){return c(!0)},alt:"empty",className:"card-img img-fluid shadow "}),i.a.createElement("div",{className:"text-left ",style:{bottom:"0",width:"100%",borderTopRightRadius:" 2px",color:"black",marginTop:"5px"}},i.a.createElement("p",{className:" ".concat(o?null:"shine"," w-100 "),style:o?{}:{minHeight:"30px"}},o?t.name:" ")))}var St=function(){var e=Object(d.d)((function(e){return e.posts})),t=e.total_pages,a=e.images,n=e.isLoading,o=jt(),c=Number(o.get("page")||1),l=o.get("image_name")||"",u=Object(d.c)();if(Object(r.useEffect)((function(){var e;l.length>0?(u((e=l,function(){var t=Object(m.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"FETCH_IMAGES_BY_SEARCH",payload:{image_name:e}}),a({type:"END_LOADING"})}catch(n){console.log(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),u(x(c,l))):(u(O()),u(x(c)))}),[l,u,c]),n)return i.a.createElement(Nt,null);if(0===a.length)return i.a.createElement("p",null,"No Images");var g=function(e){localStorage.setItem("scrollPosition",String(window.pageYOffset))};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-columns text-white mb-3 min-vh-75"},a.map((function(e){return i.a.createElement("div",{key:e.id,className:"card border-0 py-2"},i.a.createElement(s.a,null,i.a.createElement(s.b,{to:"/image/".concat(e.id),onClick:g},i.a.createElement(kt,{img:e}))))}))),i.a.createElement(yt,{totalPages:t,currentPage:c}))},_t=a(209);function Ct(){var e=jt(),t=Object(N.g)(),a=Object(r.useState)(""),n=Object(l.a)(a,2),o=n[0],c=n[1],d=e.get("image_name")||"";Object(r.useEffect)((function(){c(""!==d?d:"")}),[d]);return i.a.createElement("form",null,i.a.createElement("div",{className:"row my-2"},i.a.createElement("div",{className:"col-9 col-md-6 text-left mr-auto my-auto"},i.a.createElement("div",{className:"input-group input-group-sm "},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text bg-light text-dark",id:"inputGroup-sizing-sm"},i.a.createElement("i",{className:"fas fa-search"}))),i.a.createElement(_t.DebounceInput,{minLength:1,"aria-label":"Small",value:o,debounceTimeout:300,className:"form-control",onChange:function(e){c(e.target.value),t.push("/image?image_name=".concat(e.target.value))}})))))}function It(){return i.a.createElement(d.a,{store:Ot},i.a.createElement("div",{className:"container py-4"},i.a.createElement(Ct,null),i.a.createElement(St,null)))}var Mt,Wt=a(210),Bt=a.n(Wt);!function(e){e.SET_SELECTED_POPUP="SET_SELECTED_POPUP",e.CLOSE_SELECTED_POPUP="CLOSE_SELECTED_POPUP",e.SET_LOADING="SET_LOADING"}(Mt||(Mt={}));var At=function(e,t){switch(t.type){case Mt.SET_SELECTED_POPUP:return Object(T.a)(Object(T.a)({},e),{},{popup:t.payload.popup,selectedMarker:t.payload.selectedMarker,loading:!1});case Mt.CLOSE_SELECTED_POPUP:return Object(T.a)(Object(T.a)({},e),{},{popup:[],selectedMarker:null,loading:!1});case Mt.SET_LOADING:return Object(T.a)(Object(T.a)({},e),{},{loading:!0});default:return e}},Tt={popup:[],selectedMarker:null,selectedPopup:null,error:null,loading:!1},Dt=Object(r.createContext)({state:Tt,dispatch:function(){return null}}),Pt=function(e){var t=e.children,a=Object(r.useReducer)(At,Tt),n=Object(l.a)(a,2),o=n[0],c=n[1];return i.a.createElement(Dt.Provider,{value:{state:o,dispatch:c}},t)},Lt=function(e){var t=Object(r.useRef)({}),a={status:"idle",error:null,data:[],markers:void 0,popup_data:void 0,image:{},details:{header:"",copy:"",script:""}},n=Object(r.useReducer)((function(e,t){switch(t.type){case"FETCHING":return Object(T.a)(Object(T.a)({},a),{},{status:"fetching"});case"FETCHED":return Object(T.a)(Object(T.a)({},a),{},{status:"fetched",data:t.payload.image,image:t.payload.image,markers:t.payload.marker_positions,popup_data:t.payload.popups,details:t.payload.details});case"FETCH_ERROR":return Object(T.a)(Object(T.a)({},a),{},{status:"error",error:t.payload});default:return e}}),a),i=Object(l.a)(n,2),o=i[0],c=i[1];return Object(r.useEffect)((function(){var a=!1;if(e)return function(){var n=Object(m.a)(p.a.mark((function n(){var r,i,o,d,s,u,m;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c({type:"FETCHING"}),!t.current[e]){n.next=6;break}r=t.current[e],c({type:"FETCHED",payload:r}),n.next=23;break;case 6:return n.prev=6,n.next=9,B.get("/image/index.php",{params:{image_id:parseInt(e)}});case 9:if(i=n.sent,o=ne(i.data),d=Object(l.a)(o,2),s=d[0],u=d[1],t.current[e]=i,m={data:s,marker_positions:s.marker_positions,popups:u,image:{id:s.id,name:s.name,url:s.url},details:{header:i.data[0].page_header,copy:i.data[0].page_copy,script:i.data[0].page_script}},!a){n.next=15;break}return n.abrupt("return");case 15:c({type:"FETCHED",payload:m}),n.next=23;break;case 18:if(n.prev=18,n.t0=n.catch(6),!a){n.next=22;break}return n.abrupt("return");case 22:c({type:"FETCH_ERROR",payload:n.t0.message});case 23:case"end":return n.stop()}}),n,null,[[6,18]])})));return function(){return n.apply(this,arguments)}}()(),function(){a=!0}}),[e]),o},Ft=function(){var e=Object(r.useState)(window.innerWidth),t=Object(l.a)(e,2),a=t[0],n=t[1],i=function(){n(window.innerWidth)};return Object(r.useEffect)((function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[]),a<=768};var Rt=function(e){var t=e.src;return i.a.createElement("img",{src:t,alt:"empty",className:"img-fluid"})};var zt=function(e){var t=e.src;return i.a.createElement("div",{className:"video_wrapper_on_drag position-relative"},i.a.createElement("div",{className:"embed-container"},i.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:t,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"})))};function Ht(e){var t=e.children;return i.a.createElement("div",{className:"m-2"},t)}var Ut=function(e){var t=e.src,a=Object(r.useState)({value:he.EditorState.createEmpty()}),n=Object(l.a)(a,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){c({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(JSON.parse(t)))})}),[t]),o?i.a.createElement(Ht,null,i.a.createElement(Ee.Editor,{readOnly:!0,toolbarHidden:!0,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper headerWrapper",editorClassName:"demo-editor-custom"})):null};var Vt=function(e){var t=e.src,a=Object(r.useState)(),n=Object(l.a)(a,2),o=n[0],c=n[1],d=Object(r.useState)({value:he.EditorState.createEmpty()}),s=Object(l.a)(d,2),u=s[0],p=s[1];return Object(r.useEffect)((function(){if(null!==t){var e=JSON.parse(t);c(e.buttonUrlSrc),p({value:he.EditorState.createWithContent(Object(he.convertFromRaw)(e.buttonTextSrc))})}}),[t]),o?i.a.createElement(Ht,null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"btn buttonWidgetWrapper w-100 rounded-0 btn-info",href:o},i.a.createElement(Ee.Editor,{readOnly:!0,toolbarHidden:!0,handlePastedText:function(){return!1},editorState:u.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor  "}))):null},Jt=a(481),$t=a(479),Gt=a(480),qt=a(476),Kt=a(477),Yt=a(478);a(469),a(470),a(471),a(472);Gt.a.use([qt.a,Kt.a,Yt.a]);var Xt=function(e){var t=e.src,a=Object(r.useState)(),n=Object(l.a)(a,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){c(JSON.parse(t))}),[t]),o?i.a.createElement(Jt.a,{navigation:!0,scrollbar:{draggable:!0}},o.map((function(e){return i.a.createElement($t.a,{key:e.id},"image"===(t=e).slide_type?i.a.createElement(Zt,{slide:t}):"video"===t.slide_type?i.a.createElement(Qt,{slide:t}):void 0);var t}))):null},Qt=function(e){var t=e.slide;return i.a.createElement("div",{className:"embed-container"},i.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:t.src,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"}))},Zt=function(e){var t=e.slide;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"pb-3"},i.a.createElement("img",{src:t.src,alt:"empty",className:"img-fluid"}),i.a.createElement(ea,{caption:t.caption})))},ea=function(e){var t=e.caption;return i.a.createElement("p",null,t)},ta=function(e){e.isMobileScreen;var t=e.top,a=e.width,n=e.isLeft,r={top:t*a/2+25,right:n?"unset":-18,left:n?-17:"unset"};return i.a.createElement("div",{className:"pointBoxArrow smoothTransition",style:r},n?i.a.createElement("svg",{width:"20",className:"pointBoxArrowLeft d-block",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},i.a.createElement("path",{fill:"#ffffff",d:"M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"})):i.a.createElement("svg",{width:"20",className:"pointBoxArrowRight d-block",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},i.a.createElement("path",{fill:"#ffffff",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})))},aa=function(){var e=Object(r.useContext)(Dt).dispatch;return i.a.createElement("div",{className:"pointBoxClose exit",onClick:function(){return e({type:Mt.CLOSE_SELECTED_POPUP})}},i.a.createElement("div",{className:"pointBoxCloseIcon"},i.a.createElement("svg",{height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{fill:"none",stroke:"black",strokeWidth:"1"},i.a.createElement("path",{d:"M2 14L14 2M2 2l12 12"})))))},na=function(e){var t=Object(r.useState)(),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Ft(),m=Object(r.useContext)(Dt).state;return Object(r.useEffect)((function(){var t=e.width,a=e.naturalImageWidth,n=isNaN(e.markers.left*t/a)?0:e.markers.left*t/a,r=isNaN(e.markers.top*t/a)?0:e.markers.top*t/a/2;p||(n>=t/100*58?(o({top:r,right:t-n+25}),u(!1)):(o({top:r,left:n}),u(!0)))}),[e.markers.top,e.markers.left,e.width,e.naturalImageWidth,p]),i.a.createElement("div",{style:n,className:"pointBox showflip smoothTransition"},i.a.createElement(ta,{isLeft:s,isMobileScreen:p,top:e.markers.top,width:e.width/e.naturalImageWidth}),i.a.createElement(aa,null),i.a.createElement("div",{className:"popup_widgets"},m.popup.map((function(e){return i.a.createElement(i.a.Fragment,{key:e.id},function(e){switch(e.widget_type_id){case Y:return i.a.createElement(Rt,{src:e.src});case K:case Z:return i.a.createElement(Ut,{src:e.src});case Q:return i.a.createElement(Vt,{src:e.src});case X:case ee:return i.a.createElement(zt,{src:e.src});case te:return i.a.createElement(Xt,{src:e.src});default:return}}(e))}))))},ra=function(e){var t=Object(r.useState)(0),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(0),d=Object(l.a)(c,2),s=d[0],u=d[1];return Object(r.useEffect)((function(){o(isNaN(e.markers.top*e.width)?0:e.markers.top*e.width),u(isNaN(e.markers.left*e.width)?0:e.markers.left*e.width)}),[e.markers.top,e.markers.left,e.width]),i.a.createElement("div",{className:"item-point circle pulse2",style:{top:n,left:s},onClick:function(){return e.hotspotClicked(e.markers.m_id)}},i.a.createElement("div",null,i.a.createElement("a",{href:"#!","aria-label":"Click hotspot","aria-hidden":"true",onClick:function(e){return e.preventDefault()},className:"toggle"},"")))};var ia=function(e){var t=Object(N.i)().id,a=Object(r.useContext)(Dt),n=a.state,o=a.dispatch,c=Object(r.useState)(),d=Object(l.a)(c,2),s=d[0],u=d[1],p=Ye(),m=Object(l.a)(p,7),g=m[0],f=m[1],b=m[2],E=(m[3],m[4]),h=m[5],v=(m[6],Lt(t)),w=v.status,x=v.image,O=v.markers,j=v.popup_data,y=v.error,k=v.details;function S(e){e!==n.selectedMarker&&(o({type:Mt.SET_LOADING}),u(O.find((function(t){return t.m_id===e}))),o({type:Mt.SET_SELECTED_POPUP,payload:{popup:j.find((function(t){return t.id===e})).popup_content,selectedMarker:O.find((function(t){return t.m_id===e}))}}))}Object(r.useEffect)((function(){window.postscribe("#embedContainer",k.script)}),[k.script]),Object(r.useEffect)((function(){return e.setIsEmbedPage(!0)}),[e]);var _=i.a.createElement(i.a.Fragment,null,!f&&i.a.createElement(da,null),i.a.createElement("img",{ref:g,onLoad:b,src:x.url,alt:x.url,className:"target rounded img-fluid w-100 shadow"})),C=i.a.createElement(i.a.Fragment,null,f&&i.a.createElement(i.a.Fragment,null,O.map((function(e,t){return i.a.createElement(ra,{key:t,markers:e,width:h/E,hotspotClicked:S})})))),I=i.a.createElement(i.a.Fragment,null,n.popup.length>0&&i.a.createElement(na,{markers:s,width:h,naturalImageWidth:E})),M=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container text-left my-3 pl-md-0"},i.a.createElement("div",{className:"col-md-10 pl-md-0"},i.a.createElement("h2",{style:{fontWeight:"300"}},k.header),i.a.createElement("p",{className:"my-2",style:{fontWeight:"200"}},k.copy))));return i.a.createElement(i.a.Fragment,null,"fetched"===w&&M,i.a.createElement(la,null,"idle"===w&&i.a.createElement(da,null),"error"===w&&i.a.createElement("div",null,y),"fetching"===w&&i.a.createElement(da,null),"fetched"===w&&i.a.createElement(i.a.Fragment,null,_,i.a.createElement(ca,null,C),I)),i.a.createElement(oa,null))},oa=function(e){var t=e.children;return i.a.createElement("div",{className:"container bg-dark my-5",id:"embedContainer"},t)},ca=function(e){var t=e.children;return i.a.createElement("div",{className:"points_wrap"},t)},la=function(e){var t=e.children;return i.a.createElement("div",{className:"container embed-spacer px-0 text-center imageMarker position-relative"},t)},da=function(){return i.a.createElement("div",{className:"text-center w-100 d-flex shine",style:{minHeight:"780px"}})};var sa={popup:null,selectedMarker:null,selectedPopup:null,error:null,loading:!1};Object(r.createContext)(sa);function ua(){return i.a.createElement("div",{className:"text-center mx-auto col-10"},i.a.createElement("img",{alt:"not found",src:Bt.a,className:"text-center img-fluid"}))}var pa=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),c=Object(l.a)(o,2),u=c[0],p=(c[1],Object(r.useState)(!1)),m=Object(l.a)(p,2),g=m[0],f=m[1];return Object(r.useEffect)((function(){u||localStorage.getItem("token")&&nt().then((function(e){n(!0)})).catch((function(e){console.log(e),n(!1)}))})),i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,null,!g&&i.a.createElement(d.a,{store:Ot},i.a.createElement(y,{userLoggedIn:a,isDemo:u,logout:function(){n(!1),localStorage.removeItem("token")}})),i.a.createElement(N.d,null,i.a.createElement(N.b,{path:"/",exact:!0,component:I}),i.a.createElement(rt,{path:"/editor",exact:!0,component:It,setUserLoggedIn:n}),i.a.createElement(rt,{path:"/image",exact:!0,component:It,setUserLoggedIn:n}),i.a.createElement(rt,{path:"/image/:id",exact:!0,component:gt,setUserLoggedIn:n}),i.a.createElement(N.b,{path:"/embed/:id",exact:!0,render:function(){return i.a.createElement(Pt,null,i.a.createElement(ia,{setIsEmbedPage:f}))}}),i.a.createElement(N.b,{path:"/login",render:function(e){return i.a.createElement(et,{setUserLoggedIn:n})}}),i.a.createElement(rt,{path:"/dashboard",component:tt,setUserLoggedIn:n}),i.a.createElement(rt,{path:"/create",component:mt,setUserLoggedIn:n}),i.a.createElement(N.b,{path:"/*",component:ua}))))};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(pa,null)),document.getElementById("root"))},49:function(e,t,a){}},[[216,1,2]]]);