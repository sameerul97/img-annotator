(this["webpackJsonpimage-annotator"]=this["webpackJsonpimage-annotator"]||[]).push([[0],{207:function(e,t,a){e.exports=a.p+"static/media/page_not_found.8781fc85.svg"},213:function(e,t,a){e.exports=a(468)},46:function(e,t,a){},468:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),i=a.n(o),c=a(1),l=a(21);var d=function(e){var t=e.name,a=e.to,n=e.onclickcallback,o=void 0!==n&&n;return r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,to:a,className:"nav-link",activeClassName:"nav-link active",onClick:o||null},t))},s=function(e){return r.a.createElement(l.a,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-info"},r.a.createElement(l.c,{to:"/",className:"navbar-brand"},r.a.createElement("span",{role:"img","aria-label":"img"},"\ud83d\ude80"),"Img-annotator"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement(d,{name:"Home",to:"/"}),e.userLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(d,{name:"View All",to:"/image"}),r.a.createElement(d,{name:"Create",to:"/create"}),r.a.createElement(d,{name:"Dashboard",to:"/dashboard"})):null,e.isDemo?r.a.createElement(r.a.Fragment,null,r.a.createElement(d,{name:"View All",to:"/images"})):null),r.a.createElement("ul",{className:"navbar-nav ml-auto"},e.userLoggedIn||e.isDemo?null:r.a.createElement(d,{name:"Login",to:"/login"}),e.userLoggedIn&&r.a.createElement(d,{name:"Logout",to:"/login",onclickcallback:function(){e.logout()}})))))},u=a(18);var p=function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",bottom:0,right:0}},r.a.createElement("i",{className:"text-primary fas fa-plus-circle fa-3x m-2"})))},m=a(198),g={labels:["Kiss","Absolute","Magic","Hits"],datasets:[{data:[300,100,100,200],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#0e25ff"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#0e25ff"]}]};var f=function(){return r.a.createElement("div",null,r.a.createElement(m.Pie,{onElementsClick:function(e){console.log("Doughnut clicked",e)},data:g,width:100,height:500,options:{maintainAspectRatio:!1,tooltips:{callbacks:{title:function(e,t){return t.labels[e[0].index]},label:function(e,t){return t.datasets[0].data[e.index]}},backgroundColor:"#FFF",titleFontSize:16,titleFontColor:"#0066ff",bodyFontColor:"#000",bodyFontSize:14,displayColors:!1}}}))};var b=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center mt-2"},r.a.createElement("p",{className:"mb-0"},"Click labels below to interact")),r.a.createElement(f,null),r.a.createElement(p,null))},E=a(11),h=a.n(E),v=a(19),w=a(119),x=a.n(w);var O=function(){var e=window.location.href.split("/")[2];return"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e?"https://creative.bauermedia.co.uk/scrollmagic/img-annotator-v5/api":"demomatthobbsnet.eu-west-2.elasticbeanstalk.com"===e?"http://demomatthobbsnet.eu-west-2.elasticbeanstalk.com/img-annotator-master/server/api":"http://localhost/api"}(),j=(function(){var e=window.location.href.split("/")[2];"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e||("demomatthobbsnet.eu-west-2.elasticbeanstalk.com"===e||"http://".concat(e,"/#"))}(),function(){var e=window.location.href.split("/")[2];return"planetradio.co.uk"===e||"creative.bauermedia.co.uk"===e?"https://creative.bauermedia.co.uk/scrollmagic/img-annotator-v5/api":"http://localhost/api"}()),y=localStorage.getItem("token"),k=x.a.create({baseURL:O});k.interceptors.request.use((function(e){return y&&(e.headers.Authorization=localStorage.getItem("token")),e}));var N=k;function S(e){var t=e.img,a=(e.index,Object(n.useState)(!1)),o=Object(c.a)(a,2),i=o[0],l=o[1];return r.a.createElement("div",{style:{position:"relative"}},i?null:r.a.createElement("div",{className:"text-center w-100 d-flex shine",style:{minHeight:"250px"}}),r.a.createElement("img",{style:i?{}:{display:"none"},src:t.url,onLoad:function(){return l(!0)},alt:"empty",className:"card-img img-fluid shadow "}),r.a.createElement("div",{className:"text-left ",style:{bottom:"0",width:"100%",borderTopRightRadius:" 2px",color:"black",marginTop:"5px"}},r.a.createElement("p",{className:" ".concat(i?null:"shine"," w-100 "),style:i?{}:{minHeight:"30px"}},i?t.name:" ")))}var _=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),d=Object(c.a)(i,2),s=d[0],u=d[1],p=function(e){localStorage.setItem("scrollPosition",window.pageYOffset)};return Object(n.useEffect)((function(){(function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/allimages/index.php",{params:{},headers:{Authorization:localStorage.getItem("token")}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){e.data.length>0&&(u(e.data),function(){var e=localStorage.getItem("scrollPosition");e&&(window.scrollTo(0,parseInt(e)),localStorage.removeItem("scrollPosition"))}())})).catch((function(e){o(!0)}))}),[]),r.a.createElement("div",{className:"container my-5 "},r.a.createElement("div",{className:"card-columns text-center text-white"},!a&&r.a.createElement(r.a.Fragment,null,s.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"card border-0 py-2"},r.a.createElement(l.a,null,r.a.createElement(l.b,{to:"/image/".concat(e.id),onClick:p},r.a.createElement(S,{img:e}))))})))),a&&r.a.createElement("div",{className:"w-50 alert alert-danger",role:"alert"},"Error, unable to load images"))};var C=function(){return r.a.createElement("div",null,r.a.createElement(_,null))},I=a(22),M=a(5),W=a(9),B=a.n(W),A=(a(46),{getImageMetric:function(e,t){var a=new Image;a.src=B()(".imageMarker").find(".target").attr("src"),a.onload=function(){var e=a.naturalWidth,n=a.naturalHeight,r=B()(".imageMarker img").width(),o=r/e*100,i={width:e,height:n,getWidthLess:B()(".imageMarker img").width(),setPersenWidth:r/e*100,setHeight:n*o/100};t(i)}},positionMarkers:function(e){console.log(e),A.getImageMetric(B()(".imageMarker"),(function(t){for(var a=0;a<e.current.length;a++)try{if(null!==e.current[a]){var n=parseFloat(e.current[a].attributes["data-top"].value)*t.setPersenWidth/100,r=parseFloat(e.current[a].attributes["data-left"].value)*t.setPersenWidth/100;e.current[a].setAttribute("data-x",0),e.current[a].setAttribute("data-y",0),B()(".imageMarker .circle").css("transform","translate(0px , 0px)"),B()(e.current[a]).css({top:n,left:r})}}catch(o){console.log(o)}}))},positionPopup:function(){var e=Object(v.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.getImageMetric(B()(".imageMarker"),(function(e){var n=parseInt(t.top)*e.setPersenWidth/100,r=parseInt(t.left)*e.setPersenWidth/100;a({top:parseInt(n),left:parseInt(r)})}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),adjustPopupBoxContainer:function(e,t,a){A.getImageMetric(B()(".imageMarker"),(function(n){var r=parseFloat(t.top)*n.setPersenWidth/100,o=parseFloat(t.left)*n.setPersenWidth/100,i=B()("#popup"+e),c=B()(i).find(".pointBoxArrow");B()(c).find(".pointBoxArrowRight").hide(),B()(c).find(".pointBoxArrowLeft").hide(),B()(c).css({right:""}),B()(c).css({left:""}),B()(i).css({top:"",right:"",left:""}),window.innerWidth>768&&(o>=n.getWidthLess/100*58?(B()(i).css({top:r/2,right:B()(".imageMarker").width()-o+25}),B()(c).find(".pointBoxArrowRight").show(),B()(c).css({right:-20})):(B()(i).css({top:r/2,left:o}),B()(c).find(".pointBoxArrowLeft").show(),B()(c).css({left:-17}))),B()(c).css({top:parseFloat(t.top)*n.setPersenWidth/100/2+25}),a()}))},registerOnClick:function(e){B()(e).each((function(e,t){B()(t,this).on("click",(function(e){e.preventDefault();var t=B()(this).closest(".item-point").data("popupid"),a=B()(t);a.addClass("d-block"),a.addClass("showflip");var n=B()(this).closest(".item-point").data("popupid"),r=B()(n);r.find(".exit").on("click",(function(e){e.preventDefault(),B()('[data-popupid="'+n+'"]').removeClass("active"),r.removeClass(""),r.addClass(""),a.removeClass("d-block"),a.removeClass("showflip"),B()(r).fadeOut()}))}))}))},imageMarker:function(){B()(B()(".imageMarker")).each((function(e,t){var a=B()(t).find(".item-point");A.positionMarkerAndPopup(a,t,(function(){B()(t).find(".toggle")}))}))}}),P=A,D=a(64),T=a.n(D),F=function(e){return r.a.createElement("div",{className:"col-10s d-flex align-items-center  mx-auto",style:e.style},e.children)},R=function(){return r.a.createElement(F,{style:{background:"#44444485",borderRadius:"4px",padding:"16px"}},r.a.createElement("div",null,"Add Header"))},L=function(){return r.a.createElement(F,{style:{background:"#44444463",borderRadius:"4px",padding:"12px"}},r.a.createElement("div",null,"Add Text (Copy)"))},z=function(){return r.a.createElement(F,{style:{background:"#ffffff57",borderRadius:"4px",padding:"40px 16px",backgroundSize:"cover",backgroundPositionY:"-30px",backgroundImage:"url('https://images.unsplash.com/photo-1439792675105-701e6a4ab6f0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1352&q=80')"}},r.a.createElement("div",null,"Add image"))},H=function(){return r.a.createElement(F,{style:{background:"#ffffff57",borderRadius:"4px",padding:"40px 16px",backgroundSize:"cover",backgroundImage:"url('https://media3.giphy.com/media/1kkxWqT5nvLXupUTwK/giphy.gif?cid=ecf05e47xuqieva7e9fn36dk27ucx7ccdgdo3l4g94si72xr&rid=giphy.gif')"}},r.a.createElement("div",null,"Add Video"))},U=function(){return r.a.createElement(F,{style:{background:"#ffffff57",borderRadius:"4px",padding:"16px"}},r.a.createElement("div",null,"Add Button"))},V=function(){return r.a.createElement(F,{style:{background:"#ffffff57",borderRadius:"4px",padding:"16px"}},r.a.createElement("div",null,"CarouselWidget"))},J="widget_id_1",$="widget_id_2",q="widget_id_3",G="widget_id_4",K="widget_id_5",Q="widget_id_6",Y="widget_id_7",X=[{id:J,widget:r.a.createElement(R,null)},{id:K,widget:r.a.createElement(L,null)},{id:$,widget:r.a.createElement(z,null)},{id:q,widget:r.a.createElement(H,null)},{id:G,widget:r.a.createElement(U,null)},{id:Y,widget:r.a.createElement(V,null)}];function Z(e){var t={},a=[];t.url=e[0].url,t.name=e[0].name,t.id=e[0].Image_Id,t.marker_positions=[],t.header=e[0].page_header,t.copy=e[0].page_header;var n=[];for(var r in e){var o=parseInt(e[r].Marker_id),i=!1;for(var c in n)if(parseInt(n[c])===o){i=!0;break}i||n.push(o)}for(var l in n){var d=parseInt(n[l]);for(var s in e)if(parseInt(e[s].Marker_id)===d){t.marker_positions[l]={m_id:d,top:parseFloat(e[s].markerTop),left:parseFloat(e[s].markerLeft),color:e[s].color,animation_type:e[s].animation_type,marker_type:e[s].marker_type,marker_image:e[s].marker_image,background_color:e[s].background_color,border_radius:e[s].border_radius,popup_id:d},a.push({id:d,popup_content:[]});break}var u=[];for(var p in e)if(parseInt(e[p].Markers_id)===d){if(e[p].widget_type_id===Y){var m=JSON.parse(e[p].content);e[p].content=JSON.stringify(m.sort((function(e,t){return e.order_no-t.order_no})))}u.push({id:e[p].Popup_Contents_id,widget_type_id:e[p].widget_type_id,order_no:e[p].order_no,src:e[p].content,marker_id:d})}a[l].popup_content=u}for(var g in a){var f=a[g].popup_content;a[g].popup_content=f.sort((function(e,t){return parseInt(e.order_no)-parseInt(t.order_no)}))}return[t,a]}var ee=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),u=s[0],p=s[1];Object(n.useEffect)((function(){e.selectedMarker||l(!1),u!==parseInt(e.selectedMarker.markerId)&&l(!1),p(e.markers.m_id)}),[u,l,e.markers.m_id,e.selectedMarker.markerId,e.selectedMarker]);var m={background:e.markers.color};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:t,"data-key":e.markers.m_id,key:e.markers.m_id,id:e.markers.m_id,className:"item-point circle ".concat(e.popupViewEnabled?"pulse2":""," ").concat(!e.popupViewEnabled&&i?"showBorder":""),style:m,"data-top":e.markers.top,"data-left":e.markers.left,"data-popupid":"#popup"+e.markers.popup_id,onClick:e.popupViewEnabled?function(t){e.popupModeMarkerSelected&&e.popupModeMarkerSelected.popupId!==e.markers.popup_id?(e.setShowToast(!0),setTimeout((function(){return e.setShowToast(!1)}),4500)):e.setPopupModeMarkerSelected({markerId:u,popupId:e.markers.popup_id})}:function(t){e.setSelectedMarker({markerId:u,popupId:e.markers.popup_id}),l(!0)}},e.popupViewEnabled&&r.a.createElement("div",null,r.a.createElement("a",{href:"#!",onClick:function(e){e.preventDefault()},className:"toggle"}," "))))}));function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ne=r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),re=r.a.createElement("path",{d:"M14 6h2v2h5a1 1 0 0 1 1 1v7.5L16 13l.036 8.062 2.223-2.15L20.041 22H9a1 1 0 0 1-1-1v-5H6v-2h2V9a1 1 0 0 1 1-1h5V6zm8 11.338V21a1 1 0 0 1-.048.307l-1.96-3.394L22 17.338zM4 14v2H2v-2h2zm0-4v2H2v-2h2zm0-4v2H2V6h2zm0-4v2H2V2h2zm4 0v2H6V2h2zm4 0v2h-2V2h2zm4 0v2h-2V2h2z",fill:"rgba(255,255,255,1)"}),oe=function(e){var t=e.svgRef,a=e.title,n=ae(e,["svgRef","title"]);return r.a.createElement("svg",te({viewBox:"0 0 24 24",width:20,height:20,ref:t},n),a?r.a.createElement("title",null,a):null,ne,re)},ie=r.a.forwardRef((function(e,t){return r.a.createElement(oe,te({svgRef:t},e))})),ce=(a.p,a(35)),le=a(23);var de=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},se=function(e){var t="https://images.unsplash.com/photo-1509983165097-0c31a863e3f3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),u=s[0],p=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],E=Object(n.useState)(""),h=Object(c.a)(E,2),v=h[0],w=h[1],x=Object(n.useState)(!1),O=Object(c.a)(x,2),j=O[0],y=O[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),S=N[0],_=N[1],C=Object(n.useState)(!1),M=Object(c.a)(C,2),W=M[0],B=M[1],A=Object(n.useState)(""),P=Object(c.a)(A,2),D=(P[0],P[1]),T=Object(n.useState)(!1),F=Object(c.a)(T,2),R=F[0],L=F[1],z=function(e,t){if(e.target.files&&e.target.files[0]){var a=e.target.files[0];y(e.target.files[0]),L(!1),_(URL.createObjectURL(a))}t&&(y(e.target.value),_(e.target.value),L(!0))};return Object(n.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(n.useLayoutEffect)((function(){return null!==e.data.src?(y(e.data.src),_(e.data.src),D(e.data.id),w(e.data.src)):(y(t),w(t)),function(){}}),[e.data.src,e.data.id,t,D]),Object(n.useLayoutEffect)((function(){var e=!0,t=new Image;return t.src=j,t.onload=function(){e&&(t.naturalWidth>t.naturalHeight?B(!1):t.naturalWidth<t.naturalHeight?B(!0):B(!1))},function(){e=!1}}),[j,y,e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(i?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(f?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(p(!0),b(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(p(!1),b(!1))}},i&&u?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),l(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!i&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),l(!0),y(v),_(v),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,j,e.data.widget_type_id,R),l(!0),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!i&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"image Url","aria-label":"image Url","aria-describedby":"addon-wrapping",value:j,onChange:function(e){return z(e,!0)}})),r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-upload"}))),r.a.createElement("label",{className:"btn btn-default btn-sm"},r.a.createElement("input",{type:"file",className:"form-control. w-100",placeholder:"upload image","aria-label":"upload image","aria-describedby":"addon-wrapping",onChange:function(e){return z(e)}})))),r.a.createElement(de,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),j&&r.a.createElement("img",{src:S,alt:"empty",className:"img-fluid",style:W?{maxWidth:"220px"}:{}}))};var ue=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},pe=function(e){var t="https://www.youtube.com/embed/lvfB_p0IiHM",a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),u=s[0],p=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],E=Object(n.useState)(""),h=Object(c.a)(E,2),v=h[0],w=h[1],x=Object(n.useState)(!1),O=Object(c.a)(x,2),j=O[0],y=O[1];return Object(n.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(n.useLayoutEffect)((function(){return null!==e.data.src?(y(e.data.src),w(e.data.src)):(y(t),w(t)),function(){}}),[e.data.src,e.data.id,t]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(i?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(f?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(p(!0),b(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(p(!1),b(!1))}},i&&u?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),l(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!i&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:1}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),l(!0),y(v),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,j),l(!0),p(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!i&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"video Url","aria-label":"video Url","aria-describedby":"addon-wrapping",value:j,onChange:function(e){return function(e){var t=e.target.value,a=t.split("/")[2];y("vimeo.com"===a?"https://player.vimeo.com/video/"+t.split("/")[3]:"www.youtube.com"===a?"https://www.youtube.com/embed/"+t.split("?v=")[1]:e.target.value)}(e)}}))),r.a.createElement(ue,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),y&&r.a.createElement("div",{className:"video_wrapper_on_drag",style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},r.a.createElement("div",{className:"embed-container"},r.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:j.toString(),style:e.popupEditModeSelected?{zIndex:-1}:{},allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"}))))},me=a(30),ge=a(6);var fe=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},be=function(e){var t=Object(n.useState)({value:ge.EditorState.createEmpty()}),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)(!1),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(""),x=Object(c.a)(w,2),O=x[0],j=x[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Lorem empsum",type:"header-three",depth:0,inlineStyleRanges:[{offset:0,length:12,style:"color-rgb(52,58,64)"},{offset:0,length:12,style:""},{offset:0,length:12,style:"fontsize-1.5rem"},{offset:0,length:12,style:'fontfamily--apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'}],entityRanges:[],data:{"text-align":"left"}}],entityMap:{}};return null!==e.data.src?(i({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(e.data.src)))}),j(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(e.data.src))))):(i({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t))}),j(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t)))),function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),u(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),u(!0),i({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(ge.convertToRaw)(o.value.getCurrentContent())),e.data.widget_type_id),u(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(me.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper headerWrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){i({value:e}),localStorage.setItem("editorState_Header",JSON.stringify(Object(ge.convertToRaw)(e.getCurrentContent())))},toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,className:"bg-info rounded-0",component:void 0,dropdownClassName:"undefined",options:["bold","italic","underline"]},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right"]}}}),!s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(fe,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var Ee=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},he=function(e){var t=Object(n.useState)({value:ge.EditorState.createEmpty()}),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)(!1),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(""),x=Object(c.a)(w,2),O=x[0],j=x[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque, assumenda illo, vitae maiores itaque aliquid ad voluptates sit hic beatae, non tempora rerum ipsa? Maxime?",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"left"}}],entityMap:{}};return null!==e.data.src?(i({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(e.data.src)))}),j(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(e.data.src))))):(i({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t))}),j(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t)))),function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),u(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),u(!0),i({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){console.log(e.data.id),t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(ge.convertToRaw)(o.value.getCurrentContent())),e.data.widget_type_id),u(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(me.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor-custom",toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,className:"bg-info rounded-0",component:void 0,dropdownClassName:"undefined",options:["bold","italic","underline"]},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right"]}},onEditorStateChange:function(e){i({value:e}),localStorage.setItem("editorState_Paragraph",JSON.stringify(Object(ge.convertToRaw)(e.getCurrentContent())))}}),!s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(Ee,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var ve=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},we=function(e){var t=Object(n.useState)(!0),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)("https:google.com"),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(""),x=Object(c.a)(w,2),O=x[0],j=x[1],y=Object(n.useState)({value:ge.EditorState.createEmpty()}),k=Object(c.a)(y,2),N=k[0],S=k[1],_=Object(n.useState)(""),C=Object(c.a)(_,2),M=C[0],W=C[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Some test button",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"center"}}],entityMap:{}};if(null!==e.data.src){var a=JSON.parse(e.data.src);v(a.buttonUrlSrc),j(a.buttonUrlSrc),S({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(a.buttonTextSrc))}),W(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(a.buttonTextSrc)))}else j("https://google.com"),S({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t))}),W(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t)));return function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(o?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(g?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(u(!0),f(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(u(!1),f(!1))}},o&&s?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),i(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!o&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),i(!0),S({value:M}),v(O),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify({buttonTextSrc:Object(ge.convertToRaw)(N.value.getCurrentContent()),buttonUrlSrc:h}),e.data.widget_type_id),i(!0),u(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),!o&&r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Button Url","aria-label":"Button Url","aria-describedby":"addon-wrapping",value:h,onChange:function(e){return function(e){v(e.target.value)}(e)}})),r.a.createElement("div",{className:"video_wrapper_on_drag",style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},r.a.createElement("a",Object.assign({},o?{href:h,target:"_blank"}:{},{className:"btn buttonWidgetWrapper w-100 rounded-0\n          ".concat(o?" btn-info":" text-dark bg-white"),style:e.popupEditModeSelected?{position:"relative",zIndex:-1}:{}}),r.a.createElement(me.Editor,{readOnly:o,toolbarHidden:o,handlePastedText:function(){return!1},editorState:N.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor   ".concat(o?" ":"changeCursor ","  "),onEditorStateChange:function(e){S({value:e})},toolbar:{options:[]}}))),r.a.createElement(ve,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var xe=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},Oe=function(e){var t=Object(n.useState)({value:ge.EditorState.createEmpty()}),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)(!1),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(""),x=Object(c.a)(w,2),O=x[0],j=x[1];return Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:"Free mode",type:"header-three",depth:0,inlineStyleRanges:[{offset:0,length:10,style:""},{offset:0,length:10,style:"fontsize-.75rem"},{offset:0,length:10,style:"fontsize-24"},{offset:0,length:10,style:"fontfamily-Arial"},{offset:0,length:10,style:"color-rgb(97,189,109)"},{offset:0,length:10,style:"bgcolor-rgb(247,218,100)"}],entityRanges:[{offset:0,length:10,key:0}],data:{"text-align":"left"}}],entityMap:{0:{type:"LINK",mutability:"MUTABLE",data:{url:"http://google.com",targetOption:"_blank"}}}};return null!==e.data.src?(i({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(e.data.src)))}),j(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(e.data.src))))):(i({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t))}),j(ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t)))),function(){}}),[e]),r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative  ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(s?" px-2":" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(h?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(f(!0),v(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(f(!1),v(!1))}},s&&g?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),u(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!s&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0,zIndex:11}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-danger text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),u(!0),i({value:O}),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("a",{href:"#!",className:"badge badge-success text-white  border-0 rounded popupWidget_ExitButton","data-toggle":"tooltip","data-placement":"right",title:"Save changes",onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),e.popupContentChanged(e.data.id,JSON.stringify(Object(ge.convertToRaw)(o.value.getCurrentContent()))),u(!0),f(!1),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(me.Editor,{readOnly:s,toolbarHidden:s,handlePastedText:function(){return!1},editorState:o.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper",editorClassName:"demo-editor-custom",onEditorStateChange:function(e){i({value:e})},toolbar:{options:["inline","blockType","fontSize","fontFamily","textAlign","colorPicker","link","emoji","history"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline","strikethrough"]}}}),!s&&r.a.createElement("div",{className:"py-2"}),r.a.createElement(xe,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}))};var je=function(e){var t=Object(n.useState)(!0),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)(!1),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(),x=Object(c.a)(w,2),O=x[0],j=x[1],y=Object(n.useState)([]),k=Object(c.a)(y,2),N=k[0],S=k[1],_=Object(n.useState)(!1),C=Object(c.a)(_,2),M=C[0],W=C[1],B=Object(n.useState)(!1),A=Object(c.a)(B,2),P=A[0],D=A[1],T=Object(n.useState)(!1),F=Object(c.a)(T,2),R=F[0],L=F[1],z=Object(n.useState)(!1),H=Object(c.a)(z,2),U=H[0],V=H[1],J=Object(n.useState)([{}]),$=Object(c.a)(J,2),q=$[0],G=$[1];Object(n.useEffect)((function(){return window.$((function(){window.$("body").tooltip({selector:'[data-toggle="tooltip"]',delay:{show:0,hide:100},trigger:"hover",animation:!0})})),function(){window.$("div[role=tooltip]").remove()}}),[]),Object(n.useLayoutEffect)((function(){return v(JSON.parse(e.data.src)),G(JSON.parse(e.data.src)),function(){}}),[e.data.src,e.data.id]),Object(n.useEffect)((function(){S((function(e){return Array(O).fill().map((function(t,a){return e[a]||Object(n.createRef)()}))}))}),[O]),Object(n.useEffect)((function(){h&&j(h.length)}),[h,N]),Object(n.useEffect)((function(){if(M&&(N[N.length-1].current.scrollIntoView({behavior:"smooth",block:"end",inline:"center"}),setTimeout((function(){W(!1)}),250)),R){var e;for(var t in N)N[t]===U.reactRef&&(e=N[t]);setTimeout((function(){e.current.scrollIntoView({behavior:"smooth",inline:"center"})}),250)}}),[M,N,R,U.reactRef]);var K=function(t,a,n,r,o,i,c,l,d){D(!0),e.updateASlideInCarousel(e.data.id,t,a,n,r,o,i,c,l,(function(e,t,a,n){e||(D(!1),d(a,n))}))},Q=function(t,a){if(D(!0),h.length<=2)return D(!1),void a(!1);e.deleteASlideInCarousel(e.data.id,t,(function(e){e||D(!1)}))};return r.a.createElement("div",{className:"smoothTransition text-dark whiteBackground position-relative pt-0 ".concat(e.popupEditModeSelected?"position-relative ":" py-1null "," ").concat(o?null:" popupEditingWidget px-1 highlightedBackground ","\n          ").concat(g?" highlightedBackground ":null),onMouseEnter:function(t){e.popupEditModeSelected||(u(!0),f(!0))},onMouseLeave:function(t){e.popupEditModeSelected||(u(!1),f(!1))},style:o?{}:{paddingBottom:"40px"}},o&&s?r.a.createElement(le.a.div,{initial:{opacity:.1,x:10},animate:{opacity:1,x:0},transition:{duration:.25},className:"position-absolute popupWidget_EditButton"},r.a.createElement("a",{href:"#!",className:"badge badge-info text-white px-0 border rounded position-absolute popupWidget_EditButton",id:e.widgetId,onClick:function(t){t.preventDefault(),i(!1),e.setPopupWidgetBeingEdited((function(t){return[].concat(Object(I.a)(t),[{id:e.data.id}])}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white px-2 far fa-edit fa-1x"}," "))):void 0,!o&&r.a.createElement("div",{className:"row position-absolute",style:{bottom:"6px",left:"8px",margin:0}},r.a.createElement("div",{className:"col pl-0 pr-2 no-gutters"},r.a.createElement("button",{className:" border-0 rounded popupWidget_ExitButton btn-sm btn badge badge-secondary text-white","data-toggle":"tooltip","data-placement":"left",title:"Cancel changes",disabled:R,onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove(),i(!0),u(!1),v(q),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))},"aria-disabled":"true"},r.a.createElement("i",{className:"text-white m-auto far fa-times-circle fa-1x"}," "))),r.a.createElement("div",{className:"col pl-0  no-gutters"},r.a.createElement("button",{className:"text-white  border-0 rounded popupWidget_ExitButton btn-sm btn badge badge-success text-white","data-toggle":"tooltip","data-placement":"right",title:"Save changes",disabled:R,onClick:function(t){t.preventDefault(),window.$("div[role=tooltip]").remove();var a=[],n=h;for(var r in n)h[r].order_no=r,a.push(h[r]);i(!0),u(!1),e.updateCarouselSlidesOrder(e.data.id,JSON.stringify(a),e.data.widget_type_id),e.setPopupWidgetBeingEdited((function(t){return t.filter((function(t){return t.id!==e.data.id}))}))}},r.a.createElement("i",{className:"text-white m-auto far fa-check-circle fa-1x"}," ")))),r.a.createElement(Ne,{deleteAWidget:e.deleteAWidget,widgetId:e.data.id,popupEditModeSelected:e.popupEditModeSelected}),h&&r.a.createElement(r.a.Fragment,null,P&&r.a.createElement("div",{className:"position-absolute h-100 w-100 smoothTransition",style:{background:"#ffffffad",zIndex:"9"}}),P&&r.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},r.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement(Se,{readMode:o,addNewImage:function(t){D(!0),e.addASlideInCarousel(e.data.id,t,(function(e){e||(D(!1),W(!0))}))},isSlideBeingEdited:R}),r.a.createElement(ce.a,{onDragEnd:function(e){if(e.destination){var t=_e(h,e.source.index,e.destination.index);v(t)}}},r.a.createElement(ce.c,{droppableId:"droppable",direction:"horizontal"},(function(e,t){return r.a.createElement("div",Object.assign({ref:e.innerRef,style:Ie(t.isDraggingOver,R)},e.droppableProps),h.length>0&&r.a.createElement(r.a.Fragment,null,h.map((function(e,t){return r.a.createElement(ce.b,{key:e.id,draggableId:e.id,index:t,isDragDisabled:o||R},(function(a,n){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:Ce(n.isDragging,a.draggableProps.style,o,R),id:e.id}),r.a.createElement("div",{ref:N[t],className:"position-relative h-100"},"image"===e.slide_type?r.a.createElement(ke,{slideData:e,readMode:o,deleteASlide:Q,updateASlide:K,setIsSlideBeingEdited:L,reactRef:N[t],setSlideBeingEdited:V}):r.a.createElement(ye,{slideData:e,readMode:o,deleteASlide:Q,updateASlide:K,setIsSlideBeingEdited:L,reactRef:N[t],setSlideBeingEdited:V})))}))}))),e.placeholder)})))))};function ye(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(""),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)(""),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(!1),x=Object(c.a)(w,2),O=(x[0],x[1]),j=Object(n.useState)(!1),y=Object(c.a)(j,2),k=y[0],N=y[1],S=Object(n.useState)(!1),_=Object(c.a)(S,2),C=_[0],I=_[1],M=Object(n.useState)(!1),W=Object(c.a)(M,2),B=(W[0],W[1]),A=Object(n.useState)(!1),P=Object(c.a)(A,2),D=P[0];P[1];Object(n.useEffect)((function(){return i(e.slideData),N(e.slideData.src),f(e.slideData.src),v(e.slideData.caption),I(e.slideData.caption),B(!0),function(){B(!1)}}),[]);return r.a.createElement(r.a.Fragment,null,!e.readMode&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pb-1 text-md-left text-center"},r.a.createElement("div",{className:"row"},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){e.deleteASlide(o.id,(function(e){}))},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Delete")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},r.a.createElement("button",{id:o.id,className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-light text-dark",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){u(!0),e.setIsSlideBeingEdited(!0),e.setSlideBeingEdited({id:o.id,reactRef:e.reactRef})}},"Edit"))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){N(g),I(h),u(!1),e.setIsSlideBeingEdited(!1)},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Cancel")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},D&&r.a.createElement("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("button",{id:o.id,className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-success text-white",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){e.updateASlide(o.id,C,o.slide_type,!1,!1,!1,k,k!==g,(function(t,a){u(!1),e.setIsSlideBeingEdited(!1),f(t),O(t),v(a),I(a)}))}},"Save"))))),s&&r.a.createElement("div",{className:"mb-2 mt-1"},r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Image url","aria-label":"Image url","aria-describedby":"addon-wrapping",value:k,onChange:function(e){return function(e){var t=e.target.value,a=t.split("/")[2];N("vimeo.com"===a?"https://player.vimeo.com/video/"+t.split("/")[3]:"www.youtube.com"===a?"https://www.youtube.com/embed/"+t.split("?v=")[1]:e.target.value)}(e)}})))),r.a.createElement("div",{className:"smoothTransition ",style:e.readMode||s?{height:"auto",minWidth:"300px",minHeight:"300px"}:{minWidth:"250px",minHeight:"auto",marginTop:"0em"}},!1!==k&&r.a.createElement("div",{className:"video_wrapper_on_drag",style:e.readMode||s?{}:{position:"relative",zIndex:1}},r.a.createElement("div",{className:"embed-container"},r.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:k,style:e.readMode||s?{}:{zIndex:-1},allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"})))))}function ke(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(c.a)(l,2),s=d[0],u=d[1],p=Object(n.useState)(""),m=Object(c.a)(p,2),g=m[0],f=m[1],b=Object(n.useState)(""),E=Object(c.a)(b,2),h=E[0],v=E[1],w=Object(n.useState)(!1),x=Object(c.a)(w,2),O=x[0],j=x[1],y=Object(n.useState)(!1),k=Object(c.a)(y,2),N=k[0],S=k[1],_=Object(n.useState)(!1),C=Object(c.a)(_,2),I=C[0],M=C[1],W=Object(n.useState)(!1),B=Object(c.a)(W,2),A=B[0],P=B[1],D=Object(n.useState)(!1),T=Object(c.a)(D,2),F=T[0],R=T[1],L=Object(n.useState)(!1),z=Object(c.a)(L,2),H=z[0],U=z[1],V=Object(n.useState)(!1),J=Object(c.a)(V,2),$=J[0],q=J[1],G=Object(n.useState)({value:ge.EditorState.createEmpty()}),K=Object(c.a)(G,2),Q=K[0],Y=K[1];Object(n.useEffect)((function(){return i(e.slideData),j(e.slideData.src),S(e.slideData.src),f(e.slideData.src),v(e.slideData.caption),R(e.slideData.caption),U(!0),function(){U(!1)}}),[]),Object(n.useEffect)((function(){var t={blocks:[{key:"7pjmv",text:e.slideData.caption,type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{"text-align":"center"}}],entityMap:{}};Y({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(t))})}),[]),Object(n.useLayoutEffect)((function(){if(A){var e=new Image;e.src=O,q(!0),e.onload=function(){q(!1),M(!0)},e.onerror=function(){q(!1),M(!1)}}else M(!0);return function(){q(!1)}}),[O,A]);var X=function(e,t){if(e.target.files&&e.target.files[0]){var a=e.target.files[0];j(e.target.files[0]),P(!1),S(String(URL.createObjectURL(a)))}if(t){var n=o;n.src=e.target.value,i(n),j(e.target.value),P(!0),S(e.target.value)}};return r.a.createElement(r.a.Fragment,null,!e.readMode&&r.a.createElement(r.a.Fragment,null,H&&r.a.createElement("div",{className:"position-absolute h-100 w-100 smoothTransition",style:{background:"#ffffffad",zIndex:"9"}}),r.a.createElement("div",{className:"pb-1 text-md-left text-center"},H&&r.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},r.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"row"},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){e.deleteASlide(o.id,(function(e){}))},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Delete")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},r.a.createElement("button",{id:o.id,className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-light text-dark",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){u(!0),e.setIsSlideBeingEdited(!0),e.setSlideBeingEdited({id:o.id,reactRef:e.reactRef})}},"Edit"))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-6"},r.a.createElement("button",{className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-danger text-white",onClick:function(t){S(g),j(g),R(h),u(!1),e.setIsSlideBeingEdited(!1)},id:o.id,style:{padding:"5px 10px",borderRadius:"30px"}},"Cancel")),r.a.createElement("div",{className:"col-md-6 text-md-right text-center"},$&&r.a.createElement("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("button",{id:o.id,className:"btn-sm btn smoothTransition badge ml-0 badge-pill badge-success text-white",style:{padding:"5px 10px",borderRadius:"30px"},onClick:function(t){e.updateASlide(o.id,F,o.slide_type,O,A,O!==g,!1,!1,(function(t,a){u(!1),e.setIsSlideBeingEdited(!1),f(t),S(t),j(t),v(a),R(a)}))},disabled:O===g&&F===h||!1===I||$},"Save"))))),s&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-link"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Image url","aria-label":"Image url","aria-describedby":"addon-wrapping",value:O,onChange:function(e){return X(e,!0)},onKeyDown:function(e){9===e.keyCode&&e.preventDefault()}})),r.a.createElement("div",{className:"input-group flex-nowrap input-group-sm my-2 border rounded"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"addon-wrapping"},r.a.createElement("i",{className:"fas fa-upload"}))),r.a.createElement("label",{className:"btn btn-default btn-sm"},r.a.createElement("input",{type:"file",className:"form-control. w-100",placeholder:"upload image","aria-label":"upload image",accept:"image/*","aria-describedby":"addon-wrapping",onChange:function(e){return X(e)}}))))),g&&r.a.createElement("div",{className:"smoothTransition",style:e.readMode||s?{height:"auto",minHeight:"300px"}:{minHeight:"auto"}},r.a.createElement("img",{alt:"test",src:N,onLoad:function(){return U(!1)},className:" smoothTransition  ".concat(H?"opacity-0":"opacity-1 "),style:e.readMode||s?{height:"auto",width:"300px",minWidth:"300px"}:{height:"auto",width:"180px",minWidth:"180px"}}),H?r.a.createElement("div",{className:"position-absolute smoothTransition",style:{top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:10}},r.a.createElement("div",{className:"spinner-grow text-light",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):null),r.a.createElement("div",{className:"video_wrapper_on_drag smoothTransition text-center mt-2  ".concat(s?" bg-white text-black py-2 ":" text-white ","  "),style:e.popupEditModeSelected?{position:"relative",zIndex:1}:{}},r.a.createElement(me.Editor,{readOnly:!s,toolbarHidden:!s,handlePastedText:function(){return!1},editorState:Q.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor   ".concat(s?"changeCursor ":" ","  "),toolbar:{options:[],inline:{options:[]}},onEditorStateChange:function(e){Y({value:e});var t=Object(ge.convertToRaw)(e.getCurrentContent());console.log(t.blocks[0].text),R(t.blocks[0].text)},onTab:function(e){9===e.keyCode&&e.preventDefault()}})))}var Ne=function(e){return r.a.createElement(r.a.Fragment,null,e.popupEditModeSelected&&r.a.createElement("button",{className:"btn-sm btn btn-danger text-white px-0  rounded popupWidget_DeleteButton",id:e.widgetId,onClick:function(t){return e.deleteAWidget(t)}},r.a.createElement("i",{className:"text-white px-2 far fa-trash-alt fa-1x"}," ")))},Se=function(e){return r.a.createElement(r.a.Fragment,null,!e.readMode&&r.a.createElement("div",{className:"py-2 text-left"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-6 text-xl-left text-center"},r.a.createElement("button",{className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-secondary text-white bg-info",onClick:function(t){return e.addNewImage(!0)},style:{padding:"5px 10px",borderRadius:"30px"},disabled:e.isSlideBeingEdited},"Add Image Slide")),r.a.createElement("div",{className:"col-xl-6 text-xl-right text-center"},r.a.createElement("button",{className:"btn-sm smoothTransition btn badge ml-0 badge-pill badge-secondary text-white bg-info",onClick:function(t){return e.addNewImage(!1)},style:{padding:"5px 10px",borderRadius:"30px"},disabled:e.isSlideBeingEdited},"Add Video Slide")))))},_e=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(c.a)(r,1)[0];return n.splice(a,0,o),n},Ce=function(e,t,a,n){return Object(M.a)({userSelect:"none",margin:"0 ".concat(8,"px 0 0"),transition:"all 0.65s ease-in-out",padding:"".concat(8,"px"),background:e?"lightgreen":"#19a2b8"},t)},Ie=function(e,t){return{background:e?"lightblue":"white",display:"flex",padding:8,overflow:t?"hidden":"auto"}};var Me=function(e,t){var a=Object(n.useState)({items:{}}),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),u=s[0],p=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],E=Object(n.useState)([]),w=Object(c.a)(E,2),x=w[0],O=w[1];!function(e){var t=Object(n.useRef)(e);Object(n.useEffect)((function(){var a=Object.entries(e).reduce((function(e,a){var n=Object(c.a)(a,2),r=n[0],o=n[1];return t.current[r]!==o&&(e[r]=[t.current[r],o]),e}),{});Object.keys(a).length,t.current=e}))}(e),Object(n.useLayoutEffect)((function(){function t(){return(t=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.positionPopup(e.positions,(function(e){p({top:e.top+"px",left:e.left+"px"})}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}l({items:e.data.popup_content}),function(){t.apply(this,arguments)}()}),[e]),Object(n.useLayoutEffect)((function(){b(!0)}),[e.data.id,e.positions,f]),Object(n.useLayoutEffect)((function(){function t(){P.adjustPopupBoxContainer(e.data.id,e.positions,(function(){b(!0)}))}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[e]);var j=Object(n.useState)(!1),y=Object(c.a)(j,2),k=y[0],S=y[1],_=Object(n.useState)(!1),C=Object(c.a)(_,2),I=C[0],W=C[1],B={position:"absolute",top:"-25px",left:0,padding:"5px 10px",margin:"-10px 0px 0px",borderRadius:"30px",display:"flex",alignItems:"center"},A=function(t){var a=t.currentTarget.id;N.delete("/popup_widget/index.php",{data:{marker_id:e.data.id,popup_widget_id:a},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){l((function(e){return{items:e.items.filter((function(e){return parseInt(e.id)!==a}))}})),e.setPopups((function(t){return t.map((function(t,n){return parseInt(t.id)===parseInt(e.data.id)?Object(M.a)(Object(M.a)({},t),{},{popup_content:t.popup_content.filter((function(e){return e.id!==a}))}):t}))}))})).catch((function(t){"Expired token"===t.response.data.message&&e.history.push("/login/")}))},D=function(){return r.a.createElement("button",{className:"btn-sm btn badge badge-secondary text-white bg-info",style:B,onClick:function(t){return function(){if(k){e.setPopupEditMode(!1),W(!0),setTimeout((function(){W(!1)}),400);var t=e.data.popup_content;for(var a in t)t[a].order_no=a;N.post("/popup_widget/save_order.php/",{marker_id:parseInt(e.data.id),popup_content:t},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){})).catch((function(e){console.log(e)})),S(!1)}else e.setPopupEditMode(!0),S(!0),W(!0),setTimeout((function(){W(!1)}),400)}()},disabled:x.length>0},k?"Save Layout":"Edit Layout",r.a.createElement(ie,{className:"mx-1"}))};return r.a.createElement(r.a.Fragment,null,f?r.a.createElement("div",{styles:!1!==u?u:"",className:"pointBox showflip",id:"popup"+e.data.id},r.a.createElement(D,null),r.a.createElement(Be,null),k?void 0:r.a.createElement(We,{closeThisPopup:function(){e.setPopupModeMarkerSelected(!1),O((function(){return[{}]}))}}),r.a.createElement(ce.c,{droppableId:"droppable2"},(function(t,a){return r.a.createElement("div",{ref:t.innerRef,style:k?{background:n?"red":"lightgrey",padding:6}:void 0,className:" smoothTransition ".concat(k?"":"pb-0")},i.items.map((function(t,a){return r.a.createElement(ce.b,{key:t.id,draggableId:t.id,index:a,isDragDisabled:!k||e.newWidgetBeingAdded},(function(a,n){return r.a.createElement("div",null,r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:k?(o=n.isDragging,c=a.draggableProps.style,o.isDropAnimating?c:Object(M.a)({userSelect:"none",padding:6,margin:"0 0 ".concat(6,"px 0"),background:o?"#117a8b":"#19a2b8"},c)):void 0,className:"".concat(I?"smoothTransition":void 0)}),function(t){var a=t.item;switch(a.widget_type_id){case $:return r.a.createElement(se,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,popupItems:i,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case J:return r.a.createElement(be,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case K:return r.a.createElement(he,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case G:return r.a.createElement(we,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case q:return r.a.createElement(pe,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,popupItems:i,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case Q:return r.a.createElement(Oe,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O});case Y:return r.a.createElement(je,{data:a,popupContentChanged:e.popupContentChanged,popupEditModeSelected:k,deleteAWidget:A,popupWidgetBeingEdited:x,setPopupWidgetBeingEdited:O,addASlideInCarousel:e.addASlideInCarousel,deleteASlideInCarousel:e.deleteASlideInCarousel,updateASlideInCarousel:e.updateASlideInCarousel,updateCarouselSlidesOrder:e.updateCarouselSlidesOrder});default:return r.a.createElement("h1",{className:"text-dark"},"Widget not implemented")}}({item:t})));var o,c}))})),t.placeholder);var n}))):void 0)},We=function(e){var t=e.closeThisPopup;return r.a.createElement("div",{className:"pointBoxClose exit",onClick:function(){return t()}},r.a.createElement("div",{className:"pointBoxCloseIcon"},r.a.createElement("svg",{height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{fill:"none",stroke:"black",strokeWidth:"1"},r.a.createElement("path",{d:"M2 14L14 2M2 2l12 12"})))))},Be=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"pointBoxArrow"},r.a.createElement("svg",{width:"20",className:"pointBoxArrowRight",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},r.a.createElement("path",{fill:"#ffffff",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})),r.a.createElement("svg",{width:"20",className:"pointBoxArrowLeft",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},r.a.createElement("path",{fill:"#ffffff",d:"M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"}))))};function Ae(e){var t=e.imageId,a=Object(n.useState)(""),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(""),s=Object(c.a)(d,2),u=s[0],p=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],E=Object(n.useState)(""),h=Object(c.a)(E,2),v=h[0],w=h[1],x=Object(n.useState)(!1),O=Object(c.a)(x,2),j=O[0],y=O[1],k=Object(n.useState)(""),S=Object(c.a)(k,2),_=S[0],C=S[1];Object(n.useEffect)((function(){l(e.header),p(e.copy)}),[e.copy,e.header]);var I=r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text bg-secondary",id:"inputGroup-sizing-default"},"Header")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",value:i,onChange:function(e){l(e.target.value)}})),M=r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text bg-secondary"},"Body Text")),r.a.createElement("textarea",{style:{minHeight:"200px"},className:"form-control","aria-label":"With textarea",value:u,onChange:function(e){p(e.target.value)}})),W=r.a.createElement(r.a.Fragment,null,j&&r.a.createElement("div",{className:"col-md-6 mx-auto mt-4 text-center"},r.a.createElement("div",{className:"alert alert-success",role:"alert"},_)),f&&r.a.createElement("div",{className:"col-md-6 mx-auto mt-4 text-center"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},v)));return r.a.createElement("div",{className:"modal fade text-dark text-black",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},"Update Page Details"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},I,M,W),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){N.put("/details/index.php",{header:i,copy:u,image_id:t},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){b(!1),w(""),y(!0),C("Updated"),setTimeout((function(){y(!1),C("")}),2500)})).catch((function(t){y(!1),C("");var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(b(n.error),w(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(b(n.error),w(n.message[Object.keys(n.message)[0]][0]))}))}},"Save changes")))))}var Pe={background:"#2a85a5",padding:"10px",borderRadius:"20px"};var De=function(e){var t=e.imageId,a=Object(n.useRef)(null),o=Object(n.useState)("Copy embed code"),i=Object(c.a)(o,2),l=i[0];i[1];return r.a.createElement("button",{className:"smoothTransition btn btn-sm shadow-none","data-toggle":"tooltip","data-placement":"top",title:l,onClick:function(e){e.preventDefault(),window.$("#embedCodeButton").attr("data-original-title","Copied to clipboard!").tooltip("show"),setTimeout((function(){window.$("#embedCodeButton").attr("data-original-title","Copy embed code").tooltip("show")}),2500),navigator.clipboard.writeText("<script src='".concat(j,"/embed/index.php?id=").concat(t,"'><\/script>"))},"aria-disabled":"true","data-tooltipdata":l,ref:a,id:"embedCodeButton"},r.a.createElement("i",{className:"text-white far fa-copy fa-1x",style:Pe}))},Te=function(e){var t=e.imageId;return r.a.createElement(l.a,null,r.a.createElement(l.b,{to:"/embed/".concat(t),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("button",{className:"btn btn-info mx-2"},"Preview")))},Fe=function(e){var t=Object(n.useState)("Marker"),a=Object(c.a)(t,2),o=a[0],i=a[1];return r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"smoothTransition btn btn-info ".concat("Marker"===o?"active":""," ").concat(e.popupEditMode?"disabled":"")},r.a.createElement("input",{type:"radio",name:"options",id:"option1",onClick:function(){e.enableDraggableMode(),i("Marker")},defaultChecked:!0})," ","Marker"),r.a.createElement("label",{className:"smoothTransition btn btn-info ".concat("Popup"===o?"active":""," ").concat(e.popupEditMode?"disabled":"")},r.a.createElement("input",{type:"radio",name:"options",onClick:function(){e.enablePopupView(),i("Popup")}}),"Popup"))},Re=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row text-left  mx-0 "},r.a.createElement("div",{className:"col-5  order-12 order-md-1  px-0 text-white"},r.a.createElement("div",{className:"p-1 "},r.a.createElement("a",{className:"smoothTransition btn btn-sm ".concat(e.popupViewEnabled?"disabled":""),href:"#!","data-toggle":"tooltip","data-placement":"top",title:"Add Marker",onClick:function(t){t.preventDefault(),e.addNewMarker()}},r.a.createElement("i",{className:"text-white fas fa-plus-circle fa-1x",style:Pe})),r.a.createElement("a",{href:"#!",className:"smoothTransition btn btn-sm ".concat(e.selectedMarker&&!e.popupViewEnabled?"":"disabled"),ref:e.deleteRef,"data-toggle":"tooltip","data-placement":"top",title:"Delete Marker",onClick:function(t){t.preventDefault(),e.deleteMarker()},role:"button","aria-disabled":"true"},r.a.createElement("i",{className:" text-white far fa-trash-alt fa-1x",style:Pe})),r.a.createElement(De,{imageId:e.imageId}))),r.a.createElement("div",{className:"smoothTransition col-7 order-1 order-md-1  px-0 py-2 py-md-0 my-auto text-md-right text-left"},r.a.createElement("button",{type:"button",className:"btn btn-info ","data-toggle":"modal","data-target":"#exampleModalCenter"},"Edit Page info"),r.a.createElement(Ae,{imageId:e.imageId,header:e.header,copy:e.copy}),r.a.createElement(Te,{imageId:e.imageId}),r.a.createElement(Fe,{enablePopupView:e.enablePopupView,enableDraggableMode:e.enableDraggableMode,popupEditMode:e.popupEditMode}))))},Le=a(208);var ze=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),d=Object(c.a)(l,2),s=d[0],u=d[1];return Object(n.useEffect)((function(){e.selectedMarker?setTimeout((function(){return i(!0)}),400):i(!1)}),[o,e.selectedMarker]),r.a.createElement(r.a.Fragment,null,o&&!e.popupViewEnabled?r.a.createElement("div",{className:"smoothTransition py-2 "},r.a.createElement(Le.a,{color:s,disableAlpha:!0,colors:["#f44336","#ffffff","#e91e63","#9c27b0","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#673ab7"],circleSpacing:6,width:"90%",onChange:function(t){u(t),e.onColorSelected(t)}})):void 0)};var He=function(){return window.$(".toast").toast(),r.a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative"}},r.a.createElement("div",{className:"toast",style:{position:"absolute",top:0,right:0,opacity:1,zIndex:1e3}},r.a.createElement("div",{className:"toast-header bg-info text-white"},r.a.createElement("span",{role:"img","aria-label":"Alert",height:"100"},"\ud83d\ude2e \ud83d\ude2e \ud83d\ude2e"),r.a.createElement("strong",{className:"mr-auto"})),r.a.createElement("div",{className:"toast-body text-dark",style:{backgroundColor:"#88888859"}},"Close already opened popup"," ",r.a.createElement("span",{role:"img","aria-label":"Alert",height:"100"},"\ud83d\ude0e"))))},Ue=function(e,t){return e.isDropAnimating?t:Object(M.a)({userSelect:"none",margin:"0 0 ".concat(8,"px 0")},t)};var Ve=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),d=Object(c.a)(l,2),s=d[0],u=d[1];return Object(n.useEffect)((function(){u(X),setTimeout((function(){return i(!0)}),100)}),[]),r.a.createElement(r.a.Fragment,null,o&&r.a.createElement("div",{className:"row py-2 mx-auto"},r.a.createElement(ce.c,{droppableId:"droppable",isDropDisabled:!0},(function(t,a){return r.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,style:{width:n?"400px":"200px",margin:"8px 0px"},className:"col-12"}),s.map((function(t,a){return r.a.createElement(ce.b,{key:t.id,draggableId:t.id,index:a,isDragDisabled:e.newWidgetBeingAdded},(function(e,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:Ue(a.isDragging,e.draggableProps.style)}),r.a.createElement(le.a.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1}},t.widget)),a.isDragging&&r.a.createElement("div",{style:Ue(e.draggableProps.style),className:"popupWidget"},t.widget))}))})),t.placeholder);var n}))))},Je=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),l=i[0],d=i[1],s=Object(n.useState)(!1),u=Object(c.a)(s,2),p=u[0],m=u[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),b=f[0],E=f[1],h=Object(n.useState)(!1),v=Object(c.a)(h,2),w=v[0],x=v[1],O=Object(n.useRef)(null),j=function(){m(O.current.width),d(O.current.height)},y=Object(n.useCallback)((function(){r(!0)}),[a]);return Object(n.useEffect)((function(){return O.current&&O.current.complete&&(y(),x(O.current.naturalWidth),E(O.current.naturalHeight),m(O.current.width),d(O.current.height),window.addEventListener("resize",j)),function(){window.removeEventListener("resize",j)}}),[y,x,E,m,d]),[O,a,y,b,w,p,l]};var $e=function(e){var t=Object(n.useRef)([]),a=Object(n.useState)(!1),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)(!1),s=Object(c.a)(d,2),u=s[0],p=s[1],m=Object(n.useState)(!1),g=Object(c.a)(m,2),f=g[0],b=g[1],E=Object(n.useState)(!1),w=Object(c.a)(E,2),x=w[0],O=w[1],j=Object(n.useState)(!1),y=Object(c.a)(j,2),k=y[0],S=y[1],_=Object(n.useState)({}),C=Object(c.a)(_,2),W=C[0],A=C[1],D=Object(n.useState)(!1),F=Object(c.a)(D,2),R=F[0],L=F[1],z=Object(n.useState)(!1),H=Object(c.a)(z,2),U=H[0],V=H[1],J=Object(n.useState)(!1),$=Object(c.a)(J,2),q=$[0],G=$[1],K=Object(n.useState)(!1),Q=Object(c.a)(K,2),Y=(Q[0],Q[1]),te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!1),ie=Object(c.a)(oe,2),le=ie[0],de=ie[1],se=Object(n.useState)(!1),ue=Object(c.a)(se,2),pe=ue[0],me=ue[1],ge=Object(n.useState)(!1),fe=Object(c.a)(ge,2),be=fe[0],Ee=fe[1],he=Object(n.useState)(!1),ve=Object(c.a)(he,2),we=ve[0],xe=ve[1],Oe=Je(),je=Object(c.a)(Oe,7);function ye(e){var t=B()(e.target).css("transform").split(","),a=t.length,n=parseInt(t[a-2]),r=parseInt(t[a-1]);P.getImageMetric(B()(".imageMarker"),(function(t){var a,o;a=parseInt(B()(e.target).css("left"))+n,o=parseInt(B()(e.target).css("top"))+r;var i,c,l,d=a/t.getWidthLess*t.width,s=o/t.setHeight*t.height;i=e.target.getAttribute("data-key"),c=d,l=s,A((function(e){return Object(M.a)(Object(M.a)({},e),{},{marker_positions:e.marker_positions.map((function(e,t){return parseInt(e.m_id)===parseInt(i)?Object(M.a)(Object(M.a)({},e),{},{top:l,left:c}):e}))})}))}))}function ke(e){var t=e.target,a=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,n=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+a+"px, "+n+"px)",t.setAttribute("data-x",a),t.setAttribute("data-y",n)}je[0],je[1],je[2],je[3],je[4],je[5],je[6];var Ne=e.id.id,Se=Object(n.useCallback)(Object(v.a)(h.a.mark((function t(){var a,n,r,o,i,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.get("/image/index.php",{params:{image_id:parseInt(Ne)},headers:{Authorization:localStorage.getItem("token")}});case 3:a=t.sent,n=Z(a.data),r=Object(c.a)(n,2),o=r[0],i=r[1],L(i),A(o),S(!0),_e(),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Expired token"===(d=t.t0.response).data.message&&e.history.push("/login/"),404===d.status&&(l(!0),p(d.data.message));case 16:return t.abrupt("return");case 17:case"end":return t.stop()}}),t,null,[[0,11]])}))),[]),_e=function(){T()(".item-point").draggable({inertia:!0,autoScroll:!0,modifiers:[T.a.modifiers.restrictRect({restriction:"parent"})],onmove:ke}).on("dragend",ye),window.$((function(){window.$('[data-toggle="tooltip"]').tooltip({delay:{show:0,hide:100},trigger:"hover"})}))},Ce=function(){P.positionMarkers(t)},Ie=function(e){t.current.includes(e.target)||G(!1)};function We(t,a,n,r){var o=new FormData;o.append("image",a),o.append("marker_id",parseInt(le.markerId)),o.append("popup_widget_id",t),o.append("widget_type_id",n),o.append("image_url",r),"widget_id_2"===n?N.post("/popup_widget/update_image.php",o,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){L((function(a){return a.map((function(n,r){return parseInt(n.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},n),{},{popup_content:a[r].popup_content.map((function(a,n){return a.id===t?Object(M.a)(Object(M.a)({},a),{},{src:e.data}):a}))}):n}))})),b(!1),O(null)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(b(n.error),O(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(b(n.error),O(n.message[Object.keys(n.message)[0]][0]))})):N.put("/popup_widget/index.php",{marker_id:parseInt(le.markerId),popup_widget_id:t,content:a,widget_type_id:n},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){b(!1),O(null),console.log(e)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(b(n.error),O(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(b(n.error),O(n.message[Object.keys(n.message)[0]][0]))})),L((function(e){return e.map((function(n,r){return parseInt(n.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},n),{},{popup_content:e[r].popup_content.map((function(e,n){return e.id===t?Object(M.a)(Object(M.a)({},e),{},{src:a}):e}))}):n}))}))}Object(n.useEffect)((function(){if(k)return document.getElementById("imageMarkerWrapper").addEventListener("mousedown",Ie),function(){document.getElementById("imageMarkerWrapper").removeEventListener("mousedown",Ie)}}),[k]),Object(n.useEffect)((function(){return function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se();case 2:return e.next=4,P.positionMarkers(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),window.addEventListener("resize",Ce),function(){window.removeEventListener("resize",Ce),T()(".item-point").unset()}}),[Se]),Object(n.useEffect)((function(){var e=!0;if(k){var t=new Image;t.src=W.url,t.onload=function(){e&&(t.naturalWidth>t.naturalHeight?xe(!1):t.naturalWidth<t.naturalHeight?xe(!0):xe(!1))}}return function(){e=!1}}),[k,W,L]),Object(n.useEffect)((function(){W.id&&N.put("/marker/index.php",{image_id:parseInt(W.id),markers:W},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){b(!1),O(null),P.positionMarkers(t)})).catch((function(t){var a=t.response,n=t.response.data;"Expired token"===n.message&&e.history.push("/login/"),401===a.status&&(b(n.error),O(n.message)),400===a.status&&n.validationError&&"image_id"===Object.keys(n.message)[0]&&(b(n.error),O(n.message[Object.keys(n.message)[0]][0]))}))}),[W,e]);var Be=function(){var e=Object(v.a)(h.a.mark((function e(t,a,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.get("/popup_widget/carousel_widget.php",{params:{popup_widget_id:parseInt(t),marker_id:parseInt(parseInt(le.markerId)),imageSlide:a}});case 3:r=e.sent,L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(M.a)(Object(M.a)({},e),{},{src:JSON.stringify(r.data)}):e}))}):a}))})),n(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n(!0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(v.a)(h.a.mark((function e(t,a,n,r,o,i,c,l,d,s){var u,p,m,g,f,b,E;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(u=new FormData).append("image",o),u.append("marker_id",parseInt(le.markerId)),u.append("popup_widget_id",t),u.append("slide_id",a),u.append("image_url",i),u.append("image_src_changed",c),u.append("slide_caption",n),u.append("slide_type",r),u.append("video_src",l),u.append("video_src_changed",d),e.next=14,N.post("/popup_widget/carousel_widget.php",u,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 14:for(E in p=e.sent,m=p.data.sort((function(e,t){return e.order_no-t.order_no})),L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(M.a)(Object(M.a)({},e),{},{src:JSON.stringify(m)}):e}))}):a}))})),g=p.data)g[E].id===a&&(f=g[E].src,b=g[E].caption);s(!1,null,f,b),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),s(!0,e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,a,n,r,o,i,c,l,d,s){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(v.a)(h.a.mark((function e(t,a,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.delete("/popup_widget/carousel_widget.php",{data:{popup_widget_id:parseInt(t),marker_id:parseInt(parseInt(le.markerId)),slide_id:a}});case 3:r=e.sent,L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(M.a)(Object(M.a)({},e),{},{src:JSON.stringify(r.data)}):e}))}):a}))})),n(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n(!0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(v.a)(h.a.mark((function e(t,a,n){var r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put("/popup_widget/carousel_widget.php",{marker_id:parseInt(le.markerId),popup_widget_id:t,content:a,widget_type_id:n},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 2:r=e.sent,o=r.data.sort((function(e,t){return e.order_no-t.order_no})),L((function(e){return e.map((function(a,n){return parseInt(a.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},a),{},{popup_content:e[n].popup_content.map((function(e,a){return e.id===t?Object(M.a)(Object(M.a)({},e),{},{src:JSON.stringify(o)}):e}))}):a}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Te=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(c.a)(r,1)[0];return n.splice(a,0,o),n},Fe=function(t,a,n,r,o){var i=Array.from(t),c=Array.from(a),l={},d=i.find((function(e){return e.id===n}));return d={id:d.id+"_"+(Date.now().toString(36)+Math.random().toString(36).substr(2)),widget_type_id:d.id,src:null,marker_id:le.markerid},c.splice(o.index,0,d),l[r.droppableId]=i,l[o.droppableId]=c,Ee(!0),N.post("/popup_widget/index.php",{image_id:parseInt(W.id),marker_id:parseInt(le.markerId),widget_type_id:d.widget_type_id,react_widget_id:d.id},{headers:{Authorization:localStorage.getItem("token")}}).then((function(e){var t=e.data.new_widget_id,a=e.data.react_widget_id;L((function(n){return n.map((function(n,r){return parseInt(n.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},n),{},{popup_content:n.popup_content.map((function(n,r){return n.id===a?{id:t,widget_type_id:e.data.widget_type_id,src:e.data.src,marker_id:le.markerId}:n}))}):n}))})),Ee(!1)})).catch((function(t){t.response;"Expired token"===t.response.data.message&&e.history.push("/login/")})),l},Le=Object(n.useState)(X),Ue=Object(c.a)(Le,2),$e=Ue[0],Ke=(Ue[1],function(){var e=Object(v.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in R)for(a in R[t].popup_content)R[t].popup_content[t].order_no=a;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement(r.a.Fragment,null,k?r.a.createElement(qe,null,r.a.createElement("div",{className:"row text-center text-white mr-auto"},r.a.createElement(ce.a,{onDragEnd:function(e){var t=e.source,a=e.destination,n=e.draggableId;a&&(t.droppableId===a.droppableId&&a.index===t.index||(t.droppableId===a.droppableId?L((function(e){return e.map((function(e,n){return parseInt(e.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},e),{},{popup_content:Te(e.popup_content,t.index,a.index)}):e}))})):L((function(e){return e.map((function(e,r){return parseInt(e.id)===parseInt(le.popupId)?Object(M.a)(Object(M.a)({},e),{},{popup_content:Fe($e,e.popup_content,n,t,a).droppable2}):e}))}))))}},r.a.createElement("div",{className:"text-left rounded-right col-3 smoothTransition pl-0  pr-0 ",id:"widgetPanel"},r.a.createElement("div",{className:"text-left bg-info rounded-right px-0 smoothTransition h-100 ".concat(q||ne?"col-md-12":"col-md-4")},r.a.createElement(ze,{onColorSelected:function(e){A((function(t){return Object(M.a)(Object(M.a)({},t),{},{marker_positions:t.marker_positions.map((function(t,a){return parseInt(t.m_id)===parseInt(q.markerId)?Object(M.a)(Object(M.a)({},t),{},{color:e.hex}):t}))})}))},selectedMarker:q,popupViewEnabled:U}),ne&&r.a.createElement(Ve,{newWidgetBeingAdded:be}))),r.a.createElement("div",{className:"mb-4 col-9 "},f&&r.a.createElement("div",{className:"col-md-12 mx-auto ",role:"alert"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},x)),r.a.createElement(Re,{selectedMarker:q,addNewMarker:function(){N.post("/marker/index.php",{image_id:parseInt(W.id)},{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}}).then((function(e){var t,a=e.data.new_marker[0],n=e.data.new_popup;n.id=parseInt(e.data.new_popup.id),t={m_id:parseInt(a.id),top:parseFloat(a.markerTop),left:parseFloat(a.markerLeft),color:a.color,animation_type:a.animation_type,marker_type:a.marker_type,marker_image:a.marker_image,background_color:a.background_color,border_radius:a.border_radius,popup_id:parseInt(a.id)},A((function(e){return Object(M.a)(Object(M.a)({},e),{},{marker_positions:[].concat(Object(I.a)(e.marker_positions),[t])})}));var r=[];for(var o in n.popup_content)r.push({id:n.popup_content[o].id,widget_type_id:n.popup_content[o].widget_type_id,src:n.popup_content[o].content,marker_id:a.id});n.popup_content=r,n.id=parseInt(a.id),L((function(e){return[].concat(Object(I.a)(e),[n])}))})).catch((function(t){t.response;"Expired token"===t.response.data.message&&e.history.push("/login/")}))},deleteMarker:function(t){W.marker_positions.length>1&&N.delete("/marker/index.php",{data:{marker_id:parseInt(q.markerId),popup_id:parseInt(q.popupId)},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){Y({popupId:parseInt(q.popupId)}),A((function(e){return Object(M.a)(Object(M.a)({},e),{},{marker_positions:e.marker_positions.filter((function(e){return e.m_id!==parseInt(q.markerId)}))})})),L((function(e){return e.filter((function(e){return e.id!==parseInt(q.popupId)}))})),G(!1)})).catch((function(t){var a=t.response.data,n=t.response;"Expired token"===a.message&&e.history.push("/login/"),401===n.status&&(b(a.error),O(a.message)),400===n.status&&a.validationError&&"marker_id"===Object.keys(a.message)[0]&&(b(a.error),O(a.message[Object.keys(a.message)[0]][0]))}))},popupViewEnabled:U,enablePopupView:function(e){V(!0),T()(".item-point").unset(),G(!1)},enableDraggableMode:function(e){_e(),V(!1),re(!1)},popupEditMode:ne,saveData:Ke,imageId:W.id,header:W.header,copy:W.copy}),r.a.createElement("div",{className:"imageMarker shadow-lg",id:"imageMarkerWrapper",style:we?{maxWidth:"850px",margin:"auto"}:{maxWidth:"1080px",margin:"auto"}},pe&&r.a.createElement(He,null),k?null:r.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},r.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("img",{className:"target rounded shadow ".concat(k?"":"d-none"),alt:"empty",src:W.url,onLoad:function(){return S(!0)}}),r.a.createElement(Ge,null,r.a.createElement("div",{className:"image-overlay-onpopup rounded",style:le?{opacity:1}:void 0}),W.marker_positions.map((function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(ee,{ref:function(e){return t.current[a]=e},key:a,markers:e,popupViewEnabled:U,setSelectedMarker:G,selectedMarker:q,popupModeMarkerSelected:le,setPopupModeMarkerSelected:de,setShowToast:me}))}))),r.a.createElement(r.a.Fragment,null,R.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e.id===parseInt(le.popupId)?r.a.createElement(r.a.Fragment,null,r.a.createElement(Me,{key:t,data:e,popupContentChanged:We,setPopupEditMode:re,setPopups:L,setPopupModeMarkerSelected:de,positions:{top:W.marker_positions[t].top,left:W.marker_positions[t].left},newWidgetBeingAdded:be,addASlideInCarousel:Be,deleteASlideInCarousel:Pe,updateASlideInCarousel:Ae,updateCarouselSlidesOrder:De})):void 0)})))))))):r.a.createElement(r.a.Fragment,null,!i&&r.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},r.a.createElement("div",{className:"spinner-grow text-primary p-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))),i&&r.a.createElement("div",{className:"col-md-6 mx-auto mt-5 pt-3",role:"alert"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},u)))},qe=function(e){var t=e.children;return r.a.createElement("div",{className:"container-fluid mt-4 ml-0",style:{width:"95%"}},t)},Ge=function(e){var t=e.children;return r.a.createElement("div",{className:"points_wrap"},t)};var Ke=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(""),d=Object(c.a)(l,2),s=d[0],p=d[1],m=Object(n.useState)(null),g=Object(c.a)(m,2),f=g[0],b=g[1],E=Object(n.useState)(""),h=Object(c.a)(E,2),v=h[0],w=h[1],x=Object(u.g)();return r.a.createElement("div",{style:{maxWidth:"450px"},className:"m-auto pt-5"},f&&r.a.createElement("div",{className:"alert alert-danger mt-4",role:"alert"},v),r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"}," Log in"),r.a.createElement("form",{className:"needs-validation  form-signin mt-3 form-row }"},r.a.createElement("div",{className:"col-12   px-0"},r.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),r.a.createElement("input",{type:"email",id:"inputEmail",className:"form-control rounded-top  ",placeholder:"Email address",required:!0,autoFocus:"",style:{borderRadius:0,borderBottom:0},value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("input",{type:"password",id:"inputPassword",className:"form-control rounded-bottom",placeholder:"Password",required:"",style:{borderRadius:0},value:s,onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{className:"btn btn-lg btn-info btn-block my-3",type:"submit",disabled:!(o.length>3&&s.length>3),onClick:function(t){return function(t){b(!1),w(!1),t.preventDefault(),N.post("/login/index.php",{email:o,password:s}).then((function(t){var a=t.data;localStorage.setItem("token",a.jwt),x.push("/image"),e.setUserLoggedIn(!0)})).catch((function(e){var t=e.response.data;t.validationError&&(console.log(Object.keys(t.message)[0],t.message[Object.keys(t.message)[0]][0]),"email"===Object.keys(t.message)[0]&&(b(t.error),w(t.message[Object.keys(t.message)[0]][0])),"password"===Object.keys(t.message)[0]&&(b(t.error),w(t.message[Object.keys(t.message)[0]][0]))),t.validationError||(b(t.error),w("".concat(t.message)))}))}(t)}},"Sign in")))};var Qe=function(){return r.a.createElement("div",{className:"text-dark container text-center"},r.a.createElement("h1",null,"Dashboard"))},Ye=a(211),Xe=function(e){return new Promise((function(e,t){N.post("/token/index.php","",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")}}).then((function(t){t.data.okay&&e(t.data.okay)})).catch((function(e){t(!1)}))}))},Ze=function(e){var t=e.component,a=e.setUserLoggedIn,o=Object(Ye.a)(e,["component","setUserLoggedIn"]),i=Object(n.useState)(!1),l=Object(c.a)(i,2),d=l[0],s=l[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),g=m[0],f=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e?Xe().then((function(e){s(!0),a(!0)})).catch((function(e){s(!1),a(!1)})).then((function(e){f(!0)})):(f(!0),null===e&&a(!1))}),[]),g?r.a.createElement(u.b,Object.assign({},o,{render:function(e){return d?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/login"})}})):r.a.createElement("div",{className:"text-center w-100 pt-5 mt-5 "},r.a.createElement("div",{className:"spinner-grow text-info p-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},et=a(204),tt=a(205),at=a(52),nt=a(212),rt=a(210),ot=a(206),it=a.n(ot),ct=a(209),lt=function(e){Object(nt.a)(a,e);var t=Object(rt.a)(a);function a(e){var n;return Object(et.a)(this,a),(n=t.call(this,e)).getAllBauerStation=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){N.get("/stations/index.php",{params:{},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){e(t.data)})).catch((function(e){console.log(e),t(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onStationSelected=function(e){n.setState({selectedBauerStation:e})},n.state={selectedImage:[],bauerStations:[],selectedBauerStation:"",imageName:"",loading:!1,error:!1},n.onDrop=n.onDrop.bind(Object(at.a)(n)),n.onStationSelected=n.onStationSelected.bind(Object(at.a)(n)),n.onImageNameChange=n.onImageNameChange.bind(Object(at.a)(n)),n.createImage=n.createImage.bind(Object(at.a)(n)),n}return Object(tt.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getAllBauerStation().then((function(t){e.setState({bauerStations:t})})).catch((function(e){console.log(e)}))}},{key:"onImageNameChange",value:function(e){this.setState({imageName:e.target.value})}},{key:"onDrop",value:function(e,t){this.setState({selectedImage:e})}},{key:"createImage",value:function(){var e=this;(function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({loading:!0}),e.setState({error:!1}),(n=new FormData).append("Stations_id",e.state.selectedBauerStation.id),n.append("Users_id",1),n.append("name",e.state.imageName),n.append("image",e.state.selectedImage[0]),t.next=10,N.post("/image/index.php",n,{headers:{"content-type":"multipart/form-data",Authorization:localStorage.getItem("token")}});case 10:201===(r=t.sent).status&&(e.setState({loading:!1}),e.props.history.push("/image/".concat(r.data.image_id))),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),e.setState({loading:!1}),e.setState({error:!0});case 18:return t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}})()()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto mt-2"},r.a.createElement(it.a,{withIcon:!0,buttonText:"Choose image",onChange:this.onDrop,imgExtension:[".jpeg",".jpg",".gif",".png",".gif",".webp"],maxFileSize:5242880,singleImage:!0,withPreview:!0,buttonClassName:"btn-lg"}))),r.a.createElement("div",{className:"row rounded pt-3"},r.a.createElement("div",{className:"col-md-8 shadow-sm rounded mx-auto pb-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"py-1"},"Select Station"),r.a.createElement(ct.a,{defaultValue:this.state.selectedBauerStation,onChange:this.onStationSelected,options:this.state.bauerStations})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{className:"py-1"},"Name"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Name",value:this.state.imageName,onChange:this.onImageNameChange}))))),this.state.error&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"my-2 w-50 mx-auto alert alert-danger",role:"alert"},"Error, unable to create image. Try again!")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto py-3 text-right"},r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:this.createImage,disabled:!(""!==this.state.imageName&&""!==this.state.selectedBauerStation&&this.state.selectedImage.length>0&&!1===this.state.loading)},"Create Image"),this.state.loading&&r.a.createElement("div",{className:"col-md-4 mx-auto py-5 text-right"},r.a.createElement("div",{className:"spinner-border text-info",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),a}(r.a.Component);var dt,st=function(e){return r.a.createElement($e,{id:e.match.params})},ut=a(207),pt=a.n(ut);!function(e){e.SET_SELECTED_POPUP="SET_SELECTED_POPUP",e.CLOSE_SELECTED_POPUP="CLOSE_SELECTED_POPUP",e.SET_LOADING="SET_LOADING"}(dt||(dt={}));var mt=function(e,t){switch(t.type){case dt.SET_SELECTED_POPUP:return Object(M.a)(Object(M.a)({},e),{},{popup:t.payload.popup,selectedMarker:t.payload.selectedMarker,loading:!1});case dt.CLOSE_SELECTED_POPUP:return Object(M.a)(Object(M.a)({},e),{},{popup:[],selectedMarker:null,loading:!1});case dt.SET_LOADING:return Object(M.a)(Object(M.a)({},e),{},{loading:!0});default:return e}},gt={popup:[],selectedMarker:null,selectedPopup:null,error:null,loading:!1},ft=Object(n.createContext)({state:gt,dispatch:function(){return null}}),bt=function(e){var t=e.children,a=Object(n.useReducer)(mt,gt),o=Object(c.a)(a,2),i=o[0],l=o[1];return r.a.createElement(ft.Provider,{value:{state:i,dispatch:l}},t)},Et=function(e){var t=Object(n.useRef)({}),a={status:"idle",error:null,data:[],markers:void 0,popup_data:void 0,image:{},details:{header:"",copy:""}},r=Object(n.useReducer)((function(e,t){switch(t.type){case"FETCHING":return Object(M.a)(Object(M.a)({},a),{},{status:"fetching"});case"FETCHED":return Object(M.a)(Object(M.a)({},a),{},{status:"fetched",data:t.payload.image,image:t.payload.image,markers:t.payload.marker_positions,popup_data:t.payload.popups,details:t.payload.details});case"FETCH_ERROR":return Object(M.a)(Object(M.a)({},a),{},{status:"error",error:t.payload});default:return e}}),a),o=Object(c.a)(r,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){var a=!1;if(e)return function(){var n=Object(v.a)(h.a.mark((function n(){var r,o,i,d,s,u,p;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l({type:"FETCHING"}),!t.current[e]){n.next=6;break}r=t.current[e],l({type:"FETCHED",payload:r}),n.next=24;break;case 6:return n.prev=6,n.next=9,N.get("/image/index.php",{params:{image_id:parseInt(e)}});case 9:if(o=n.sent,i=Z(o.data),d=Object(c.a)(i,2),s=d[0],u=d[1],console.log(o.data[0]),t.current[e]=o,p={data:s,marker_positions:s.marker_positions,popups:u,image:{id:s.id,name:s.name,url:s.url},details:{header:o.data[0].page_header,copy:o.data[0].page_copy}},!a){n.next=16;break}return n.abrupt("return");case 16:l({type:"FETCHED",payload:p}),n.next=24;break;case 19:if(n.prev=19,n.t0=n.catch(6),!a){n.next=23;break}return n.abrupt("return");case 23:l({type:"FETCH_ERROR",payload:n.t0.message});case 24:case"end":return n.stop()}}),n,null,[[6,19]])})));return function(){return n.apply(this,arguments)}}()(),function(){a=!0}}),[e]),i},ht=function(){var e=Object(n.useState)(window.innerWidth),t=Object(c.a)(e,2),a=t[0],r=t[1],o=function(){r(window.innerWidth)};return Object(n.useEffect)((function(){return window.addEventListener("resize",o),function(){window.removeEventListener("resize",o)}}),[]),a<=768};var vt=function(e){var t=e.src;return r.a.createElement("img",{src:t,alt:"empty",className:"img-fluid"})};var wt=function(e){var t=e.src;return r.a.createElement("div",{className:"video_wrapper_on_drag position-relative"},r.a.createElement("div",{className:"embed-container"},r.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:t,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"})))};function xt(e){var t=e.children;return r.a.createElement("div",{className:"m-2"},t)}var Ot=function(e){var t=e.src,a=Object(n.useState)({value:ge.EditorState.createEmpty()}),o=Object(c.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){l({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(JSON.parse(t)))})}),[t]),i?r.a.createElement(xt,null,r.a.createElement(me.Editor,{readOnly:!0,toolbarHidden:!0,handlePastedText:function(){return!1},editorState:i.value,toolbarClassName:"bg-info",wrapperClassName:"demo-wrapper headerWrapper",editorClassName:"demo-editor-custom"})):null};var jt=function(e){var t=e.src,a=Object(n.useState)(),o=Object(c.a)(a,2),i=o[0],l=o[1],d=Object(n.useState)({value:ge.EditorState.createEmpty()}),s=Object(c.a)(d,2),u=s[0],p=s[1];return Object(n.useEffect)((function(){if(null!==t){var e=JSON.parse(t);l(e.buttonUrlSrc),p({value:ge.EditorState.createWithContent(Object(ge.convertFromRaw)(e.buttonTextSrc))})}}),[t]),i?r.a.createElement(xt,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"btn buttonWidgetWrapper w-100 rounded-0 btn-info",href:i},r.a.createElement(me.Editor,{readOnly:!0,toolbarHidden:!0,handlePastedText:function(){return!1},editorState:u.value,toolbarClassName:"bg-info m-0 p-0 border-0",wrapperClassName:"demo-wrapper m-0 p-0 border-0",editorClassName:"demo-editor-custom m-0 p-0 border-0 buttonEditor  "}))):null},yt=a(476),kt=a(474),Nt=a(475),St=a(471),_t=a(472),Ct=a(473);a(464),a(465),a(466),a(467);Nt.a.use([St.a,_t.a,Ct.a]);var It=function(e){var t=e.src,a=Object(n.useState)(),o=Object(c.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){l(JSON.parse(t))}),[t]),i?r.a.createElement(yt.a,{navigation:!0,scrollbar:{draggable:!0}},i.map((function(e){return r.a.createElement(kt.a,{key:e.id},"image"===(t=e).slide_type?r.a.createElement(Wt,{slide:t}):"video"===t.slide_type?r.a.createElement(Mt,{slide:t}):void 0);var t}))):null},Mt=function(e){var t=e.slide;return r.a.createElement("div",{className:"embed-container"},r.a.createElement("iframe",{width:"560",height:"315",className:"border-0",src:t.src,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",title:"video_"}))},Wt=function(e){var t=e.slide;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pb-3"},r.a.createElement("img",{src:t.src,alt:"empty",className:"img-fluid"}),r.a.createElement(Bt,{caption:t.caption})))},Bt=function(e){var t=e.caption;return r.a.createElement("p",null,t)},At=function(e){e.isMobileScreen;var t=e.top,a=e.width,n=e.isLeft,o={top:t*a/2+25,right:n?"unset":-18,left:n?-17:"unset"};return r.a.createElement("div",{className:"pointBoxArrow smoothTransition",style:o},n?r.a.createElement("svg",{width:"20",className:"pointBoxArrowLeft d-block",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},r.a.createElement("path",{fill:"#ffffff",d:"M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"})):r.a.createElement("svg",{width:"20",className:"pointBoxArrowRight d-block",height:"53",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512"},r.a.createElement("path",{fill:"#ffffff",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"})))},Pt=function(){var e=Object(n.useContext)(ft).dispatch;return r.a.createElement("div",{className:"pointBoxClose exit",onClick:function(){return e({type:dt.CLOSE_SELECTED_POPUP})}},r.a.createElement("div",{className:"pointBoxCloseIcon"},r.a.createElement("svg",{height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{fill:"none",stroke:"black",strokeWidth:"1"},r.a.createElement("path",{d:"M2 14L14 2M2 2l12 12"})))))},Dt=function(e){var t=Object(n.useState)(),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),d=Object(c.a)(l,2),s=d[0],u=d[1],p=ht(),m=Object(n.useContext)(ft).state;return Object(n.useEffect)((function(){var t=e.width,a=e.naturalImageWidth,n=isNaN(e.markers.left*t/a)?0:e.markers.left*t/a,r=isNaN(e.markers.top*t/a)?0:e.markers.top*t/a/2;p||(n>=t/100*58?(i({top:r,right:t-n+25}),u(!1)):(i({top:r,left:n}),u(!0)))}),[e.markers.top,e.markers.left,e.width,e.naturalImageWidth,p]),r.a.createElement("div",{style:o,className:"pointBox showflip smoothTransition"},r.a.createElement(At,{isLeft:s,isMobileScreen:p,top:e.markers.top,width:e.width/e.naturalImageWidth}),r.a.createElement(Pt,null),r.a.createElement("div",{className:"popup_widgets"},m.popup.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},function(e){switch(e.widget_type_id){case $:return r.a.createElement(vt,{src:e.src});case J:case K:return r.a.createElement(Ot,{src:e.src});case G:return r.a.createElement(jt,{src:e.src});case q:case Q:return r.a.createElement(wt,{src:e.src});case Y:return r.a.createElement(It,{src:e.src});default:return}}(e))}))))},Tt=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(0),d=Object(c.a)(l,2),s=d[0],u=d[1];return Object(n.useEffect)((function(){i(isNaN(e.markers.top*e.width)?0:e.markers.top*e.width),u(isNaN(e.markers.left*e.width)?0:e.markers.left*e.width)}),[e.markers.top,e.markers.left,e.width]),r.a.createElement("div",{className:"item-point circle pulse2",style:{top:o,left:s},onClick:function(){return e.hotspotClicked(e.markers.m_id)}},r.a.createElement("div",null,r.a.createElement("a",{href:"#!","aria-label":"Click hotspot","aria-hidden":"true",onClick:function(e){return e.preventDefault()},className:"toggle"},"")))};var Ft=function(e){var t=Object(u.h)().id,a=Object(n.useContext)(ft),o=a.state,i=a.dispatch,l=Object(n.useState)(),d=Object(c.a)(l,2),s=d[0],p=d[1],m=Je(),g=Object(c.a)(m,7),f=g[0],b=g[1],E=g[2],h=(g[3],g[4]),v=g[5],w=(g[6],Et(t)),x=w.status,O=w.image,j=w.markers,y=w.popup_data,k=w.error,N=w.details;function S(e){e!==o.selectedMarker&&(i({type:dt.SET_LOADING}),p(j.find((function(t){return t.m_id===e}))),i({type:dt.SET_SELECTED_POPUP,payload:{popup:y.find((function(t){return t.id===e})).popup_content,selectedMarker:j.find((function(t){return t.m_id===e}))}}))}console.log(N),Object(n.useEffect)((function(){return e.setIsEmbedPage(!0)}),[e]);var _=r.a.createElement(r.a.Fragment,null,!b&&r.a.createElement(zt,null),r.a.createElement("img",{ref:f,onLoad:E,src:O.url,alt:O.url,className:"target rounded img-fluid w-100 shadow"})),C=r.a.createElement(r.a.Fragment,null,b&&r.a.createElement(r.a.Fragment,null,j.map((function(e,t){return r.a.createElement(Tt,{key:t,markers:e,width:v/h,hotspotClicked:S})})))),I=r.a.createElement(r.a.Fragment,null,o.popup.length>0&&r.a.createElement(Dt,{markers:s,width:v,naturalImageWidth:h})),M=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container text-left my-3 pl-md-0"},r.a.createElement("div",{className:"col-md-8 pl-md-0"},r.a.createElement("h2",null,N.header),r.a.createElement("p",{className:"my-2"},N.copy))));return r.a.createElement(r.a.Fragment,null,"fetched"===x&&M,r.a.createElement(Lt,null,"idle"===x&&r.a.createElement(zt,null),"error"===x&&r.a.createElement("div",null,k),"fetching"===x&&r.a.createElement(zt,null),"fetched"===x&&r.a.createElement(r.a.Fragment,null,_,r.a.createElement(Rt,null,C),I)))},Rt=function(e){var t=e.children;return r.a.createElement("div",{className:"points_wrap"},t)},Lt=function(e){var t=e.children;return r.a.createElement("div",{className:"container embed-spacer px-0 text-center imageMarker position-relative"},t)},zt=function(){return r.a.createElement("div",{className:"text-center w-100 d-flex shine",style:{minHeight:"780px"}})};var Ht={popup:null,selectedMarker:null,selectedPopup:null,error:null,loading:!1};Object(n.createContext)(Ht);function Ut(){return r.a.createElement("div",{className:"text-center mx-auto col-10"},r.a.createElement("img",{alt:"not found",src:pt.a,className:"text-center img-fluid"}))}var Vt=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),d=Object(c.a)(i,2),p=d[0],m=(d[1],Object(n.useState)(!1)),g=Object(c.a)(m,2),f=g[0],E=g[1];return Object(n.useEffect)((function(){p||localStorage.getItem("token")&&Xe().then((function(e){o(!0)})).catch((function(e){console.log(e),o(!1)}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,!f&&r.a.createElement(s,{userLoggedIn:a,isDemo:p,logout:function(){o(!1),localStorage.removeItem("token")}}),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0,component:b}),r.a.createElement(Ze,{path:"/image",exact:!0,component:C,setUserLoggedIn:o}),r.a.createElement(Ze,{path:"/image/:id",exact:!0,component:st,setUserLoggedIn:o}),r.a.createElement(u.b,{path:"/embed/:id",exact:!0,render:function(){return r.a.createElement(bt,null,r.a.createElement(Ft,{setIsEmbedPage:E}))}}),r.a.createElement(u.b,{path:"/login",render:function(e){return r.a.createElement(Ke,{setUserLoggedIn:o})}}),r.a.createElement(Ze,{path:"/dashboard",component:Qe,setUserLoggedIn:o}),r.a.createElement(Ze,{path:"/create",component:lt,setUserLoggedIn:o}),r.a.createElement(u.b,{path:"/*",component:Ut}))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Vt,null)),document.getElementById("root"))}},[[213,1,2]]]);